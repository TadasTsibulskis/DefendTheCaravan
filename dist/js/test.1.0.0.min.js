!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(d){!function(a){if("object"==typeof c&&"undefined"!=typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof d?d:"undefined"!=typeof self?self:this,e.PIXI=a()}}(function(){var b;return function b(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){var b=c[h][1][a];return f(b?b:a)},l,l.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}var e=32;c.INT_BITS=e,c.INT_MAX=2147483647,c.INT_MIN=-1<<e-1,c.sign=function(a){return(a>0)-(a<0)},c.abs=function(a){var b=a>>e-1;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(a<b)},c.max=function(a,b){return a^(a^b)&-(a<b)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,a=(858993459&a)+(a>>>2&858993459),16843009*(a+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var f=new Array(256);!function(a){for(var b=0;b<256;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(f),c.reverse=function(a){return f[255&a]<<24|f[a>>>8&255]<<16|f[a>>>16&255]<<8|f[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),a=65535&(a|a>>>16),a<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),a=1023&(a|a>>>16),a<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],2:[function(a,b,c){"use strict";function d(a,b,c){c=c||2;var d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[];if(!h)return i;var j,k,m,n,o,p,q;if(d&&(h=l(a,b,h,c)),a.length>80*c){j=m=a[0],k=n=a[1];for(var r=c;r<f;r+=c)o=a[r],p=a[r+1],o<j&&(j=o),p<k&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g;if(e===F(a,b,c,d)>0)for(f=b;f<c;f+=d)g=C(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=C(f,a[f],a[f+1],g);return g&&w(g,g.next)&&(D(g),g=g.next),g}function f(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,d.steiner||!w(d,d.next)&&0!==v(d.prev,d,d.next))d=d.next;else{if(D(d),d=b=d.prev,d===d.next)return null;c=!0}while(c||d!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var n,o,q=a;a.prev!==a.next;)if(n=a.prev,o=a.next,l?i(a,d,e,l):h(a))b.push(n.i/c),b.push(a.i/c),b.push(o.i/c),D(a),a=o.next,q=o.next;else if(a=o,a===q){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b=a.prev,c=a,d=a.next;if(v(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(t(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&v(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function i(a,b,c,d){var e=a.prev,f=a,g=a.next;if(v(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=r(h,i,b,c,d),m=r(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function j(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!w(e,f)&&x(e,d,d.next,f)&&z(e,f)&&z(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),D(d),D(d.next),d=a=f),d=d.next}while(d!==a);return d}function k(a,b,c,d,e,h){var i=a;do{for(var j=i.next.next;j!==i.prev;){if(i.i!==j.i&&u(i,j)){var k=B(i,j);return i=f(i,i.next),k=f(k,k.next),g(i,b,c,d,e,h),void g(k,b,c,d,e,h)}j=j.next}i=i.next}while(i!==a)}function l(a,b,c,d){var g,h,i,j,k,l=[];for(g=0,h=b.length;g<h;g++)i=b[g]*d,j=g<h-1?b[g+1]*d:a.length,k=e(a,i,j,d,!1),k===k.next&&(k.steiner=!0),l.push(s(k));for(l.sort(m),g=0;g<l.length;g++)n(l[g],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var c,d=b,e=a.x,f=a.y,g=-(1/0);do{if(f<=d.y&&f>=d.next.y){var h=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(h<=e&&h>g){if(g=h,h===e){if(f===d.y)return d;if(f===d.next.y)return d.next}c=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!c)return null;if(e===g)return c.prev;var i,j=c,k=c.x,l=c.y,m=1/0;for(d=c.next;d!==j;)e>=d.x&&d.x>=k&&t(f<l?e:g,f,k,l,f<l?g:e,f,d.x,d.y)&&(i=Math.abs(f-d.y)/(e-d.x),(i<m||i===m&&d.x>c.x)&&z(d,a)&&(c=d,m=i)),d=d.next;return c}function p(a,b,c,d){var e=a;do null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;b<j&&(h++,d=d.nextZ);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return!!(w(a,b)&&w(c,d)||w(a,d)&&w(c,b))||v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(a,b,c,d){for(var e=0,f=b,g=c-d;f<c;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}b.exports=d,d.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(F(a,0,f,c));if(e)for(var h=0,i=b.length;h<i;h++){var j=b[h]*c,k=h<i-1?b[h+1]*c:a.length;g-=Math.abs(F(a,j,k,c))}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return 0===g&&0===l?0:Math.abs((l-g)/g)},d.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;g<b;g++)c.vertices.push(a[e][f][g]);e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}},{}],3:[function(a,b,c){"use strict";function d(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function e(){}var f=Object.prototype.hasOwnProperty,g="function"!=typeof Object.create&&"~";e.prototype._events=void 0,e.prototype.eventNames=function(){var a,b=this._events,c=[];if(!b)return c;for(a in b)f.call(b,a)&&c.push(g?a.slice(1):a);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(b)):c},e.prototype.listeners=function(a,b){var c=g?g+a:a,d=this._events&&this._events[c];if(b)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,h=new Array(f);e<f;e++)h[e]=d[e].fn;return h},e.prototype.emit=function(a,b,c,d,e,f){var h=g?g+a:a;if(!this._events||!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if("function"==typeof k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,e),!0;case 6:return k.fn.call(k.context,b,c,d,e,f),!0}for(j=1,i=new Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;default:if(!i)for(m=1,i=new Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},e.prototype.on=function(a,b,c){var e=new d(b,c||this),f=g?g+a:a;return this._events||(this._events=g?{}:Object.create(null)),this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],e]:this._events[f].push(e):this._events[f]=e,this},e.prototype.once=function(a,b,c){var e=new d(b,c||this,!0),f=g?g+a:a;return this._events||(this._events=g?{}:Object.create(null)),this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],e]:this._events[f].push(e):this._events[f]=e,this},e.prototype.removeListener=function(a,b,c,d){var e=g?g+a:a;if(!this._events||!this._events[e])return this;var f=this._events[e],h=[];if(b)if(f.fn)(f.fn!==b||d&&!f.once||c&&f.context!==c)&&h.push(f);else for(var i=0,j=f.length;i<j;i++)(f[i].fn!==b||d&&!f[i].once||c&&f[i].context!==c)&&h.push(f[i]);return h.length?this._events[e]=1===h.length?h[0]:h:delete this._events[e],this},e.prototype.removeAllListeners=function(a){return this._events?(a?delete this._events[g?g+a:a]:this._events=g?{}:Object.create(null),this):this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prototype.setMaxListeners=function(){return this},e.prefixed=g,"undefined"!=typeof b&&(b.exports=e)},{}],4:[function(a,c,d){!function(a){var d=/iPhone/i,e=/iPod/i,f=/iPad/i,g=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,h=/Android/i,i=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,j=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,k=/IEMobile/i,l=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,n=/BB10/i,o=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,q=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,r=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),s=function(a,b){return a.test(b)},t=function(a){var b=a||navigator.userAgent,c=b.split("[FBAN");if("undefined"!=typeof c[1]&&(b=c[0]),c=b.split("Twitter"),"undefined"!=typeof c[1]&&(b=c[0]),this.apple={phone:s(d,b),ipod:s(e,b),tablet:!s(d,b)&&s(f,b),device:s(d,b)||s(e,b)||s(f,b)},this.amazon={phone:s(i,b),tablet:!s(i,b)&&s(j,b),device:s(i,b)||s(j,b)},this.android={phone:s(i,b)||s(g,b),tablet:!s(i,b)&&!s(g,b)&&(s(j,b)||s(h,b)),device:s(i,b)||s(j,b)||s(g,b)||s(h,b)},this.windows={phone:s(k,b),tablet:s(l,b),device:s(k,b)||s(l,b)},this.other={blackberry:s(m,b),blackberry10:s(n,b),opera:s(o,b),firefox:s(q,b),chrome:s(p,b),device:s(m,b)||s(n,b)||s(o,b)||s(q,b)||s(p,b)},this.seven_inch=s(r,b),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},u=function(){var a=new t;return a.Class=t,a};"undefined"!=typeof c&&c.exports&&"undefined"==typeof window?c.exports=t:"undefined"!=typeof c&&c.exports&&"undefined"!=typeof window?c.exports=u():"function"==typeof b&&b.amd?b("isMobile",[],a.isMobile=u()):a.isMobile=u()}(this)},{}],5:[function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(a){return!1}}var f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;b.exports=e()?Object.assign:function(a,b){for(var c,e,h=d(a),i=1;i<arguments.length;i++){c=Object(arguments[i]);for(var j in c)f.call(c,j)&&(h[j]=c[j]);if(Object.getOwnPropertySymbols){e=Object.getOwnPropertySymbols(c);for(var k=0;k<e.length;k++)g.call(c,e[k])&&(h[e[k]]=c[e[k]])}}return h}},{}],6:[function(a,b,c){var d=new ArrayBuffer(0),e=function(a,b,c,e){this.gl=a,this.buffer=a.createBuffer(),this.type=b||a.ARRAY_BUFFER,this.drawType=e||a.STATIC_DRAW,this.data=d,c&&this.upload(c)};e.prototype.upload=function(a,b,c){c||this.bind();var d=this.gl;a=a||this.data,b=b||0,this.data.byteLength>=a.byteLength?d.bufferSubData(this.type,b,a):d.bufferData(this.type,a,this.drawType),this.data=a},e.prototype.bind=function(){var a=this.gl;a.bindBuffer(this.type,this.buffer)},e.createVertexBuffer=function(a,b,c){return new e(a,a.ARRAY_BUFFER,b,c)},e.createIndexBuffer=function(a,b,c){return new e(a,a.ELEMENT_ARRAY_BUFFER,b,c)},e.create=function(a,b,c,d){return new e(a,b,d)},e.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},b.exports=e},{}],7:[function(a,b,c){var d=a("./GLTexture"),e=function(a,b,c){this.gl=a,this.framebuffer=a.createFramebuffer(),this.stencil=null,this.texture=null,this.width=b||100,this.height=c||100};e.prototype.enableTexture=function(a){var b=this.gl;this.texture=a||new d(b),this.texture.bind(),this.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.texture.texture,0)},e.prototype.enableStencil=function(){if(!this.stencil){var a=this.gl;this.stencil=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.stencil),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.stencil),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.width,this.height)}},e.prototype.clear=function(a,b,c,d){this.bind();var e=this.gl;e.clearColor(a,b,c,d),e.clear(e.COLOR_BUFFER_BIT)},e.prototype.bind=function(){var a=this.gl;this.texture&&this.texture.unbind(),a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer)},e.prototype.unbind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)},e.prototype.resize=function(a,b){var c=this.gl;this.width=a,this.height=b,this.texture&&this.texture.uploadData(null,a,b),this.stencil&&(c.bindRenderbuffer(c.RENDERBUFFER,this.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,b))},e.prototype.destroy=function(){var a=this.gl;this.texture&&this.texture.destroy(),a.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},e.createRGBA=function(a,b,c){var f=d.fromData(a,null,b,c);f.enableNearestScaling(),f.enableWrapClamp();var g=new e(a,b,c);return g.enableTexture(f),g.unbind(),g},e.createFloat32=function(a,b,c,f){var g=new d.fromData(a,f,b,c);g.enableNearestScaling(),g.enableWrapClamp();var h=new e(a,b,c);return h.enableTexture(g),h.unbind(),h},b.exports=e},{"./GLTexture":9}],8:[function(a,b,c){var d=a("./shader/compileProgram"),e=a("./shader/extractAttributes"),f=a("./shader/extractUniforms"),g=a("./shader/generateUniformAccessObject"),h=function(a,b,c){this.gl=a,this.program=d(a,b,c),this.attributes=e(a,this.program);var h=f(a,this.program);this.uniforms=g(a,h)};h.prototype.bind=function(){this.gl.useProgram(this.program)},h.prototype.destroy=function(){},b.exports=h},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18}],9:[function(a,b,c){var d=function(a,b,c,d,e){this.gl=a,this.texture=a.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=b||0,this.height=c||0,this.format=d||a.RGBA,this.type=e||a.UNSIGNED_BYTE};d.prototype.upload=function(a){this.bind();var b=this.gl;this.width=a.videoWidth||a.width,this.height=a.videoHeight||a.height,b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,this.type,a)};var e=!1;d.prototype.uploadData=function(a,b,c){this.bind();var d=this.gl;if(this.width=b||this.width,this.height=c||this.height,a instanceof Float32Array){if(!e){var f=d.getExtension("OES_texture_float");if(!f)throw new Error("floating point textures not available");e=!0}this.type=d.FLOAT}else this.type=d.UNSIGNED_BYTE;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),d.texImage2D(d.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,a||null)},d.prototype.bind=function(a){var b=this.gl;void 0!==a&&b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this.texture)},d.prototype.unbind=function(){var a=this.gl;a.bindTexture(a.TEXTURE_2D,null)},d.prototype.minFilter=function(a){var b=this.gl;this.bind(),this.mipmap?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR:b.NEAREST)},d.prototype.magFilter=function(a){var b=this.gl;this.bind(),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a?b.LINEAR:b.NEAREST)},d.prototype.enableMipmap=function(){var a=this.gl;this.bind(),this.mipmap=!0,a.generateMipmap(a.TEXTURE_2D)},d.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},d.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},d.prototype.enableWrapClamp=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)},d.prototype.enableWrapRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)},d.prototype.enableWrapMirrorRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.MIRRORED_REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.MIRRORED_REPEAT)},d.prototype.destroy=function(){var a=this.gl;a.deleteTexture(this.texture)},d.fromSource=function(a,b,c){var e=new d(a);return e.premultiplyAlpha=c||!1,e.upload(b),e},d.fromData=function(a,b,c,e){var f=new d(a);return f.uploadData(b,c,e),f},b.exports=d},{}],10:[function(a,b,c){function d(a,b){if(this.nativeVaoExtension=null,d.FORCE_NATIVE||(this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=b,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var c=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(c),attribState:new Array(c)}}this.gl=a,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var e=a("./setVertexAttribArrays");d.prototype.constructor=d,b.exports=d,d.FORCE_NATIVE=!1,d.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},d.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},d.prototype.activate=function(){for(var a=this.gl,b=null,c=0;c<this.attributes.length;c++){var d=this.attributes[c];b!==d.buffer&&(d.buffer.bind(),b=d.buffer),a.vertexAttribPointer(d.attribute.location,d.attribute.size,d.type||a.FLOAT,d.normalized||!1,d.stride||0,d.start||0)}return e(a,this.attributes,this.nativeState),this.indexBuffer.bind(),this},d.prototype.addAttribute=function(a,b,c,d,e,f){return this.attributes.push({buffer:a,attribute:b,location:b.location,type:c||this.gl.FLOAT,normalized:d||!1,stride:e||0,start:f||0}),this.dirty=!0,this},d.prototype.addIndex=function(a){return this.indexBuffer=a,this.dirty=!0,this},d.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},d.prototype.draw=function(a,b,c){var d=this.gl;return d.drawElements(a,b,d.UNSIGNED_SHORT,c||0),this},d.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null}},{"./setVertexAttribArrays":13}],11:[function(a,b,c){var d=function(a,b){var c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b);if(!c)throw new Error("This browser does not support webGL. Try using the canvas renderer");return c};b.exports=d},{}],12:[function(a,b,c){var d={createContext:a("./createContext"),setVertexAttribArrays:a("./setVertexAttribArrays"),GLBuffer:a("./GLBuffer"),GLFramebuffer:a("./GLFramebuffer"),GLShader:a("./GLShader"),GLTexture:a("./GLTexture"),VertexArrayObject:a("./VertexArrayObject"),shader:a("./shader")};"undefined"!=typeof b&&b.exports&&(b.exports=d),"undefined"!=typeof window&&(window.pixi={gl:d})},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(a,b,c){var d=function(a,b,c){var d;if(c){var e=c.tempAttribState,f=c.attribState;for(d=0;d<e.length;d++)e[d]=!1;for(d=0;d<b.length;d++)e[b[d].attribute.location]=!0;for(d=0;d<f.length;d++)f[d]!==e[d]&&(f[d]=e[d],c.attribState[d]?a.enableVertexAttribArray(d):a.disableVertexAttribArray(d))}else for(d=0;d<b.length;d++){var g=b[d];a.enableVertexAttribArray(g.attribute.location)}};b.exports=d},{}],14:[function(a,b,c){var d=function(a,b,c){var d=e(a,a.VERTEX_SHADER,b),f=e(a,a.FRAGMENT_SHADER,c),g=a.createProgram();return a.attachShader(g,d),a.attachShader(g,f),a.linkProgram(g),a.getProgramParameter(g,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(g,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(g)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(g)),a.deleteProgram(g),g=null),a.deleteShader(d),a.deleteShader(f),g},e=function(a,b,c){var d=a.createShader(b);return a.shaderSource(d,c),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS)?d:(console.log(a.getShaderInfoLog(d)),null)};b.exports=d},{}],15:[function(a,b,c){var d=function(a,b){switch(a){case"float":return 0;case"vec2":return new Float32Array(2*b);case"vec3":return new Float32Array(3*b);case"vec4":return new Float32Array(4*b);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*b);case"ivec3":return new Int32Array(3*b);case"ivec4":return new Int32Array(4*b);case"bool":return!1;case"bvec2":return e(2*b);case"bvec3":return e(3*b);case"bvec4":return e(4*b);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},e=function(a){for(var b=new Array(a),c=0;c<b.length;c++)b[c]=!1;return b};b.exports=d},{}],16:[function(a,b,c){var d=a("./mapType"),e=a("./mapSize"),f=function(a,b){for(var c={},f=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),h=0;h<f;h++){var i=a.getActiveAttrib(b,h),j=d(a,i.type);c[i.name]={type:j,size:e(j),location:a.getAttribLocation(b,i.name),pointer:g}}return c},g=function(a,b,c,d){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,b||!1,c||0,d||0)};b.exports=f},{"./mapSize":20,"./mapType":21}],17:[function(a,b,c){var d=a("./mapType"),e=a("./defaultValue"),f=function(a,b){for(var c={},f=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),g=0;g<f;g++){var h=a.getActiveUniform(b,g),i=h.name.replace(/\[.*?\]/,""),j=d(a,h.type);c[i]={type:j,size:h.size,location:a.getUniformLocation(b,i),value:e(j,h.size)}}return c};b.exports=f},{"./defaultValue":15,"./mapType":21}],18:[function(a,b,c){var d=function(a,b){var c={data:{}};c.gl=a;for(var d=Object.keys(b),h=0;h<d.length;h++){var i=d[h],j=i.split("."),k=j[j.length-1],l=g(j,c),m=b[i];l.data[k]=m,l.gl=a,Object.defineProperty(l,k,{get:e(k),set:f(k,m)})}return c},e=function(a){var b=h.replace("%%",a);return new Function(b)},f=function(a,b){var c,d=i.replace(/%%/g,a);return c=1===b.size?j[b.type]:k[b.type],c&&(d+="\nthis.gl."+c+";"),new Function("value",d)},g=function(a,b){for(var c=b,d=0;d<a.length-1;d++){var e=c[a[d]]||{data:{}};c[a[d]]=e,c=e}return c},h=["return this.data.%%.value;"].join("\n"),i=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),j={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},k={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};b.exports=d},{}],19:[function(a,b,c){b.exports={compileProgram:a("./compileProgram"),defaultValue:a("./defaultValue"),extractAttributes:a("./extractAttributes"),extractUniforms:a("./extractUniforms"),generateUniformAccessObject:a("./generateUniformAccessObject"),mapSize:a("./mapSize"),mapType:a("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21}],20:[function(a,b,c){var d=function(a){return e[a]},e={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};b.exports=d},{}],21:[function(a,b,c){var d=function(a,b){if(!e){var c=Object.keys(f);e={};for(var d=0;d<c.length;++d){var g=c[d];e[a[g]]=f[g]}}return e[b]},e=null,f={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};b.exports=d},{}],22:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:23}],23:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e;
}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],24:[function(a,c,e){(function(a){!function(d){function f(a){throw new RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(H,".");var e=a.split("."),f=g(e,b).join(".");return d+f}function i(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:x}function l(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),c<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;e<q;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=i<=t?y:i>=t+z?z:i-t,!(l<n);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;h<q;++h)p=a[h],p<128&&u.push(L(p));for(d=e=u.length,e&&u.push(E);d<q;){for(j=w,h=0;h<q;++h)p=a[h],p>=b&&p<j&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;h<q;++h)if(p=a[h],p<b&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=n<=g?y:n>=g+z?z:n-g,!(k<o);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof e&&e&&!e.nodeType&&e,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof a&&a;t.global!==t&&t.window!==t&&t.self!==t||(d=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof b&&"object"==typeof b.amd&&b.amd)b("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else d.punycode=u}(this)}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],26:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],27:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":25,"./encode":26}],28:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=255,t=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=d!==-1&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],b?this.query=y.parse(this.search.substr(1)):this.query=this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var z="//"===h.substr(0,2);!z||n&&w[n]||(h=h.substr(2),this.slashes=!0)}if(!w[n]&&(z||n&&!x[n])){for(var A=-1,B=0;B<r.length;B++){var C=h.indexOf(r[B]);C!==-1&&(A===-1||C<A)&&(A=C)}var D,E;E=A===-1?h.lastIndexOf("@"):h.lastIndexOf("@",A),E!==-1&&(D=h.slice(0,E),h=h.slice(E+1),this.auth=decodeURIComponent(D)),A=-1;for(var B=0;B<q.length;B++){var C=h.indexOf(q[B]);C!==-1&&(A===-1||C<A)&&(A=C)}A===-1&&(A=h.length),this.host=h.slice(0,A),h=h.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var G=this.hostname.split(/\./),B=0,H=G.length;B<H;B++){var I=G[B];if(I&&!I.match(t)){for(var J="",K=0,L=I.length;K<L;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(t)){var M=G.slice(0,B),N=G.slice(B+1),O=I.match(u);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(h="/"+N.join(".")+h),this.hostname=M.join(".");break}}}this.hostname.length>s?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=i.toASCII(this.hostname));var P=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[o])for(var B=0,H=p.length;B<H;B++){var R=p[B];if(h.indexOf(R)!==-1){var S=encodeURIComponent(R);S===R&&(S=escape(R)),h=h.split(R).join(S)}}var T=h.indexOf("#");T!==-1&&(this.hash=h.substr(T),h=h.slice(0,T));var U=h.indexOf("?");if(U!==-1?(this.search=h.substr(U),this.query=h.substr(U+1),b&&(this.query=y.parse(this.query)),h=h.slice(0,U)):b&&(this.search="",this.query={}),h&&(this.pathname=h),x[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=y.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||x[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return x[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!x[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||w[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,v=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!x[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===v[0]?v[0]=c.host:v.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===v[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,v=o;else if(o.length)v||(v=[]),v.pop(),v=v.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=v.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!v.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=v.slice(-1)[0],B=(c.host||a.host||v.length>1)&&("."===A||".."===A)||""===A,C=0,D=v.length;D>=0;D--)A=v[D],"."===A?v.splice(D,1):".."===A?(v.splice(D,1),C++):C&&(v.splice(D,1),C--);if(!t&&!u)for(;C--;C)v.unshift("..");!t||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),B&&"/"!==v.join("/").substr(-1)&&v.push("");var E=""===v[0]||v[0]&&"/"===v[0].charAt(0);if(y){c.hostname=c.host=E?"":v.length?v.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&v.length,t&&!E&&v.unshift(""),v.length?c.pathname=v.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":29,punycode:24,querystring:27}],29:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],30:[function(a,b,c){"use strict";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(){this._events=new d,this._eventsCount=0}var g=Object.prototype.hasOwnProperty,h="~";Object.create&&(d.prototype=Object.create(null),(new d).__proto__||(h=!1)),f.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)g.call(a,b)&&c.push(h?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},f.prototype.listeners=function(a,b){var c=h?h+a:a,d=this._events[c];if(b)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=new Array(f);e<f;e++)g[e]=d[e].fn;return g},f.prototype.emit=function(a,b,c,d,e,f){var g=h?h+a:a;if(!this._events[g])return!1;var i,j,k=this._events[g],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,e),!0;case 6:return k.fn.call(k.context,b,c,d,e,f),!0}for(j=1,i=new Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;case 4:k[j].fn.call(k[j].context,b,c,d);break;default:if(!i)for(m=1,i=new Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},f.prototype.on=function(a,b,c){var d=new e(b,c||this),f=h?h+a:a;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],d]:this._events[f].push(d):(this._events[f]=d,this._eventsCount++),this},f.prototype.once=function(a,b,c){var d=new e(b,c||this,!0),f=h?h+a:a;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],d]:this._events[f].push(d):(this._events[f]=d,this._eventsCount++),this},f.prototype.removeListener=function(a,b,c,e){var f=h?h+a:a;if(!this._events[f])return this;if(!b)return 0===--this._eventsCount?this._events=new d:delete this._events[f],this;var g=this._events[f];if(g.fn)g.fn!==b||e&&!g.once||c&&g.context!==c||(0===--this._eventsCount?this._events=new d:delete this._events[f]);else{for(var i=0,j=[],k=g.length;i<k;i++)(g[i].fn!==b||e&&!g[i].once||c&&g[i].context!==c)&&j.push(g[i]);j.length?this._events[f]=1===j.length?j[0]:j:0===--this._eventsCount?this._events=new d:delete this._events[f]}return this},f.prototype.removeAllListeners=function(a){var b;return a?(b=h?h+a:a,this._events[b]&&(0===--this._eventsCount?this._events=new d:delete this._events[b])):(this._events=new d,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prototype.setMaxListeners=function(){return this},f.prefixed=h,f.EventEmitter=f,"undefined"!=typeof b&&(b.exports=f)},{}],31:[function(a,b,c){"use strict";b.exports=function(a,b){b=b||{};for(var c={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},d=c.parser[b.strictMode?"strict":"loose"].exec(a),e={},f=14;f--;)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e}},{}],32:[function(a,b,c){"use strict";function d(a,b){h.call(this),b=b||i,this.baseUrl=a||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=f.queue(this._boundLoadResource,b),this.resources={}}var e=a("parse-uri"),f=a("./async"),g=a("./Resource"),h=a("eventemitter3"),i=10,j=100;d.prototype=Object.create(h.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.add=d.prototype.enqueue=function(a,b,c,d){if(Array.isArray(a)){for(var e=0;e<a.length;++e)this.add(a[e]);return this}if("object"==typeof a&&(d=b||a.callback||a.onComplete,c=a,b=a.url,a=a.name||a.key||a.url),"string"!=typeof b&&(d=c,c=b,b=a),"string"!=typeof b)throw new Error("No url passed to add resource to loader.");if("function"==typeof c&&(d=c,c=null),this.resources[a])throw new Error('Resource with name "'+a+'" already exists.');return b=this._prepareUrl(b),this.resources[a]=new g(a,b,c),"function"==typeof d&&this.resources[a].once("afterMiddleware",d),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[a]),this._progressChunk=(j-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[a]),this._progressChunk=j/this._buffer.length),this},d.prototype.before=d.prototype.pre=function(a){return this._beforeMiddleware.push(a),this},d.prototype.after=d.prototype.use=function(a){return this._afterMiddleware.push(a),this},d.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1;for(var a in this.resources){var b=this.resources[a];b.off("complete",this._onLoad,this),b.isLoading&&b.abort()}return this.resources={},this},d.prototype.load=function(a){if("function"==typeof a&&this.once("complete",a),this._queue.started)return this;this.emit("start",this),this.loading=!0;for(var b=0;b<this._buffer.length;++b)this._queue.push(this._buffer[b]);return this._buffer.length=0,this},d.prototype._prepareUrl=function(a){var b=e(a,{strictMode:!0});return b.protocol||!b.path||0===b.path.indexOf("//")?a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a},d.prototype._loadResource=function(a,b){var c=this;a._dequeue=b,f.eachSeries(this._beforeMiddleware,function(b,d){b.call(c,a,function(){d(a.isComplete?{}:null)})},function(){a.isComplete?c._onLoad(a):(a.once("complete",c._onLoad,c),a.load())})},d.prototype._onComplete=function(){this.loading=!1,this.emit("complete",this,this.resources)},d.prototype._onLoad=function(a){var b=this;f.eachSeries(this._afterMiddleware,function(c,d){c.call(b,a,d)},function(){a.emit("afterMiddleware",a),b._numToLoad--,b.progress+=b._progressChunk,b.emit("progress",b,a),a.error?b.emit("error",a.error,b,a):b.emit("load",b,a),0===b._numToLoad&&(b.progress=100,b._onComplete())}),a._dequeue()},d.LOAD_TYPE=g.LOAD_TYPE,d.XHR_RESPONSE_TYPE=g.XHR_RESPONSE_TYPE},{"./Resource":33,"./async":34,eventemitter3:30,"parse-uri":31}],33:[function(a,b,c){"use strict";function d(a,b,c){if(g.call(this),c=c||{},"string"!=typeof a||"string"!=typeof b)throw new Error("Both name and url are required for constructing a resource.");this.name=a,this.url=b,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=c.crossOrigin===!0?"anonymous":c.crossOrigin,this.loadType=c.loadType||this._determineLoadType(),this.xhrType=c.xhrType,this.metadata=c.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function e(a){return a.toString().replace("object ","")}function f(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1)),b&&(a[b]=c)}var g=a("eventemitter3"),h=a("parse-uri"),i=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),j=null,k=0,l=200,m=204;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this.isComplete=!0,this.isLoading=!1,this.emit("complete",this)},d.prototype.abort=function(a){if(!this.error){if(this.error=new Error(a),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if("undefined"!=typeof this.data.src)this.data.src="";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},d.prototype.load=function(a){if(!this.isLoading)if(this.isComplete){if(a){var b=this;setTimeout(function(){a(b)},1)}}else switch(a&&this.once("complete",a),this.isLoading=!0,this.emit("start",this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case d.LOAD_TYPE.IMAGE:this._loadElement("image");break;case d.LOAD_TYPE.AUDIO:this._loadSourceElement("audio");break;case d.LOAD_TYPE.VIDEO:this._loadSourceElement("video");break;case d.LOAD_TYPE.XHR:default:i&&this.crossOrigin?this._loadXdr():this._loadXhr()}},d.prototype._loadElement=function(a){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===a&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(a),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var b="is"+a[0].toUpperCase()+a.substring(1);this[b]===!1&&(this[b]=!0),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},d.prototype._loadSourceElement=function(a){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===a&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(a),null===this.data)return void this.abort("Unsupported element "+a);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=0;b<this.url.length;++b)this.data.appendChild(this._createSource(a,this.url[b]));else this.data.appendChild(this._createSource(a,this.url));this["is"+a[0].toUpperCase()+a.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},d.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XMLHttpRequest;a.open("GET",this.url,!0),this.xhrType===d.XHR_RESPONSE_TYPE.JSON||this.xhrType===d.XHR_RESPONSE_TYPE.DOCUMENT?a.responseType=d.XHR_RESPONSE_TYPE.TEXT:a.responseType=this.xhrType,a.addEventListener("error",this._boundXhrOnError,!1),a.addEventListener("abort",this._boundXhrOnAbort,!1),a.addEventListener("progress",this._boundOnProgress,!1),a.addEventListener("load",this._boundXhrOnLoad,!1),a.send()},d.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XDomainRequest;a.timeout=5e3,a.onerror=this._boundXhrOnError,a.ontimeout=this._boundXdrOnTimeout,a.onprogress=this._boundOnProgress,a.onload=this._boundXhrOnLoad,a.open("GET",this.url,!0),setTimeout(function(){a.send()},0)},d.prototype._createSource=function(a,b,c){c||(c=a+"/"+b.substr(b.lastIndexOf(".")+1));var d=document.createElement("source");return d.src=b,d.type=c,d},d.prototype._onError=function(a){this.abort("Failed to load element using "+a.target.nodeName)},d.prototype._onProgress=function(a){a&&a.lengthComputable&&this.emit("progress",this,a.loaded/a.total)},d.prototype._xhrOnError=function(){var a=this.xhr;this.abort(e(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')},d.prototype._xhrOnAbort=function(){this.abort(e(this.xhr)+" Request was aborted by the user.")},d.prototype._xdrOnTimeout=function(){this.abort(e(this.xhr)+" Request timed out.")},d.prototype._xhrOnLoad=function(){var a=this.xhr,b="undefined"==typeof a.status?a.status:l;if(!(b===l||b===m||b===k&&a.responseText.length>0))return void this.abort("["+a.status+"]"+a.statusText+":"+a.responseURL);if(this.xhrType===d.XHR_RESPONSE_TYPE.TEXT)this.data=a.responseText;else if(this.xhrType===d.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(a.responseText),this.isJson=!0}catch(a){return void this.abort("Error trying to parse loaded json:",a)}else if(this.xhrType===d.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var c=new DOMParser;this.data=c.parseFromString(a.responseText,"text/xml")}else{var e=document.createElement("div");e.innerHTML=a.responseText,this.data=e}this.isXml=!0}catch(a){return void this.abort("Error trying to parse loaded xml:",a)}else this.data=a.response||a.responseText;this.complete()},d.prototype._determineCrossOrigin=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location,j||(j=document.createElement("a")),j.href=a,a=h(j.href,{strictMode:!0});var c=!a.port&&""===b.port||a.port===b.port,d=a.protocol?a.protocol+":":"";return a.host===b.hostname&&c&&d===b.protocol?"":"anonymous"},d.prototype._determineXhrType=function(){return d._xhrTypeMap[this._getExtension()]||d.XHR_RESPONSE_TYPE.TEXT},d.prototype._determineLoadType=function(){return d._loadTypeMap[this._getExtension()]||d.LOAD_TYPE.XHR},d.prototype._getExtension=function(){var a=this.url,b="";if(this.isDataUrl){var c=a.indexOf("/");b=a.substring(c+1,a.indexOf(";",c))}else{var d=a.indexOf("?");d!==-1&&(a=a.substring(0,d)),b=a.substring(a.lastIndexOf(".")+1)}return b.toLowerCase()},d.prototype._getMimeFromXhrType=function(a){switch(a){case d.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case d.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case d.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case d.XHR_RESPONSE_TYPE.JSON:return"application/json";case d.XHR_RESPONSE_TYPE.DEFAULT:case d.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},d.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},d.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},d._loadTypeMap={gif:d.LOAD_TYPE.IMAGE,png:d.LOAD_TYPE.IMAGE,bmp:d.LOAD_TYPE.IMAGE,jpg:d.LOAD_TYPE.IMAGE,jpeg:d.LOAD_TYPE.IMAGE,tif:d.LOAD_TYPE.IMAGE,tiff:d.LOAD_TYPE.IMAGE,webp:d.LOAD_TYPE.IMAGE,tga:d.LOAD_TYPE.IMAGE,"svg+xml":d.LOAD_TYPE.IMAGE},d._xhrTypeMap={xhtml:d.XHR_RESPONSE_TYPE.DOCUMENT,html:d.XHR_RESPONSE_TYPE.DOCUMENT,htm:d.XHR_RESPONSE_TYPE.DOCUMENT,xml:d.XHR_RESPONSE_TYPE.DOCUMENT,tmx:d.XHR_RESPONSE_TYPE.DOCUMENT,tsx:d.XHR_RESPONSE_TYPE.DOCUMENT,svg:d.XHR_RESPONSE_TYPE.DOCUMENT,gif:d.XHR_RESPONSE_TYPE.BLOB,png:d.XHR_RESPONSE_TYPE.BLOB,bmp:d.XHR_RESPONSE_TYPE.BLOB,jpg:d.XHR_RESPONSE_TYPE.BLOB,jpeg:d.XHR_RESPONSE_TYPE.BLOB,tif:d.XHR_RESPONSE_TYPE.BLOB,tiff:d.XHR_RESPONSE_TYPE.BLOB,webp:d.XHR_RESPONSE_TYPE.BLOB,tga:d.XHR_RESPONSE_TYPE.BLOB,json:d.XHR_RESPONSE_TYPE.JSON,text:d.XHR_RESPONSE_TYPE.TEXT,txt:d.XHR_RESPONSE_TYPE.TEXT},d.setExtensionLoadType=function(a,b){f(d._loadTypeMap,a,b)},d.setExtensionXhrType=function(a,b){f(d._xhrTypeMap,a,b)}},{eventemitter3:30,"parse-uri":31}],34:[function(a,b,c){"use strict";function d(){}function e(a,b,c){var d=0,e=a.length;!function f(g){return g||d===e?void(c&&c(g)):void b(a[d++],f)}()}function f(a){return function(){if(null===a)throw new Error("Callback was already called.");var b=a;a=null,b.apply(this,arguments)}}function g(a,b){function c(a,b,c){if(null!=c&&"function"!=typeof c)throw new Error("task callback must be a function");if(h.started=!0,null==a&&h.idle())return void setTimeout(function(){h.drain()},1);var e={data:a,callback:"function"==typeof c?c:d};b?h._tasks.unshift(e):h._tasks.push(e),setTimeout(function(){h.process()},1)}function e(a){return function(){g-=1,a.callback.apply(a,arguments),null!=arguments[0]&&h.error(arguments[0],a.data),g<=h.concurrency-h.buffer&&h.unsaturated(),h.idle()&&h.drain(),h.process()}}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var g=0,h={_tasks:[],concurrency:b,saturated:d,unsaturated:d,buffer:b/4,empty:d,drain:d,error:d,started:!1,paused:!1,push:function(a,b){c(a,!1,b)},kill:function(){h.drain=d,h._tasks=[]},unshift:function(a,b){c(a,!0,b)},process:function(){for(;!h.paused&&g<h.concurrency&&h._tasks.length;){var b=h._tasks.shift();0===h._tasks.length&&h.empty(),g+=1,g===h.concurrency&&h.saturated(),a(b.data,f(e(b)))}},length:function(){return h._tasks.length},running:function(){return g},idle:function(){return h._tasks.length+g===0},pause:function(){h.paused!==!0&&(h.paused=!0)},resume:function(){if(h.paused!==!1){h.paused=!1;for(var a=1;a<=h.concurrency;a++)h.process()}}};return h}b.exports={eachSeries:e,queue:g}},{}],35:[function(a,b,c){"use strict";b.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(a){for(var b,c="",d=new Array(4),e=0,f=0,g=0;e<a.length;){for(b=new Array(3),f=0;f<b.length;f++)e<a.length?b[f]=255&a.charCodeAt(e++):b[f]=0;switch(d[0]=b[0]>>2,d[1]=(3&b[0])<<4|b[1]>>4,d[2]=(15&b[1])<<2|b[2]>>6,d[3]=63&b[2],g=e-(a.length-1)){case 2:d[3]=64,d[2]=64;break;case 1:d[3]=64}for(f=0;f<d.length;f++)c+=this._keyStr.charAt(d[f])}return c}}},{}],36:[function(a,b,c){"use strict";b.exports=a("./Loader"),b.exports.Resource=a("./Resource"),b.exports.middleware={caching:{memory:a("./middlewares/caching/memory")},parsing:{blob:a("./middlewares/parsing/blob")}},b.exports.async=a("./async")},{"./Loader":32,"./Resource":33,"./async":34,"./middlewares/caching/memory":37,"./middlewares/parsing/blob":38}],37:[function(a,b,c){"use strict";var d={};b.exports=function(){return function(a,b){d[a.url]?(a.data=d[a.url],a.complete()):a.once("complete",function(){d[this.url]=this.data}),b()}}},{}],38:[function(a,b,c){"use strict";var d=a("../../Resource"),e=a("../../b64"),f=window.URL||window.webkitURL;b.exports=function(){return function(a,b){if(!a.data)return void b();if(a.xhr&&a.xhrType===d.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof a.data){if(0===a.data.type.indexOf("image")){var c=f.createObjectURL(a.data);return a.blob=a.data,a.data=new Image,a.data.src=c,
a.isImage=!0,void(a.data.onload=function(){f.revokeObjectURL(c),a.data.onload=null,b()})}}else{var g=a.xhr.getResponseHeader("content-type");if(g&&0===g.indexOf("image"))return a.data=new Image,a.data.src="data:"+g+";base64,"+e.encodeBinary(a.xhr.responseText),a.isImage=!0,void(a.data.onload=function(){a.data.onload=null,b()})}b()}}},{"../../Resource":33,"../../b64":35}],39:[function(a,b,c){function d(a){!f.tablet&&!f.phone||navigator.isCocoonJS||this.createTouchHook();var b=document.createElement("div");b.style.width="100px",b.style.height="100px",b.style.position="absolute",b.style.top=0,b.style.left=0,b.style.zIndex=2,this.div=b,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=a,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var e=a("../core"),f=a("ismobilejs");Object.assign(e.DisplayObject.prototype,a("./accessibleTarget")),d.prototype.constructor=d,b.exports=d,d.prototype.createTouchHook=function(){var a=document.createElement("button");a.style.width="1px",a.style.height="1px",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.style.zIndex=2,a.style.backgroundColor="#FF0000",a.title="HOOK DIV",a.addEventListener("focus",function(){this.isMobileAccessabillity=!0,this.activate(),document.body.removeChild(a)}.bind(this)),document.body.appendChild(a)},d.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},d.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},d.prototype.updateAccessibleObjects=function(a){if(a.visible){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);for(var b=a.children,c=b.length-1;c>=0;c--)this.updateAccessibleObjects(b[c])}},d.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var a=this.renderer.view.getBoundingClientRect(),b=a.width/this.renderer.width,c=a.height/this.renderer.height,d=this.div;d.style.left=a.left+"px",d.style.top=a.top+"px",d.style.width=this.renderer.width+"px",d.style.height=this.renderer.height+"px";for(var f=0;f<this.children.length;f++){var g=this.children[f];if(g.renderId!==this.renderId)g._accessibleActive=!1,e.utils.removeItems(this.children,f,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,f--,0===this.children.length&&this.deactivate();else{d=g._accessibleDiv;var h=g.hitArea,i=g.worldTransform;g.hitArea?(d.style.left=(i.tx+h.x*i.a)*b+"px",d.style.top=(i.ty+h.y*i.d)*c+"px",d.style.width=h.width*i.a*b+"px",d.style.height=h.height*i.d*c+"px"):(h=g.getBounds(),this.capHitArea(h),d.style.left=h.x*b+"px",d.style.top=h.y*c+"px",d.style.width=h.width*b+"px",d.style.height=h.height*c+"px")}}this.renderId++}},d.prototype.capHitArea=function(a){a.x<0&&(a.width+=a.x,a.x=0),a.y<0&&(a.height+=a.y,a.y=0),a.x+a.width>this.renderer.width&&(a.width=this.renderer.width-a.x),a.y+a.height>this.renderer.height&&(a.height=this.renderer.height-a.y)},d.prototype.addChild=function(a){var b=this.pool.pop();b||(b=document.createElement("button"),b.style.width="100px",b.style.height="100px",b.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",b.style.position="absolute",b.style.zIndex=2,b.style.borderStyle="none",b.addEventListener("click",this._onClick.bind(this)),b.addEventListener("focus",this._onFocus.bind(this)),b.addEventListener("focusout",this._onFocusOut.bind(this))),a.accessibleTitle?b.title=a.accessibleTitle:a.accessibleTitle||a.accessibleHint||(b.title="displayObject "+this.tabIndex),a.accessibleHint&&b.setAttribute("aria-label",a.accessibleHint),a._accessibleActive=!0,a._accessibleDiv=b,b.displayObject=a,this.children.push(a),this.div.appendChild(a._accessibleDiv),a._accessibleDiv.tabIndex=a.tabIndex},d.prototype._onClick=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"click",b.eventData)},d.prototype._onFocus=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"mouseover",b.eventData)},d.prototype._onFocusOut=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"mouseout",b.eventData)},d.prototype._onKeyDown=function(a){9===a.keyCode&&this.activate()},d.prototype._onMouseMove=function(){this.deactivate()},d.prototype.destroy=function(){this.div=null;for(var a=0;a<this.children.length;a++)this.children[a].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e.WebGLRenderer.registerPlugin("accessibility",d),e.CanvasRenderer.registerPlugin("accessibility",d)},{"../core":62,"./accessibleTarget":40,ismobilejs:4}],40:[function(a,b,c){var d={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};b.exports=d},{}],41:[function(a,b,c){b.exports={accessibleTarget:a("./accessibleTarget"),AccessibilityManager:a("./AccessibilityManager")}},{"./AccessibilityManager":39,"./accessibleTarget":40}],42:[function(a,b,c){function d(a){if(a instanceof Array){if("precision"!==a[0].substring(0,9)){var b=a.slice(0);return b.unshift("precision "+f.PRECISION.DEFAULT+" float;"),b}}else if("precision"!==a.substring(0,9))return"precision "+f.PRECISION.DEFAULT+" float;\n"+a;return a}var e=a("pixi-gl-core").GLShader,f=a("./const"),g=function(a,b,c,f){e.call(this,a,d(b),d(c),f)};g.prototype=Object.create(e.prototype),g.prototype.constructor=g,b.exports=g},{"./const":43,"pixi-gl-core":12}],43:[function(a,b,c){var d={VERSION:"4.0.3",PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},WRAP_MODES:{DEFAULT:0,CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},GC_MODES:{DEFAULT:0,AUTO:0,MANUAL:1},MIPMAP_TEXTURES:!0,RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},PRECISION:{DEFAULT:"mediump",LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},TRANSFORM_MODE:{DEFAULT:0,STATIC:0,DYNAMIC:1},TEXT_GRADIENT:{LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},SPRITE_BATCH_SIZE:4096,SPRITE_MAX_TEXTURES:a("./utils/maxRecommendedTextures")(32)};b.exports=d},{"./utils/maxRecommendedTextures":117}],44:[function(a,b,c){function d(){this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}var e=a("../math"),f=e.Rectangle;d.prototype.constructor=d,b.exports=d,d.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},d.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},d.prototype.getRectangle=function(a){return this.minX>this.maxX||this.minY>this.maxY?f.EMPTY:(a=a||new f(0,0,1,1),a.x=this.minX,a.y=this.minY,a.width=this.maxX-this.minX,a.height=this.maxY-this.minY,a)},d.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x),this.maxX=Math.max(this.maxX,a.x),this.minY=Math.min(this.minY,a.y),this.maxY=Math.max(this.maxY,a.y)},d.prototype.addQuad=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY,f=a[0],g=a[1];b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[2],g=a[3],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[4],g=a[5],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[6],g=a[7],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},d.prototype.addFrame=function(a,b,c,d,e){var f=a.worldTransform,g=f.a,h=f.b,i=f.c,j=f.d,k=f.tx,l=f.ty,m=this.minX,n=this.minY,o=this.maxX,p=this.maxY,q=g*b+i*c+k,r=h*b+j*c+l;m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*d+i*c+k,r=h*d+j*c+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*b+i*e+k,r=h*b+j*e+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*d+i*e+k,r=h*d+j*e+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,this.minX=m,this.minY=n,this.maxX=o,this.maxY=p},d.prototype.addVertices=function(a,b,c,d){for(var e=a.worldTransform,f=e.a,g=e.b,h=e.c,i=e.d,j=e.tx,k=e.ty,l=this.minX,m=this.minY,n=this.maxX,o=this.maxY,p=c;p<d;p+=2){var q=b[p],r=b[p+1],s=f*q+h*r+j,t=i*r+g*q+k;l=s<l?s:l,m=t<m?t:m,n=s>n?s:n,o=t>o?t:o}this.minX=l,this.minY=m,this.maxX=n,this.maxY=o},d.prototype.addBounds=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY;this.minX=a.minX<b?a.minX:b,this.minY=a.minY<c?a.minY:c,this.maxX=a.maxX>d?a.maxX:d,this.maxY=a.maxY>e?a.maxY:e}},{"../math":67}],45:[function(a,b,c){function d(){f.call(this),this.children=[]}var e=a("../utils"),f=a("./DisplayObject");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;0!==b?this.scale.x=a/b:this.scale.x=1,this._width=a}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;0!==b?this.scale.y=a/b:this.scale.y=1,this._height=a}}}),d.prototype.onChildrenChange=function(){},d.prototype.addChild=function(a){var b=arguments.length;if(b>1)for(var c=0;c<b;c++)this.addChild(arguments[c]);else a.parent&&a.parent.removeChild(a),a.parent=this,this.transform._parentID=-1,this.children.push(a),this.onChildrenChange(this.children.length-1),a.emit("added",this);return a},d.prototype.addChildAt=function(a,b){if(b>=0&&b<=this.children.length)return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.onChildrenChange(b),a.emit("added",this),a;throw new Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length)},d.prototype.swapChildren=function(a,b){if(a!==b){var c=this.getChildIndex(a),d=this.getChildIndex(b);if(c<0||d<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[c]=b,this.children[d]=a,this.onChildrenChange(c<d?c:d)}},d.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(b===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return b},d.prototype.setChildIndex=function(a,b){if(b<0||b>=this.children.length)throw new Error("The supplied index is out of bounds");var c=this.getChildIndex(a);e.removeItems(this.children,c,1),this.children.splice(b,0,a),this.onChildrenChange(b)},d.prototype.getChildAt=function(a){if(a<0||a>=this.children.length)throw new Error("getChildAt: Supplied index "+a+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[a]},d.prototype.removeChild=function(a){var b=arguments.length;if(b>1)for(var c=0;c<b;c++)this.removeChild(arguments[c]);else{var d=this.children.indexOf(a);if(d===-1)return;a.parent=null,e.removeItems(this.children,d,1),this.onChildrenChange(d),a.emit("removed",this)}return a},d.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return b.parent=null,e.removeItems(this.children,a,1),this.onChildrenChange(a),b.emit("removed",this),b},d.prototype.removeChildren=function(a,b){var c,d,e=a||0,f="number"==typeof b?b:this.children.length,g=f-e;if(g>0&&g<=f){for(c=this.children.splice(e,g),d=0;d<c.length;++d)c[d].parent=null;for(this.onChildrenChange(a),d=0;d<c.length;++d)c[d].emit("removed",this);return c}if(0===g&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},d.prototype.updateTransform=function(){if(this._boundsID++,this.visible){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var a=0,b=this.children.length;a<b;++a)this.children[a].updateTransform()}},d.prototype.containerUpdateTransform=d.prototype.updateTransform,d.prototype.calculateBounds=function(){if(this._bounds.clear(),this.visible){this._calculateBounds();for(var a=0;a<this.children.length;a++){var b=this.children[a];b.calculateBounds(),this._bounds.addBounds(b._bounds)}this._boundsID=this._lastBoundsID}},d.prototype._calculateBounds=function(){},d.prototype.renderWebGL=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(a);else{this._renderWebGL(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderWebGL(a)}},d.prototype.renderAdvancedWebGL=function(a){a.currentRenderer.flush();var b,c,d=this._filters,e=this._mask;if(d){for(this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0,b=0;b<d.length;b++)d[b].enabled&&this._enabledFilters.push(d[b]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}for(e&&a.maskManager.pushMask(this,this._mask),a.currentRenderer.start(),this._renderWebGL(a),b=0,c=this.children.length;b<c;b++)this.children[b].renderWebGL(a);a.currentRenderer.flush(),e&&a.maskManager.popMask(this,this._mask),d&&this._enabledFilters&&this._enabledFilters.length&&a.filterManager.popFilter(),a.currentRenderer.start()},d.prototype._renderWebGL=function(a){},d.prototype._renderCanvas=function(a){},d.prototype.renderCanvas=function(a){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask),this._renderCanvas(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},d.prototype.destroy=function(a){f.prototype.destroy.call(this);var b="boolean"==typeof a?a:a&&a.children,c=this.children;if(this.children=null,b)for(var d=c.length-1;d>=0;d--){var e=c[d];e.parent=null,e.destroy(a)}}},{"../utils":116,"./DisplayObject":46}],46:[function(a,b,c){function d(){e.call(this);var a=f.TRANSFORM_MODE.DEFAULT===f.TRANSFORM_MODE.STATIC?g:h;this.transform=new a,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.filterArea=null,this._filters=null,this._enabledFilters=null,this._bounds=new i,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null}var e=a("eventemitter3"),f=a("../const"),g=a("./TransformStatic"),h=a("./Transform"),i=a("./Bounds"),j=a("../math"),k=new d;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{x:{get:function(){return this.position.x},set:function(a){this.transform.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.transform.position.y=a}},worldTransform:{get:function(){return this.transform.worldTransform}},localTransform:{get:function(){return this.transform.localTransform}},position:{get:function(){return this.transform.position},set:function(a){this.transform.position.copy(a)}},scale:{get:function(){return this.transform.scale},set:function(a){this.transform.scale.copy(a)}},pivot:{get:function(){return this.transform.pivot},set:function(a){this.transform.pivot.copy(a)}},skew:{get:function(){return this.transform.skew},set:function(a){this.transform.skew.copy(a)}},rotation:{get:function(){return this.transform.rotation},set:function(a){this.transform.rotation=a}},worldVisible:{get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},mask:{get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0),this._mask=a,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}}),d.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform,d.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(k.transform)},d.prototype.getBounds=function(a,b){return a||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=k,this.parent.transform._worldID++,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),b||(this._boundsRect||(this._boundsRect=new j.Rectangle),b=this._boundsRect),this._bounds.getRectangle(b)},d.prototype.getLocalBounds=function(a){var b=this.transform,c=this.parent;this.parent=null,this.transform=k.transform,a||(this._localBoundsRect||(this._localBoundsRect=new j.Rectangle),a=this._localBoundsRect);var d=this.getBounds(!1,a);return this.parent=c,this.transform=b,d},d.prototype.toGlobal=function(a,b,c){return c||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=k,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(a,b)},d.prototype.toLocal=function(a,b,c,d){return b&&(a=b.toGlobal(a,c,d)),d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=k,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(a,c)},d.prototype.renderWebGL=function(a){},d.prototype.renderCanvas=function(a){},d.prototype.setParent=function(a){if(!a||!a.addChild)throw new Error("setParent: Argument must be a Container");return a.addChild(this),a},d.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){return this.position.x=a||0,this.position.y=b||0,this.scale.x=c?c:1,this.scale.y=d?d:1,this.rotation=e||0,this.skew.x=f||0,this.skew.y=g||0,this.pivot.x=h||0,this.pivot.y=i||0,this},d.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1}},{"../const":43,"../math":67,"./Bounds":44,"./Transform":47,"./TransformStatic":49,eventemitter3:3}],47:[function(a,b,c){function d(){f.call(this),this.position=new e.Point(0,0),this.scale=new e.Point(1,1),this.skew=new e.ObservablePoint(this.updateSkew,this,0,0),this.pivot=new e.Point(0,0),this._rotation=0,this._sr=Math.sin(0),this._cr=Math.cos(0),this._cy=Math.cos(0),this._sy=Math.sin(0),this._nsx=Math.sin(0),this._cx=Math.cos(0)}var e=a("../math"),f=a("./TransformBase");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.updateSkew=function(){this._cy=Math.cos(this.skew.y),this._sy=Math.sin(this.skew.y),this._nsx=Math.sin(this.skew.x),this._cx=Math.cos(this.skew.x)},d.prototype.updateLocalTransform=function(){var a,b,c,d,e=this.localTransform;a=this._cr*this.scale.x,b=this._sr*this.scale.x,c=-this._sr*this.scale.y,d=this._cr*this.scale.y,e.a=this._cy*a+this._sy*c,e.b=this._cy*b+this._sy*d,e.c=this._nsx*a+this._cx*c,e.d=this._nsx*b+this._cx*d},d.prototype.updateTransform=function(a){var b,c,d,e,f=a.worldTransform,g=this.worldTransform,h=this.localTransform;b=this._cr*this.scale.x,c=this._sr*this.scale.x,d=-this._sr*this.scale.y,e=this._cr*this.scale.y,h.a=this._cy*b+this._sy*d,h.b=this._cy*c+this._sy*e,h.c=this._nsx*b+this._cx*d,h.d=this._nsx*c+this._cx*e,h.tx=this.position.x-(this.pivot.x*h.a+this.pivot.y*h.c),h.ty=this.position.y-(this.pivot.x*h.b+this.pivot.y*h.d),g.a=h.a*f.a+h.b*f.c,g.b=h.a*f.b+h.b*f.d,g.c=h.c*f.a+h.d*f.c,g.d=h.c*f.b+h.d*f.d,g.tx=h.tx*f.a+h.ty*f.c+f.tx,g.ty=h.tx*f.b+h.ty*f.d+f.ty,this._worldID++},d.prototype.setFromMatrix=function(a){a.decompose(this)},Object.defineProperties(d.prototype,{rotation:{get:function(){return this._rotation},set:function(a){this._rotation=a,this._sr=Math.sin(a),this._cr=Math.cos(a)}}}),b.exports=d},{"../math":67,"./TransformBase":48}],48:[function(a,b,c){function d(){this.worldTransform=new e.Matrix,this.localTransform=new e.Matrix,this._worldID=0}var e=a("../math");d.prototype.constructor=d,d.prototype.updateLocalTransform=function(){},d.prototype.updateTransform=function(a){var b=a.worldTransform,c=this.worldTransform,d=this.localTransform;c.a=d.a*b.a+d.b*b.c,c.b=d.a*b.b+d.b*b.d,c.c=d.c*b.a+d.d*b.c,c.d=d.c*b.b+d.d*b.d,c.tx=d.tx*b.a+d.ty*b.c+b.tx,c.ty=d.tx*b.b+d.ty*b.d+b.ty,this._worldID++},d.prototype.updateWorldTransform=d.prototype.updateTransform,d.IDENTITY=new d,b.exports=d},{"../math":67}],49:[function(a,b,c){function d(){f.call(this),this.position=new e.ObservablePoint(this.onChange,this,0,0),this.scale=new e.ObservablePoint(this.onChange,this,1,1),this.pivot=new e.ObservablePoint(this.onChange,this,0,0),this.skew=new e.ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._sr=Math.sin(0),this._cr=Math.cos(0),this._cy=Math.cos(0),this._sy=Math.sin(0),this._nsx=Math.sin(0),this._cx=Math.cos(0),this._localID=0,this._currentLocalID=0}var e=a("../math"),f=a("./TransformBase");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.onChange=function(){this._localID++},d.prototype.updateSkew=function(){this._cy=Math.cos(this.skew._y),this._sy=Math.sin(this.skew._y),this._nsx=Math.sin(this.skew._x),this._cx=Math.cos(this.skew._x),this._localID++},d.prototype.updateLocalTransform=function(){var a=this.localTransform;if(this._localID!==this._currentLocalID){var b,c,d,e;b=this._cr*this.scale._x,c=this._sr*this.scale._x,d=-this._sr*this.scale._y,e=this._cr*this.scale._y,a.a=this._cy*b+this._sy*d,a.b=this._cy*c+this._sy*e,a.c=this._nsx*b+this._cx*d,a.d=this._nsx*c+this._cx*e,a.tx=this.position._x-(this.pivot._x*a.a+this.pivot._y*a.c),a.ty=this.position._y-(this.pivot._x*a.b+this.pivot._y*a.d),this._currentLocalID=this._localID,this._parentID=-1}},d.prototype.updateTransform=function(a){var b=a.worldTransform,c=this.worldTransform,d=this.localTransform;if(this._localID!==this._currentLocalID){var e,f,g,h;e=this._cr*this.scale._x,f=this._sr*this.scale._x,g=-this._sr*this.scale._y,h=this._cr*this.scale._y,d.a=this._cy*e+this._sy*g,d.b=this._cy*f+this._sy*h,d.c=this._nsx*e+this._cx*g,d.d=this._nsx*f+this._cx*h,d.tx=this.position._x-(this.pivot._x*d.a+this.pivot._y*d.c),d.ty=this.position._y-(this.pivot._x*d.b+this.pivot._y*d.d),this._currentLocalID=this._localID,this._parentID=-1}this._parentID!==a._worldID&&(c.a=d.a*b.a+d.b*b.c,c.b=d.a*b.b+d.b*b.d,c.c=d.c*b.a+d.d*b.c,c.d=d.c*b.b+d.d*b.d,c.tx=d.tx*b.a+d.ty*b.c+b.tx,c.ty=d.tx*b.b+d.ty*b.d+b.ty,this._parentID=a._worldID,this._worldID++)},d.prototype.setFromMatrix=function(a){a.decompose(this),this._localID++},Object.defineProperties(d.prototype,{rotation:{get:function(){return this._rotation},set:function(a){this._rotation=a,this._sr=Math.sin(a),this._cr=Math.cos(a),this._localID++}}}),b.exports=d},{"../math":67,"./TransformBase":48}],50:[function(a,b,c){function d(){f.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new n,this.dirty=0,this.fastRectDirty=-1,this.clearDirty=0,this.boundsDirty=-1,this.cachedSpriteDirty=!1,this._spriteRect=null,this._fastRect=!1}var e,f=a("../display/Container"),g=a("../textures/RenderTexture"),h=a("../textures/Texture"),i=a("./GraphicsData"),j=a("../sprites/Sprite"),k=a("../math"),l=a("../const"),m=a("../utils"),n=a("../display/Bounds"),o=a("./utils/bezierCurveTo"),p=a("../renderers/canvas/CanvasRenderer"),q=new k.Matrix,r=new k.Point,s=new Float32Array(4),t=new Float32Array(4);d._SPRITE_TEXTURE=null,d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){var a=new d;a.renderable=this.renderable,a.fillAlpha=this.fillAlpha,a.lineWidth=this.lineWidth,a.lineColor=this.lineColor,a.tint=this.tint,a.blendMode=this.blendMode,a.isMask=this.isMask,a.boundsPadding=this.boundsPadding,a.dirty=0,a.cachedSpriteDirty=this.cachedSpriteDirty;for(var b=0;b<this.graphicsData.length;++b)a.graphicsData.push(this.graphicsData[b].clone());return a.currentPath=a.graphicsData[a.graphicsData.length-1],a.updateLocalBounds(),a},d.prototype.lineStyle=function(a,b,c){if(this.lineWidth=a||0,this.lineColor=b||0,this.lineAlpha=void 0===c?1:c,this.currentPath)if(this.currentPath.shape.points.length){var d=new k.Polygon(this.currentPath.shape.points.slice(-2));d.closed=!1,this.drawShape(d)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},d.prototype.moveTo=function(a,b){var c=new k.Polygon([a,b]);return c.closed=!1,this.drawShape(c),this},d.prototype.lineTo=function(a,b){return this.currentPath.shape.points.push(a,b),this.dirty++,this},d.prototype.quadraticCurveTo=function(a,b,c,d){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var e,f,g=20,h=this.currentPath.shape.points;0===h.length&&this.moveTo(0,0);for(var i=h[h.length-2],j=h[h.length-1],k=0,l=1;l<=g;++l)k=l/g,e=i+(a-i)*k,f=j+(b-j)*k,h.push(e+(a+(c-a)*k-e)*k,f+(b+(d-b)*k-f)*k);return this.dirty++,this},d.prototype.bezierCurveTo=function(a,b,c,d,e,f){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var g=this.currentPath.shape.points,h=g[g.length-2],i=g[g.length-1];return g.length-=2,o(h,i,a,b,c,d,e,f,g),this.dirty++,this},d.prototype.arcTo=function(a,b,c,d,e){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b);var f=this.currentPath.shape.points,g=f[f.length-2],h=f[f.length-1],i=h-b,j=g-a,k=d-b,l=c-a,m=Math.abs(i*l-j*k);if(m<1e-8||0===e)f[f.length-2]===a&&f[f.length-1]===b||f.push(a,b);else{var n=i*i+j*j,o=k*k+l*l,p=i*k+j*l,q=e*Math.sqrt(n)/m,r=e*Math.sqrt(o)/m,s=q*p/n,t=r*p/o,u=q*l+r*j,v=q*k+r*i,w=j*(r+s),x=i*(r+s),y=l*(q+t),z=k*(q+t),A=Math.atan2(x-v,w-u),B=Math.atan2(z-v,y-u);this.arc(u+a,v+b,e,A,B,j*k>l*i)}return this.dirty++,this},d.prototype.arc=function(a,b,c,d,e,f){if(f=f||!1,d===e)return this;!f&&e<=d?e+=2*Math.PI:f&&d<=e&&(d+=2*Math.PI);var g=f?(d-e)*-1:e-d,h=40*Math.ceil(Math.abs(g)/(2*Math.PI));if(0===g)return this;var i=a+Math.cos(d)*c,j=b+Math.sin(d)*c;this.currentPath?this.currentPath.shape.points.push(i,j):this.moveTo(i,j);for(var k=this.currentPath.shape.points,l=g/(2*h),m=2*l,n=Math.cos(l),o=Math.sin(l),p=h-1,q=p%1/p,r=0;r<=p;r++){var s=r+q*r,t=l+d+m*s,u=Math.cos(t),v=-Math.sin(t);k.push((n*u+o*v)*c+a,(n*-v+o*u)*c+b)}return this.dirty++,this},d.prototype.beginFill=function(a,b){return this.filling=!0,this.fillColor=a||0,this.fillAlpha=void 0===b?1:b,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},d.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},d.prototype.drawRect=function(a,b,c,d){return this.drawShape(new k.Rectangle(a,b,c,d)),this},d.prototype.drawRoundedRect=function(a,b,c,d,e){return this.drawShape(new k.RoundedRectangle(a,b,c,d,e)),this},d.prototype.drawCircle=function(a,b,c){return this.drawShape(new k.Circle(a,b,c)),this},d.prototype.drawEllipse=function(a,b,c,d){return this.drawShape(new k.Ellipse(a,b,c,d)),this},d.prototype.drawPolygon=function(a){var b=a,c=!0;if(b instanceof k.Polygon&&(c=b.closed,b=b.points),!Array.isArray(b)){b=new Array(arguments.length);for(var d=0;d<b.length;++d)b[d]=arguments[d]}var e=new k.Polygon(b);return e.closed=c,this.drawShape(e),this},d.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty++,this.clearDirty++,this.graphicsData=[],this},d.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===l.SHAPES.RECT&&!this.graphicsData[0].lineWidth},d.prototype._renderWebGL=function(a){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(a):(a.setObjectRenderer(a.plugins.graphics),a.plugins.graphics.render(this))},d.prototype._renderSpriteRect=function(a){var b=this.graphicsData[0].shape;if(!this._spriteRect){if(!d._SPRITE_TEXTURE){var c=document.createElement("canvas");c.width=10,c.height=10;var e=c.getContext("2d");e.fillStyle="white",e.fillRect(0,0,10,10),d._SPRITE_TEXTURE=h.fromCanvas(c)}this._spriteRect=new j(d._SPRITE_TEXTURE)}if(16777215===this.tint)this._spriteRect.tint=this.graphicsData[0].fillColor;else{var f=s,g=t;m.hex2rgb(this.graphicsData[0].fillColor,f),m.hex2rgb(this.tint,g),f[0]*=g[0],f[1]*=g[1],f[2]*=g[2],this._spriteRect.tint=m.rgb2hex(f)}this._spriteRect.alpha=this.graphicsData[0].fillAlpha,this._spriteRect.worldAlpha=this.worldAlpha*this._spriteRect.alpha,d._SPRITE_TEXTURE._frame.width=b.width,d._SPRITE_TEXTURE._frame.height=b.height,this._spriteRect.transform.worldTransform=this.transform.worldTransform,this._spriteRect.anchor.set(-b.x/b.width,-b.y/b.height),this._spriteRect.onAnchorUpdate(),this._spriteRect._renderWebGL(a)},d.prototype._renderCanvas=function(a){this.isMask!==!0&&a.plugins.graphics.render(this)},d.prototype._calculateBounds=function(){if(this.renderable){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.dirty++,this.cachedSpriteDirty=!0);var a=this._localBounds;this._bounds.addFrame(this.transform,a.minX,a.minY,a.maxX,a.maxY)}},d.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,r);for(var b=this.graphicsData,c=0;c<b.length;c++){var d=b[c];if(d.fill&&d.shape&&d.shape.contains(r.x,r.y))return!0}return!1},d.prototype.updateLocalBounds=function(){var a=1/0,b=-(1/0),c=1/0,d=-(1/0);if(this.graphicsData.length)for(var e,f,g,h,i,j,k=0;k<this.graphicsData.length;k++){var m=this.graphicsData[k],n=m.type,o=m.lineWidth;if(e=m.shape,n===l.SHAPES.RECT||n===l.SHAPES.RREC)g=e.x-o/2,h=e.y-o/2,i=e.width+o,j=e.height+o,a=g<a?g:a,b=g+i>b?g+i:b,c=h<c?h:c,d=h+j>d?h+j:d;else if(n===l.SHAPES.CIRC)g=e.x,h=e.y,i=e.radius+o/2,j=e.radius+o/2,a=g-i<a?g-i:a,b=g+i>b?g+i:b,c=h-j<c?h-j:c,d=h+j>d?h+j:d;else if(n===l.SHAPES.ELIP)g=e.x,h=e.y,i=e.width+o/2,j=e.height+o/2,a=g-i<a?g-i:a,b=g+i>b?g+i:b,c=h-j<c?h-j:c,d=h+j>d?h+j:d;else{f=e.points;for(var p=0;p<f.length;p+=2)g=f[p],h=f[p+1],a=g-o<a?g-o:a,b=g+o>b?g+o:b,c=h-o<c?h-o:c,d=h+o>d?h+o:d}}else a=0,b=0,c=0,d=0;var q=this.boundsPadding;this._localBounds.minX=a-q,this._localBounds.maxX=b+2*q,this._localBounds.minY=c-q,this._localBounds.maxY=d+2*q},d.prototype.drawShape=function(a){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var b=new i(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);return this.graphicsData.push(b),b.type===l.SHAPES.POLY&&(b.shape.closed=b.shape.closed||this.filling,this.currentPath=b),this.dirty++,b},d.prototype.generateCanvasTexture=function(a,b){b=b||1;var c=this.getLocalBounds(),d=new g.create(c.width*b,c.height*b);e||(e=new p),q.tx=-c.x,q.ty=-c.y,e.render(this,d,!1,q);var f=h.fromCanvas(d.baseTexture._canvasRenderTarget.canvas,a);return f.baseTexture.resolution=b,f},d.prototype.closePath=function(){var a=this.currentPath;return a&&a.shape&&a.shape.close(),
this},d.prototype.addHole=function(){var a=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(a.shape),this.currentPath=null,this},d.prototype.destroy=function(){f.prototype.destroy.apply(this,arguments);for(var a=0;a<this.graphicsData.length;++a)this.graphicsData[a].destroy();for(var b in this._webgl)for(var c=0;c<this._webgl[b].data.length;++c)this._webgl[b].data[c].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":43,"../display/Bounds":44,"../display/Container":45,"../math":67,"../renderers/canvas/CanvasRenderer":74,"../sprites/Sprite":98,"../textures/RenderTexture":108,"../textures/Texture":109,"../utils":116,"./GraphicsData":51,"./utils/bezierCurveTo":53}],51:[function(a,b,c){function d(a,b,c,d,e,f,g){this.lineWidth=a,this.lineColor=b,this.lineAlpha=c,this._lineTint=b,this.fillColor=d,this.fillAlpha=e,this._fillTint=d,this.fill=f,this.holes=[],this.shape=g,this.type=g.type}d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},d.prototype.addHole=function(a){this.holes.push(a)},d.prototype.destroy=function(){this.shape=null,this.holes=null}},{}],52:[function(a,b,c){function d(a){this.renderer=a}var e=a("../../renderers/canvas/CanvasRenderer"),f=a("../../const");d.prototype.constructor=d,b.exports=d,e.registerPlugin("graphics",d),d.prototype.render=function(a){var b=this.renderer,c=b.context,d=a.worldAlpha,e=a.transform.worldTransform,g=b.resolution;this._prevTint!==this.tint&&(this.dirty=!0),c.setTransform(e.a*g,e.b*g,e.c*g,e.d*g,e.tx*g,e.ty*g),a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1),b.setBlendMode(a.blendMode);for(var h=0;h<a.graphicsData.length;h++){var i=a.graphicsData[h],j=i.shape,k=i._fillTint,l=i._lineTint;if(c.lineWidth=i.lineWidth,i.type===f.SHAPES.POLY){c.beginPath(),this.renderPolygon(j.points,j.closed,c);for(var m=0;m<i.holes.length;m++){var n=i.holes[m];this.renderPolygon(n.points,!0,c)}i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}else if(i.type===f.SHAPES.RECT)(i.fillColor||0===i.fillColor)&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fillRect(j.x,j.y,j.width,j.height)),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.strokeRect(j.x,j.y,j.width,j.height));else if(i.type===f.SHAPES.CIRC)c.beginPath(),c.arc(j.x,j.y,j.radius,0,2*Math.PI),c.closePath(),i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke());else if(i.type===f.SHAPES.ELIP){var o=2*j.width,p=2*j.height,q=j.x-o/2,r=j.y-p/2;c.beginPath();var s=.5522848,t=o/2*s,u=p/2*s,v=q+o,w=r+p,x=q+o/2,y=r+p/2;c.moveTo(q,y),c.bezierCurveTo(q,y-u,x-t,r,x,r),c.bezierCurveTo(x+t,r,v,y-u,v,y),c.bezierCurveTo(v,y+u,x+t,w,x,w),c.bezierCurveTo(x-t,w,q,y+u,q,y),c.closePath(),i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}else if(i.type===f.SHAPES.RREC){var z=j.x,A=j.y,B=j.width,C=j.height,D=j.radius,E=Math.min(B,C)/2|0;D=D>E?E:D,c.beginPath(),c.moveTo(z,A+D),c.lineTo(z,A+C-D),c.quadraticCurveTo(z,A+C,z+D,A+C),c.lineTo(z+B-D,A+C),c.quadraticCurveTo(z+B,A+C,z+B,A+C-D),c.lineTo(z+B,A+D),c.quadraticCurveTo(z+B,A,z+B-D,A),c.lineTo(z+D,A),c.quadraticCurveTo(z,A,z,A+D),c.closePath(),(i.fillColor||0===i.fillColor)&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}}},d.prototype.updateGraphicsTint=function(a){a._prevTint=a.tint;for(var b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,d=(255&a.tint)/255,e=0;e<a.graphicsData.length;e++){var f=a.graphicsData[e],g=0|f.fillColor,h=0|f.lineColor;f._fillTint=((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*c*255<<8)+(255&g)/255*d*255,f._lineTint=((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*c*255<<8)+(255&h)/255*d*255}},d.prototype.renderPolygon=function(a,b,c){c.moveTo(a[0],a[1]);for(var d=1;d<a.length/2;d++)c.lineTo(a[2*d],a[2*d+1]);b&&c.closePath()},d.prototype.destroy=function(){this.renderer=null}},{"../../const":43,"../../renderers/canvas/CanvasRenderer":74}],53:[function(a,b,c){var d=function(a,b,c,d,e,f,g,h,i){i=i||[];var j,k,l,m,n,o=20;i.push(a,b);for(var p=0,q=1;q<=o;++q)p=q/o,j=1-p,k=j*j,l=k*j,m=p*p,n=m*p,i.push(l*a+3*k*p*c+3*j*m*e+n*g,l*b+3*k*p*d+3*j*m*f+n*h);return i};b.exports=d},{}],54:[function(a,b,c){function d(a){g.call(this,a),this.graphicsDataPool=[],this.primitiveShader=null,this.gl=a.gl,this.CONTEXT_UID=0}var e=a("../../utils"),f=a("../../const"),g=a("../../renderers/webgl/utils/ObjectRenderer"),h=a("../../renderers/webgl/WebGLRenderer"),i=a("./WebGLGraphicsData"),j=a("./shaders/PrimitiveShader"),k=a("./utils/buildPoly"),l=a("./utils/buildRectangle"),m=a("./utils/buildRoundedRectangle"),n=a("./utils/buildCircle");d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,h.registerPlugin("graphics",d),d.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new j(this.gl)},d.prototype.destroy=function(){g.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null},d.prototype.render=function(a){var b,c=this.renderer,d=c.gl,f=a._webGL[this.CONTEXT_UID];f&&a.dirty===f.dirty||(this.updateGraphics(a),f=a._webGL[this.CONTEXT_UID]);var g=this.primitiveShader;c.bindShader(g),c.state.setBlendMode(a.blendMode);for(var h=0,i=f.data.length;h<i;h++){b=f.data[h];var j=b.shader;c.bindShader(j),j.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),j.uniforms.tint=e.hex2rgb(a.tint),j.uniforms.alpha=a.worldAlpha,b.vao.bind().draw(d.TRIANGLE_STRIP,b.indices.length).unbind()}},d.prototype.updateGraphics=function(a){var b=this.renderer.gl,c=a._webGL[this.CONTEXT_UID];c||(c=a._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:b,clearDirty:-1,dirty:-1}),c.dirty=a.dirty;var d;if(a.clearDirty!==c.clearDirty){for(c.clearDirty=a.clearDirty,d=0;d<c.data.length;d++){var e=c.data[d];this.graphicsDataPool.push(e)}c.data=[],c.lastIndex=0}var g;for(d=c.lastIndex;d<a.graphicsData.length;d++){var h=a.graphicsData[d];g=this.getWebGLData(c,0),h.type===f.SHAPES.POLY&&k(h,g),h.type===f.SHAPES.RECT?l(h,g):h.type===f.SHAPES.CIRC||h.type===f.SHAPES.ELIP?n(h,g):h.type===f.SHAPES.RREC&&m(h,g),c.lastIndex++}for(d=0;d<c.data.length;d++)g=c.data[d],g.dirty&&g.upload()},d.prototype.getWebGLData=function(a,b){var c=a.data[a.data.length-1];return(!c||c.points.length>32e4)&&(c=this.graphicsDataPool.pop()||new i(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),c.reset(b),a.data.push(c)),c.dirty=!0,c}},{"../../const":43,"../../renderers/webgl/WebGLRenderer":81,"../../renderers/webgl/utils/ObjectRenderer":91,"../../utils":116,"./WebGLGraphicsData":55,"./shaders/PrimitiveShader":56,"./utils/buildCircle":57,"./utils/buildPoly":59,"./utils/buildRectangle":60,"./utils/buildRoundedRectangle":61}],55:[function(a,b,c){function d(a,b,c){this.gl=a,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.GLBuffer.createVertexBuffer(a),this.indexBuffer=e.GLBuffer.createIndexBuffer(a),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=b,this.vao=new e.VertexArrayObject(a,c).addIndex(this.indexBuffer).addAttribute(this.buffer,b.attributes.aVertexPosition,a.FLOAT,!1,24,0).addAttribute(this.buffer,b.attributes.aColor,a.FLOAT,!1,24,8)}var e=a("pixi-gl-core");d.prototype.constructor=d,b.exports=d,d.prototype.reset=function(){this.points.length=0,this.indices.length=0},d.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},d.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{"pixi-gl-core":12}],56:[function(a,b,c){function d(a){e.call(this,a,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"))}var e=a("../../../Shader");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{"../../../Shader":42}],57:[function(a,b,c){var d=a("./buildLine"),e=a("../../../const"),f=a("../../../utils"),g=function(a,b){var c,g,h=a.shape,i=h.x,j=h.y;a.type===e.SHAPES.CIRC?(c=h.radius,g=h.radius):(c=h.width,g=h.height);var k=Math.floor(30*Math.sqrt(h.radius))||Math.floor(15*Math.sqrt(h.width+h.height)),l=2*Math.PI/k,m=0;if(a.fill){var n=f.hex2rgb(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=b.points,t=b.indices,u=s.length/6;for(t.push(u),m=0;m<k+1;m++)s.push(i,j,p,q,r,o),s.push(i+Math.sin(l*m)*c,j+Math.cos(l*m)*g,p,q,r,o),t.push(u++,u++);t.push(u-1)}if(a.lineWidth){var v=a.points;for(a.points=[],m=0;m<k+1;m++)a.points.push(i+Math.sin(l*m)*c,j+Math.cos(l*m)*g);d(a,b),a.points=v}};b.exports=g},{"../../../const":43,"../../../utils":116,"./buildLine":58}],58:[function(a,b,c){var d=a("../../../math"),e=a("../../../utils"),f=function(a,b){var c=0,f=a.points;if(0!==f.length){var g=new d.Point(f[0],f[1]),h=new d.Point(f[f.length-2],f[f.length-1]);if(g.x===h.x&&g.y===h.y){f=f.slice(),f.pop(),f.pop(),h=new d.Point(f[f.length-2],f[f.length-1]);var i=h.x+.5*(g.x-h.x),j=h.y+.5*(g.y-h.y);f.unshift(i,j),f.push(i,j)}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=b.points,I=b.indices,J=f.length/2,K=f.length,L=H.length/6,M=a.lineWidth/2,N=e.hex2rgb(a.lineColor),O=a.lineAlpha,P=N[0]*O,Q=N[1]*O,R=N[2]*O;for(m=f[0],n=f[1],o=f[2],p=f[3],s=-(n-p),t=m-o,G=Math.sqrt(s*s+t*t),s/=G,t/=G,s*=M,t*=M,H.push(m-s,n-t,P,Q,R,O),H.push(m+s,n+t,P,Q,R,O),c=1;c<J-1;c++)m=f[2*(c-1)],n=f[2*(c-1)+1],o=f[2*c],p=f[2*c+1],q=f[2*(c+1)],r=f[2*(c+1)+1],s=-(n-p),t=m-o,G=Math.sqrt(s*s+t*t),s/=G,t/=G,s*=M,t*=M,u=-(p-r),v=o-q,G=Math.sqrt(u*u+v*v),u/=G,v/=G,u*=M,v*=M,y=-t+n-(-t+p),z=-s+o-(-s+m),A=(-s+m)*(-t+p)-(-s+o)*(-t+n),B=-v+r-(-v+p),C=-u+o-(-u+q),D=(-u+q)*(-v+p)-(-u+o)*(-v+r),E=y*C-B*z,Math.abs(E)<.1?(E+=10.1,H.push(o-s,p-t,P,Q,R,O),H.push(o+s,p+t,P,Q,R,O)):(k=(z*D-C*A)/E,l=(B*A-y*D)/E,F=(k-o)*(k-o)+(l-p)*(l-p),F>19600?(w=s-u,x=t-v,G=Math.sqrt(w*w+x*x),w/=G,x/=G,w*=M,x*=M,H.push(o-w,p-x),H.push(P,Q,R,O),H.push(o+w,p+x),H.push(P,Q,R,O),H.push(o-w,p-x),H.push(P,Q,R,O),K++):(H.push(k,l),H.push(P,Q,R,O),H.push(o-(k-o),p-(l-p)),H.push(P,Q,R,O)));for(m=f[2*(J-2)],n=f[2*(J-2)+1],o=f[2*(J-1)],p=f[2*(J-1)+1],s=-(n-p),t=m-o,G=Math.sqrt(s*s+t*t),s/=G,t/=G,s*=M,t*=M,H.push(o-s,p-t),H.push(P,Q,R,O),H.push(o+s,p+t),H.push(P,Q,R,O),I.push(L),c=0;c<K;c++)I.push(L++);I.push(L-1)}};b.exports=f},{"../../../math":67,"../../../utils":116}],59:[function(a,b,c){var d=a("./buildLine"),e=a("../../../utils"),f=a("earcut"),g=function(a,b){a.points=a.shape.points.slice();var c=a.points;if(a.fill&&c.length>=6){for(var g=[],h=a.holes,i=0;i<h.length;i++){var j=h[i];g.push(c.length/2),c=c.concat(j.points)}var k=b.points,l=b.indices,m=c.length/2,n=e.hex2rgb(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=f(c,g,2);if(!s)return;var t=k.length/6;for(i=0;i<s.length;i+=3)l.push(s[i]+t),l.push(s[i]+t),l.push(s[i+1]+t),l.push(s[i+2]+t),l.push(s[i+2]+t);for(i=0;i<m;i++)k.push(c[2*i],c[2*i+1],p,q,r,o)}a.lineWidth>0&&d(a,b)};b.exports=g},{"../../../utils":116,"./buildLine":58,earcut:2}],60:[function(a,b,c){var d=a("./buildLine"),e=a("../../../utils"),f=function(a,b){var c=a.shape,f=c.x,g=c.y,h=c.width,i=c.height;if(a.fill){var j=e.hex2rgb(a.fillColor),k=a.fillAlpha,l=j[0]*k,m=j[1]*k,n=j[2]*k,o=b.points,p=b.indices,q=o.length/6;o.push(f,g),o.push(l,m,n,k),o.push(f+h,g),o.push(l,m,n,k),o.push(f,g+i),o.push(l,m,n,k),o.push(f+h,g+i),o.push(l,m,n,k),p.push(q,q,q+1,q+2,q+3,q+3)}if(a.lineWidth){var r=a.points;a.points=[f,g,f+h,g,f+h,g+i,f,g+i,f,g],d(a,b),a.points=r}};b.exports=f},{"../../../utils":116,"./buildLine":58}],61:[function(a,b,c){var d=a("earcut"),e=a("./buildLine"),f=a("../../../utils"),g=function(a,b){var c=a.shape,g=c.x,i=c.y,j=c.width,k=c.height,l=c.radius,m=[];if(m.push(g,i+l),h(g,i+k-l,g,i+k,g+l,i+k,m),h(g+j-l,i+k,g+j,i+k,g+j,i+k-l,m),h(g+j,i+l,g+j,i,g+j-l,i,m),h(g+l,i,g,i,g,i+l+1e-10,m),a.fill){var n=f.hex2rgb(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=b.points,t=b.indices,u=s.length/6,v=d(m,null,2),w=0;for(w=0;w<v.length;w+=3)t.push(v[w]+u),t.push(v[w]+u),t.push(v[w+1]+u),t.push(v[w+2]+u),t.push(v[w+2]+u);for(w=0;w<m.length;w++)s.push(m[w],m[++w],p,q,r,o)}if(a.lineWidth){var x=a.points;a.points=m,e(a,b),a.points=x}},h=function(a,b,c,d,e,f,g){function h(a,b,c){var d=b-a;return a+d*c}for(var i,j,k,l,m,n,o=20,p=g||[],q=0,r=0;r<=o;r++)q=r/o,i=h(a,c,q),j=h(b,d,q),k=h(c,e,q),l=h(d,f,q),m=h(i,k,q),n=h(j,l,q),p.push(m,n);return p};b.exports=g},{"../../../utils":116,"./buildLine":58,earcut:2}],62:[function(a,b,c){var d=b.exports=Object.assign(a("./const"),a("./math"),{utils:a("./utils"),ticker:a("./ticker"),DisplayObject:a("./display/DisplayObject"),Container:a("./display/Container"),Transform:a("./display/Transform"),TransformStatic:a("./display/TransformStatic"),TransformBase:a("./display/TransformBase"),Sprite:a("./sprites/Sprite"),CanvasSpriteRenderer:a("./sprites/canvas/CanvasSpriteRenderer"),CanvasTinter:a("./sprites/canvas/CanvasTinter"),SpriteRenderer:a("./sprites/webgl/SpriteRenderer"),Text:a("./text/Text"),TextStyle:a("./text/TextStyle"),Graphics:a("./graphics/Graphics"),GraphicsData:a("./graphics/GraphicsData"),GraphicsRenderer:a("./graphics/webgl/GraphicsRenderer"),CanvasGraphicsRenderer:a("./graphics/canvas/CanvasGraphicsRenderer"),Texture:a("./textures/Texture"),BaseTexture:a("./textures/BaseTexture"),RenderTexture:a("./textures/RenderTexture"),BaseRenderTexture:a("./textures/BaseRenderTexture"),VideoBaseTexture:a("./textures/VideoBaseTexture"),TextureUvs:a("./textures/TextureUvs"),CanvasRenderer:a("./renderers/canvas/CanvasRenderer"),CanvasRenderTarget:a("./renderers/canvas/utils/CanvasRenderTarget"),Shader:a("./Shader"),WebGLRenderer:a("./renderers/webgl/WebGLRenderer"),WebGLManager:a("./renderers/webgl/managers/WebGLManager"),ObjectRenderer:a("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:a("./renderers/webgl/utils/RenderTarget"),Quad:a("./renderers/webgl/utils/Quad"),SpriteMaskFilter:a("./renderers/webgl/filters/spriteMask/SpriteMaskFilter"),Filter:a("./renderers/webgl/filters/Filter"),glCore:a("pixi-gl-core"),autoDetectRenderer:function(a,b,c,e){return a=a||800,b=b||600,!e&&d.utils.isWebGLSupported()?new d.WebGLRenderer(a,b,c):new d.CanvasRenderer(a,b,c)}})},{"./Shader":42,"./const":43,"./display/Container":45,"./display/DisplayObject":46,"./display/Transform":47,"./display/TransformBase":48,"./display/TransformStatic":49,"./graphics/Graphics":50,"./graphics/GraphicsData":51,"./graphics/canvas/CanvasGraphicsRenderer":52,"./graphics/webgl/GraphicsRenderer":54,"./math":67,"./renderers/canvas/CanvasRenderer":74,"./renderers/canvas/utils/CanvasRenderTarget":76,"./renderers/webgl/WebGLRenderer":81,"./renderers/webgl/filters/Filter":83,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":86,"./renderers/webgl/managers/WebGLManager":90,"./renderers/webgl/utils/ObjectRenderer":91,"./renderers/webgl/utils/Quad":92,"./renderers/webgl/utils/RenderTarget":93,"./sprites/Sprite":98,"./sprites/canvas/CanvasSpriteRenderer":99,"./sprites/canvas/CanvasTinter":100,"./sprites/webgl/SpriteRenderer":102,"./text/Text":104,"./text/TextStyle":105,"./textures/BaseRenderTexture":106,"./textures/BaseTexture":107,"./textures/RenderTexture":108,"./textures/Texture":109,"./textures/TextureUvs":110,"./textures/VideoBaseTexture":111,"./ticker":113,"./utils":116,"pixi-gl-core":12}],63:[function(a,b,c){function d(a){return a<0?-1:a>0?1:0}function e(){for(var a=0;a<16;a++){var b=[];l.push(b);for(var c=0;c<16;c++)for(var e=d(f[a]*f[c]+h[a]*g[c]),m=d(g[a]*f[c]+i[a]*g[c]),n=d(f[a]*h[c]+h[a]*i[c]),o=d(g[a]*h[c]+i[a]*i[c]),p=0;p<16;p++)if(f[p]===e&&g[p]===m&&h[p]===n&&i[p]===o){b.push(p);break}}for(a=0;a<16;a++){var q=new k;q.set(f[a],g[a],h[a],i[a],0,0),j.push(q)}}var f=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],g=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],h=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],i=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],j=[],k=a("./Matrix"),l=[];e();var m={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(a){return f[a]},uY:function(a){return g[a]},vX:function(a){return h[a]},vY:function(a){return i[a]},inv:function(a){return 8&a?15&a:7&-a},add:function(a,b){return l[a][b]},sub:function(a,b){return l[a][m.inv(b)]},rotate180:function(a){return 4^a},isSwapWidthHeight:function(a){return 2===(3&a)},byDirection:function(a,b){return 2*Math.abs(a)<=Math.abs(b)?b>=0?m.S:m.N:2*Math.abs(b)<=Math.abs(a)?a>0?m.E:m.W:b>0?a>0?m.SE:m.SW:a>0?m.NE:m.NW},matrixAppendRotationInv:function(a,b,c,d){var e=j[m.inv(b)];c=c||0,d=d||0,e.tx=c,e.ty=d,a.append(e)}};b.exports=m},{"./Matrix":64}],64:[function(a,b,c){function d(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.array=null}var e=a("./Point");d.prototype.constructor=d,b.exports=d,d.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},d.prototype.set=function(a,b,c,d,e,f){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f,this},d.prototype.toArray=function(a,b){this.array||(this.array=new Float32Array(9));var c=b||this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty,c[8]=1):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0,c[8]=1),c},d.prototype.apply=function(a,b){b=b||new e;var c=a.x,d=a.y;return b.x=this.a*c+this.c*d+this.tx,b.y=this.b*c+this.d*d+this.ty,b},d.prototype.applyInverse=function(a,b){b=b||new e;var c=1/(this.a*this.d+this.c*-this.b),d=a.x,f=a.y;return b.x=this.d*c*d+-this.c*c*f+(this.ty*this.c-this.tx*this.d)*c,b.y=this.a*c*f+-this.b*c*d+(-this.ty*this.a+this.tx*this.b)*c,b},d.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},d.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},d.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},d.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},d.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s;return n=Math.sin(g),o=Math.cos(g),p=Math.cos(i),q=Math.sin(i),r=-Math.sin(h),s=Math.cos(h),j=o*e,k=n*e,l=-n*f,m=o*f,this.a=p*j+q*l,this.b=p*k+q*m,this.c=r*j+s*l,this.d=r*k+s*m,this.tx=a+(c*j+d*l),this.ty=b+(c*k+d*m),this},d.prototype.prepend=function(a){var b=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var c=this.a,d=this.c;this.a=c*a.a+this.b*a.c,this.b=c*a.b+this.b*a.d,this.c=d*a.a+this.d*a.c,this.d=d*a.b+this.d*a.d}return this.tx=b*a.a+this.ty*a.c+a.tx,this.ty=b*a.b+this.ty*a.d+a.ty,this},d.prototype.decompose=function(a){var b=this.a,c=this.b,d=this.c,e=this.d,f=Math.atan2(-d,e),g=Math.atan2(c,b),h=Math.abs(1-f/g);return h<1e-5?(a.rotation=g,b<0&&e>=0&&(a.rotation+=a.rotation<=0?Math.PI:-Math.PI),a.skew.x=a.skew.y=0):(a.skew.x=f,a.skew.y=g),a.scale.x=Math.sqrt(b*b+c*c),a.scale.y=Math.sqrt(d*d+e*e),a.position.x=this.tx,a.position.y=this.ty,a},d.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},d.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},d.prototype.clone=function(){var a=new d;return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},d.prototype.copy=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},d.IDENTITY=new d,d.TEMP_MATRIX=new d},{"./Point":66}],65:[function(a,b,c){function d(a,b,c,d){this._x=c||0,this._y=d||0,this.cb=a,this.scope=b}d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{x:{get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this.cb.call(this.scope))}},y:{get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))}}}),d.prototype.set=function(a,b){var c=a||0,d=b||(0!==b?c:0);this._x===c&&this._y===d||(this._x=c,this._y=d,this.cb.call(this.scope))},d.prototype.copy=function(a){this._x===a.x&&this._y===a.y||(this._x=a.x,this._y=a.y,this.cb.call(this.scope))}},{}],66:[function(a,b,c){function d(a,b){this.x=a||0,this.y=b||0}d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y)},d.prototype.copy=function(a){this.set(a.x,a.y)},d.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},d.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)}},{}],67:[function(a,b,c){b.exports={Point:a("./Point"),ObservablePoint:a("./ObservablePoint"),Matrix:a("./Matrix"),GroupD8:a("./GroupD8"),Circle:a("./shapes/Circle"),Ellipse:a("./shapes/Ellipse"),Polygon:a("./shapes/Polygon"),Rectangle:a("./shapes/Rectangle"),RoundedRectangle:a("./shapes/RoundedRectangle")}},{"./GroupD8":63,"./Matrix":64,"./ObservablePoint":65,"./Point":66,"./shapes/Circle":68,"./shapes/Ellipse":69,"./shapes/Polygon":70,"./shapes/Rectangle":71,"./shapes/RoundedRectangle":72}],68:[function(a,b,c){function d(a,b,c){this.x=a||0,this.y=b||0,this.radius=c||0,this.type=f.SHAPES.CIRC}var e=a("./Rectangle"),f=a("../../const");d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.radius)},d.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.x-a,d=this.y-b,e=this.radius*this.radius;return c*=c,d*=d,c+d<=e},d.prototype.getBounds=function(){return new e(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":43,"./Rectangle":71}],69:[function(a,b,c){function d(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.type=f.SHAPES.ELIP}var e=a("./Rectangle"),f=a("../../const");d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,c+d<=1},d.prototype.getBounds=function(){return new e(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":43,"./Rectangle":71}],70:[function(a,b,c){function d(a){var b=a;if(!Array.isArray(b)){b=new Array(arguments.length);for(var c=0;c<b.length;++c)b[c]=arguments[c]}if(b[0]instanceof e){for(var d=[],g=0,h=b.length;g<h;g++)d.push(b[g].x,b[g].y);b=d}this.closed=!0,this.points=b,this.type=f.SHAPES.POLY}var e=a("../Point"),f=a("../../const");d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.points.slice())},d.prototype.close=function(){var a=this.points;a[0]===a[a.length-2]&&a[1]===a[a.length-1]||a.push(a[0],a[1])},d.prototype.contains=function(a,b){for(var c=!1,d=this.points.length/2,e=0,f=d-1;e<d;f=e++){var g=this.points[2*e],h=this.points[2*e+1],i=this.points[2*f],j=this.points[2*f+1],k=h>b!=j>b&&a<(i-g)*(b-h)/(j-h)+g;k&&(c=!c)}return c}},{"../../const":43,"../Point":66}],71:[function(a,b,c){function d(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.type=e.SHAPES.RECT}var e=a("../../const");d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{left:{get:function(){return this.x}},right:{get:function(){return this.x+this.width}},top:{get:function(){return this.y}},bottom:{get:function(){return this.y+this.height}}}),d.EMPTY=new d(0,0,0,0),d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},d.prototype.contains=function(a,b){return!(this.width<=0||this.height<=0)&&a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height},d.prototype.pad=function(a,b){a=a||0,b=b||(0!==b?a:0),this.x-=a,this.y-=b,this.width+=2*a,this.height+=2*b},d.prototype.fit=function(a){this.x<a.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=a.x),this.y<a.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=a.y),this.x+this.width>a.x+a.width&&(this.width=a.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>a.y+a.height&&(this.height=a.height-this.y,this.height<0&&(this.height=0))},d.prototype.enlarge=function(a){if(a!==d.EMPTY){var b=Math.min(this.x,a.x),c=Math.max(this.x+this.width,a.x+a.width),e=Math.min(this.y,a.y),f=Math.max(this.y+this.height,a.y+a.height);this.x=b,this.width=c-b,this.y=e,this.height=f-e}}},{"../../const":43}],72:[function(a,b,c){function d(a,b,c,d,f){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.radius=f||20,this.type=e.SHAPES.RREC}var e=a("../../const");d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height,this.radius)},d.prototype.contains=function(a,b){return!(this.width<=0||this.height<=0)&&a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height}},{"../../const":43}],73:[function(a,b,c){function d(a,b,c,d){if(j.call(this),e.sayHello(a),d)for(var f in g.DEFAULT_RENDER_OPTIONS)"undefined"==typeof d[f]&&(d[f]=g.DEFAULT_RENDER_OPTIONS[f]);else d=g.DEFAULT_RENDER_OPTIONS;this.type=g.RENDERER_TYPE.UNKNOWN,this.width=b||800,this.height=c||600,this.view=d.view||document.createElement("canvas"),this.resolution=d.resolution,this.transparent=d.transparent,this.autoResize=d.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=d.preserveDrawingBuffer,this.clearBeforeRender=d.clearBeforeRender,this.roundPixels=d.roundPixels,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=d.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new h,this._lastObjectRendered=this._tempDisplayObjectParent}var e=a("../utils"),f=a("../math"),g=a("../const"),h=a("../display/Container"),i=a("../textures/RenderTexture"),j=a("eventemitter3"),k=new f.Matrix;d.prototype=Object.create(j.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a,this._backgroundColorString=e.hex2string(a),e.hex2rgb(a,this._backgroundColorRgba)}}}),d.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},d.prototype.generateTexture=function(a,b,c){var d=a.getLocalBounds(),e=i.create(0|d.width,0|d.height,b,c);return k.tx=-d.x,k.ty=-d.y,this.render(a,e,!1,k,!0),e},d.prototype.destroy=function(a){a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=g.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null}},{"../const":43,"../display/Container":45,"../math":67,"../textures/RenderTexture":108,"../utils":116,eventemitter3:3}],74:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,"Canvas",a,b,c),this.type=j.RENDERER_TYPE.CANVAS,this.rootContext=this.view.getContext("2d",{alpha:this.transparent}),this.rootResolution=this.resolution,this.refresh=!0,this.maskManager=new f(this),this.smoothProperty="imageSmoothingEnabled",this.rootContext.imageSmoothingEnabled||(this.rootContext.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.rootContext.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.rootContext.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.rootContext.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this.blendModes=h(),this._activeBlendMode=null,this.context=null,this.renderingToScreen=!1,this.resize(a,b)}var e=a("../SystemRenderer"),f=a("./utils/CanvasMaskManager"),g=a("./utils/CanvasRenderTarget"),h=a("./utils/mapCanvasBlendModesToPixi"),i=a("../../utils"),j=a("../../const");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,i.pluginTarget.mixin(d),d.prototype.render=function(a,b,c,d,e){if(this.view){this.renderingToScreen=!b,this.emit("prerender"),b?(b=b.baseTexture||b,b._canvasRenderTarget||(b._canvasRenderTarget=new g(b.width,b.height,b.resolution),b.source=b._canvasRenderTarget.canvas,b.valid=!0),this.context=b._canvasRenderTarget.context,this.resolution=b._canvasRenderTarget.resolution):(this.context=this.rootContext,this.resolution=this.rootResolution);var f=this.context;if(b||(this._lastObjectRendered=a),!e){var h=a.parent,i=this._tempDisplayObjectParent.transform.worldTransform;d?d.copy(i):i.identity(),a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=h}f.setTransform(1,0,0,1,0,0),f.globalAlpha=1,f.globalCompositeOperation=this.blendModes[j.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(f.fillStyle="black",f.clear()),(void 0!==c?c:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?f.clearRect(0,0,this.width,this.height):(f.fillStyle=this._backgroundColorString,f.fillRect(0,0,this.width,this.height)));var k=this.context;this.context=f,a.renderCanvas(this),this.context=k,this.emit("postrender")}},d.prototype.setBlendMode=function(a){this._activeBlendMode!==a&&(this.context.globalCompositeOperation=this.blendModes[a])},d.prototype.destroy=function(a){this.destroyPlugins(),e.prototype.destroy.call(this,a),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},d.prototype.resize=function(a,b){e.prototype.resize.call(this,a,b),this.smoothProperty&&(this.rootContext[this.smoothProperty]=j.SCALE_MODES.DEFAULT===j.SCALE_MODES.LINEAR)}},{"../../const":43,"../../utils":116,"../SystemRenderer":73,"./utils/CanvasMaskManager":75,"./utils/CanvasRenderTarget":76,"./utils/mapCanvasBlendModesToPixi":78}],75:[function(a,b,c){function d(a){this.renderer=a}var e=a("../../../const");d.prototype.constructor=d,b.exports=d,d.prototype.pushMask=function(a){var b=this.renderer;b.context.save();var c=a.alpha,d=a.transform.worldTransform,e=b.resolution;b.context.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),a._texture||(this.renderGraphicsShape(a),
b.context.clip()),a.worldAlpha=c},d.prototype.renderGraphicsShape=function(a){var b=this.renderer.context,c=a.graphicsData.length;if(0!==c){b.beginPath();for(var d=0;d<c;d++){var f=a.graphicsData[d],g=f.shape;if(f.type===e.SHAPES.POLY){var h=g.points;b.moveTo(h[0],h[1]);for(var i=1;i<h.length/2;i++)b.lineTo(h[2*i],h[2*i+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&b.closePath()}else if(f.type===e.SHAPES.RECT)b.rect(g.x,g.y,g.width,g.height),b.closePath();else if(f.type===e.SHAPES.CIRC)b.arc(g.x,g.y,g.radius,0,2*Math.PI),b.closePath();else if(f.type===e.SHAPES.ELIP){var j=2*g.width,k=2*g.height,l=g.x-j/2,m=g.y-k/2,n=.5522848,o=j/2*n,p=k/2*n,q=l+j,r=m+k,s=l+j/2,t=m+k/2;b.moveTo(l,t),b.bezierCurveTo(l,t-p,s-o,m,s,m),b.bezierCurveTo(s+o,m,q,t-p,q,t),b.bezierCurveTo(q,t+p,s+o,r,s,r),b.bezierCurveTo(s-o,r,l,t+p,l,t),b.closePath()}else if(f.type===e.SHAPES.RREC){var u=g.x,v=g.y,w=g.width,x=g.height,y=g.radius,z=Math.min(w,x)/2|0;y=y>z?z:y,b.moveTo(u,v+y),b.lineTo(u,v+x-y),b.quadraticCurveTo(u,v+x,u+y,v+x),b.lineTo(u+w-y,v+x),b.quadraticCurveTo(u+w,v+x,u+w,v+x-y),b.lineTo(u+w,v+y),b.quadraticCurveTo(u+w,v,u+w-y,v),b.lineTo(u+y,v),b.quadraticCurveTo(u,v,u,v+y),b.closePath()}}}},d.prototype.popMask=function(a){a.context.restore()},d.prototype.destroy=function(){}},{"../../../const":43}],76:[function(a,b,c){function d(a,b,c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=c||e.RESOLUTION,this.resize(a,b)}var e=a("../../../const");d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this.canvas.width},set:function(a){this.canvas.width=a}},height:{get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}}),d.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},d.prototype.resize=function(a,b){this.canvas.width=a*this.resolution,this.canvas.height=b*this.resolution},d.prototype.destroy=function(){this.context=null,this.canvas=null}},{"../../../const":43}],77:[function(a,b,c){var d=function(a){var b=document.createElement("canvas");b.width=6,b.height=1;var c=b.getContext("2d");return c.fillStyle=a,c.fillRect(0,0,6,1),b},e=function(){if("undefined"==typeof document)return!1;var a=d("#ff00ff"),b=d("#ffff00"),c=document.createElement("canvas");c.width=6,c.height=1;var e=c.getContext("2d");e.globalCompositeOperation="multiply",e.drawImage(a,0,0),e.drawImage(b,2,0);var f=e.getImageData(2,0,1,1);if(!f)return!1;var g=f.data;return 255===g[0]&&0===g[1]&&0===g[2]};b.exports=e},{}],78:[function(a,b,c){function d(a){return a=a||[],f()?(a[e.BLEND_MODES.NORMAL]="source-over",a[e.BLEND_MODES.ADD]="lighter",a[e.BLEND_MODES.MULTIPLY]="multiply",a[e.BLEND_MODES.SCREEN]="screen",a[e.BLEND_MODES.OVERLAY]="overlay",a[e.BLEND_MODES.DARKEN]="darken",a[e.BLEND_MODES.LIGHTEN]="lighten",a[e.BLEND_MODES.COLOR_DODGE]="color-dodge",a[e.BLEND_MODES.COLOR_BURN]="color-burn",a[e.BLEND_MODES.HARD_LIGHT]="hard-light",a[e.BLEND_MODES.SOFT_LIGHT]="soft-light",a[e.BLEND_MODES.DIFFERENCE]="difference",a[e.BLEND_MODES.EXCLUSION]="exclusion",a[e.BLEND_MODES.HUE]="hue",a[e.BLEND_MODES.SATURATION]="saturate",a[e.BLEND_MODES.COLOR]="color",a[e.BLEND_MODES.LUMINOSITY]="luminosity"):(a[e.BLEND_MODES.NORMAL]="source-over",a[e.BLEND_MODES.ADD]="lighter",a[e.BLEND_MODES.MULTIPLY]="source-over",a[e.BLEND_MODES.SCREEN]="source-over",a[e.BLEND_MODES.OVERLAY]="source-over",a[e.BLEND_MODES.DARKEN]="source-over",a[e.BLEND_MODES.LIGHTEN]="source-over",a[e.BLEND_MODES.COLOR_DODGE]="source-over",a[e.BLEND_MODES.COLOR_BURN]="source-over",a[e.BLEND_MODES.HARD_LIGHT]="source-over",a[e.BLEND_MODES.SOFT_LIGHT]="source-over",a[e.BLEND_MODES.DIFFERENCE]="source-over",a[e.BLEND_MODES.EXCLUSION]="source-over",a[e.BLEND_MODES.HUE]="source-over",a[e.BLEND_MODES.SATURATION]="source-over",a[e.BLEND_MODES.COLOR]="source-over",a[e.BLEND_MODES.LUMINOSITY]="source-over"),a}var e=a("../../../const"),f=a("./canUseNewCanvasBlendModes");b.exports=d},{"../../../const":43,"./canUseNewCanvasBlendModes":77}],79:[function(a,b,c){function d(a){this.renderer=a,this.count=0,this.checkCount=0,this.maxIdle=3600,this.checkCountMax=600,this.mode=e.GC_MODES.DEFAULT}var e=a("../../const");d.prototype.constructor=d,b.exports=d,d.prototype.update=function(){this.count++,this.mode!==e.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},d.prototype.run=function(){var a,b,c=this.renderer.textureManager,d=c._managedTextures,e=!1;for(a=0;a<d.length;a++){var f=d[a];!f._glRenderTargets&&this.count-f.touched>this.maxIdle&&(c.destroyTexture(f,!0),d[a]=null,e=!0)}if(e){for(b=0,a=0;a<d.length;a++)null!==d[a]&&(d[b++]=d[a]);d.length=b}},d.prototype.unload=function(a){var b=this.renderer.textureManager;a._texture&&b.destroyTexture(a._texture,!0);for(var c=a.children.length-1;c>=0;c--)this.unload(a.children[c])}},{"../../const":43}],80:[function(a,b,c){var d=a("pixi-gl-core").GLTexture,e=a("../../const"),f=a("./utils/RenderTarget"),g=a("../../utils"),h=function(a){this.renderer=a,this.gl=a.gl,this._managedTextures=[]};h.prototype.bindTexture=function(){},h.prototype.getTexture=function(){},h.prototype.updateTexture=function(a){a=a.baseTexture||a;var b=!!a._glRenderTargets;if(a.hasLoaded){var c=a._glTextures[this.renderer.CONTEXT_UID];if(c)b?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,a.height):c.upload(a.source);else{if(b){var g=new f(this.gl,a.width,a.height,a.scaleMode,a.resolution);g.resize(a.width,a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=g,c=g.texture}else c=new d(this.gl),c.premultiplyAlpha=!0,c.upload(a.source);a._glTextures[this.renderer.CONTEXT_UID]=c,a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a),a.isPowerOfTwo?(a.mipmap&&c.enableMipmap(),a.wrapMode===e.WRAP_MODES.CLAMP?c.enableWrapClamp():a.wrapMode===e.WRAP_MODES.REPEAT?c.enableWrapRepeat():c.enableWrapMirrorRepeat()):c.enableWrapClamp(),a.scaleMode===e.SCALE_MODES.NEAREST?c.enableNearestScaling():c.enableLinearScaling()}return c}},h.prototype.destroyTexture=function(a,b){if(a=a.baseTexture||a,a.hasLoaded&&a._glTextures[this.renderer.CONTEXT_UID]&&(a._glTextures[this.renderer.CONTEXT_UID].destroy(),a.off("update",this.updateTexture,this),a.off("dispose",this.destroyTexture,this),delete a._glTextures[this.renderer.CONTEXT_UID],!b)){var c=this._managedTextures.indexOf(a);c!==-1&&g.removeItems(this._managedTextures,c,1)}},h.prototype.removeAll=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];b._glTextures[this.renderer.CONTEXT_UID]&&delete b._glTextures[this.renderer.CONTEXT_UID]}},h.prototype.destroy=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];this.destroyTexture(b,!0),b.off("update",this.updateTexture,this),b.off("dispose",this.destroyTexture,this)}this._managedTextures=null},b.exports=h},{"../../const":43,"../../utils":116,"./utils/RenderTarget":93,"pixi-gl-core":12}],81:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,"WebGL",a,b,c),this.type=s.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._contextOptions={alpha:this.transparent,antialias:c.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:c.preserveDrawingBuffer},this._backgroundColorRgba[3]=this.transparent?0:1,this.maskManager=new f(this),this.stencilManager=new g(this),this.emptyRenderer=new j(this),this.currentRenderer=this.emptyRenderer,this.initPlugins(),c.context&&p(c.context),this.gl=c.context||n(this.view,this._contextOptions),this.CONTEXT_UID=t++,this.state=new m(this.gl),this.renderingToScreen=!0,this._initContext(),this.filterManager=new h(this),this.drawModes=o(this.gl),this._activeShader=null,this._activeRenderTarget=null,this._activeTextureLocation=999,this._activeTexture=null,this.setBlendMode(0)}var e=a("../SystemRenderer"),f=a("./managers/MaskManager"),g=a("./managers/StencilManager"),h=a("./managers/FilterManager"),i=a("./utils/RenderTarget"),j=a("./utils/ObjectRenderer"),k=a("./TextureManager"),l=a("./TextureGarbageCollector"),m=a("./WebGLState"),n=a("pixi-gl-core").createContext,o=a("./utils/mapWebGLDrawModesToPixi"),p=a("./utils/validateContext"),q=a("../../utils"),r=a("pixi-gl-core"),s=a("../../const"),t=0;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,q.pluginTarget.mixin(d),d.prototype._initContext=function(){var a=this.gl;this.textureManager=new k(this),this.textureGC=new l(this),this.state.resetToDefault(),this.rootRenderTarget=new i(a,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget),this.emit("context",a),this.resize(this.width,this.height)},d.prototype.render=function(a,b,c,d,e){if(this.renderingToScreen=!b,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(b||(this._lastObjectRendered=a),!e){var f=a.parent;a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=f}this.bindRenderTexture(b,d),this.currentRenderer.start(),(void 0!==c?c:this.clearBeforeRender)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},d.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},d.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},d.prototype.resize=function(a,b){e.prototype.resize.call(this,a,b),this.rootRenderTarget.resize(a,b),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},d.prototype.setBlendMode=function(a){this.state.setBlendMode(a)},d.prototype.clear=function(a){this._activeRenderTarget.clear(a)},d.prototype.setTransform=function(a){this._activeRenderTarget.transform=a},d.prototype.bindRenderTexture=function(a,b){var c;if(a){var d=a.baseTexture,e=this.gl;d._glRenderTargets[this.CONTEXT_UID]?(this._activeTextureLocation=d._id,e.activeTexture(e.TEXTURE0+d._id),e.bindTexture(e.TEXTURE_2D,null)):(this.textureManager.updateTexture(d),e.bindTexture(e.TEXTURE_2D,null)),c=d._glRenderTargets[this.CONTEXT_UID],c.setFrame(a.frame)}else c=this.rootRenderTarget;return c.transform=b,this.bindRenderTarget(c),this},d.prototype.bindRenderTarget=function(a){return a!==this._activeRenderTarget&&(this._activeRenderTarget=a,a.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=a.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(a.stencilMaskStack)),this},d.prototype.bindShader=function(a){return this._activeShader!==a&&(this._activeShader=a,a.bind(),a.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)),this},d.prototype.bindTexture=function(a,b){a=a.baseTexture||a;var c=this.gl;return b=b||0,this._activeTextureLocation!==b&&(this._activeTextureLocation=b,c.activeTexture(c.TEXTURE0+b)),this._activeTexture=a,a._glTextures[this.CONTEXT_UID]?(a.touched=this.textureGC.count,a._glTextures[this.CONTEXT_UID].bind()):this.textureManager.updateTexture(a),this},d.prototype.createVao=function(){return new r.VertexArrayObject(this.gl,this.state.attribState)},d.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._activeTextureLocation=999,this._activeTexture=null,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},d.prototype.handleContextLost=function(a){a.preventDefault()},d.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},d.prototype.destroy=function(a){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,a),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null}},{"../../const":43,"../../utils":116,"../SystemRenderer":73,"./TextureGarbageCollector":79,"./TextureManager":80,"./WebGLState":82,"./managers/FilterManager":87,"./managers/MaskManager":88,"./managers/StencilManager":89,"./utils/ObjectRenderer":91,"./utils/RenderTarget":93,"./utils/mapWebGLDrawModesToPixi":96,"./utils/validateContext":97,"pixi-gl-core":12}],82:[function(a,b,c){function d(a){this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=a,this.maxAttribs=a.getParameter(a.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=e(a),this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object")}var e=a("./utils/mapWebGLBlendModesToPixi");d.prototype.push=function(){var a=this.stack[++this.stackIndex];a||(a=this.stack[this.stackIndex]=new Uint8Array(16));for(var b=0;b<this.activeState.length;b++)this.activeState[b]=a[b]};var f=0,g=1,h=2,i=3,j=4;d.prototype.pop=function(){var a=this.stack[--this.stackIndex];this.setState(a)},d.prototype.setState=function(a){this.setBlend(a[f]),this.setDepthTest(a[g]),this.setFrontFace(a[h]),this.setCullFace(a[i]),this.setBlendMode(a[j])},d.prototype.setBlend=function(a){if(!(this.activeState[f]===a|0)){this.activeState[f]=0|a;var b=this.gl;a?b.enable(b.BLEND):b.disable(b.BLEND)}},d.prototype.setBlendMode=function(a){a!==this.activeState[j]&&(this.activeState[j]=a,this.gl.blendFunc(this.blendModes[a][0],this.blendModes[a][1]))},d.prototype.setDepthTest=function(a){if(!(this.activeState[g]===a|0)){this.activeState[g]=0|a;var b=this.gl;a?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST)}},d.prototype.setCullFace=function(a){if(!(this.activeState[i]===a|0)){this.activeState[i]=0|a;var b=this.gl;a?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE)}},d.prototype.setFrontFace=function(a){if(!(this.activeState[h]===a|0)){this.activeState[h]=0|a;var b=this.gl;a?b.frontFace(b.CW):b.frontFace(b.CCW)}},d.prototype.resetAttributes=function(){var a;for(a=0;a<this.attribState.tempAttribState.length;a++)this.attribState.tempAttribState[a]=0;for(a=0;a<this.attribState.attribState.length;a++)this.attribState.attribState[a]=0;var b=this.gl;for(a=1;a<this.maxAttribs;a++)b.disableVertexAttribArray(a)},d.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var a=0;a<this.activeState.length;a++)this.activeState[a]=32;var b=this.gl;b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},b.exports=d},{"./utils/mapWebGLBlendModesToPixi":95}],83:[function(a,b,c){function d(a,b,c){this.vertexSrc=a||d.defaultVertexSrc,this.fragmentSrc=b||d.defaultFragmentSrc,this.blendMode=g.BLEND_MODES.NORMAL,this.uniformData=c||e(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var i in this.uniformData)this.uniforms[i]=this.uniformData[i].value;this.glShaders=[],h[this.vertexSrc+this.fragmentSrc]||(h[this.vertexSrc+this.fragmentSrc]=f.uid()),this.glShaderKey=h[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=1,this.enabled=!0}var e=a("./extractUniformsFromSrc"),f=a("../../../utils"),g=a("../../../const"),h={};b.exports=d,d.prototype.apply=function(a,b,c,d){a.applyFilter(this,b,c,d)},d.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n"),d.defaultFragmentSrc=["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")},{"../../../const":43,"../../../utils":116,"./extractUniformsFromSrc":84}],84:[function(a,b,c){function d(a,b,c){var d=e(a,c),f=e(b,c);return Object.assign(d,f)}function e(a){for(var b,c=new RegExp("^(projectionMatrix|uSampler|filterArea)$"),d={},e=a.replace(/\s+/g," ").split(/\s*;\s*/),g=0;g<e.length;g++){var h=e[g].trim();if(h.indexOf("uniform")>-1){var i=h.split(" "),j=i[1],k=i[2],l=1;k.indexOf("[")>-1&&(b=k.split(/\[|\]/),k=b[0],l*=Number(b[1])),k.match(c)||(d[k]={value:f(j,l),name:k,type:j})}}return d}var f=a("pixi-gl-core").shader.defaultValue;b.exports=d},{"pixi-gl-core":12}],85:[function(a,b,c){var d=a("../../../math"),e=function(a,b,c){var d=a.identity();return d.translate(b.x/c.width,b.y/c.height),d.scale(c.width,c.height),d},f=function(a,b,c){var d=a.identity();d.translate(b.x/c.width,b.y/c.height);var e=c.width/b.width,f=c.height/b.height;return d.scale(e,f),d},g=function(a,b,c,e){var f=e.worldTransform.copy(d.Matrix.TEMP_MATRIX),g=e._texture.baseTexture,h=a.identity(),i=c.height/c.width;h.translate(b.x/c.width,b.y/c.height),h.scale(1,i);var j=c.width/g.width,k=c.height/g.height;return f.tx/=g.width*j,f.ty/=g.width*j,f.invert(),h.prepend(f),h.scale(1,1/i),h.scale(j,k),h.translate(e.anchor.x,e.anchor.y),h};b.exports={calculateScreenSpaceMatrix:e,calculateNormalizedScreenSpaceMatrix:f,calculateSpriteMatrix:g}},{"../../../math":67}],86:[function(a,b,c){function d(a){var b=new f.Matrix;e.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","#define GLSLIFY 1\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n"),a.renderable=!1,this.maskSprite=a,this.maskMatrix=b}var e=a("../Filter"),f=a("../../../../math");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c){var d=this.maskSprite;this.uniforms.mask=d._texture,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,d),this.uniforms.alpha=d.worldAlpha,a.applyFilter(this,b,c)}},{"../../../../math":67,"../Filter":83}],87:[function(a,b,c){function d(a){e.call(this,a),this.gl=this.renderer.gl,this.quad=new g(this.gl,a.state.attribState),this.shaderCache={},this.pool={},this.filterData=null}var e=a("./WebGLManager"),f=a("../utils/RenderTarget"),g=a("../utils/Quad"),h=a("../../../math"),i=a("../../../Shader"),j=a("../filters/filterTransforms"),k=a("bit-twiddle"),l=function(){this.renderTarget=null,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.filters=[],this.target=null,this.resolution=1};d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.pushFilter=function(a,b){var c=this.renderer,d=this.filterData;if(!d){d=this.renderer._activeRenderTarget.filterStack;var e=new l;e.sourceFrame=e.destinationFrame=this.renderer._activeRenderTarget.size,e.renderTarget=c._activeRenderTarget,this.renderer._activeRenderTarget.filterData=d={index:0,stack:[e]},this.filterData=d}var f=d.stack[++d.index];f||(f=d.stack[d.index]=new l);var g=b[0].resolution,h=b[0].padding,i=a.filterArea||a.getBounds(!0),j=f.sourceFrame,k=f.destinationFrame;j.x=(i.x*g|0)/g,j.y=(i.y*g|0)/g,j.width=(i.width*g|0)/g,j.height=(i.height*g|0)/g,d.stack[0].renderTarget.transform||j.fit(d.stack[0].destinationFrame),j.pad(h),k.width=j.width,k.height=j.height;var m=this.getPotRenderTarget(c.gl,j.width,j.height,g);f.target=a,f.filters=b,f.resolution=g,f.renderTarget=m,m.setFrame(k,j),c.bindRenderTarget(m),c.clear()},d.prototype.popFilter=function(){var a=this.filterData,b=a.stack[a.index-1],c=a.stack[a.index];this.quad.map(c.renderTarget.size,c.sourceFrame).upload();var d=c.filters;if(1===d.length)d[0].apply(this,c.renderTarget,b.renderTarget,!1),this.freePotRenderTarget(c.renderTarget);else{var e=c.renderTarget,f=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,1);f.setFrame(c.destinationFrame,c.sourceFrame);for(var g=0;g<d.length-1;g++){d[g].apply(this,e,f,!0);var h=e;e=f,f=h}d[g].apply(this,e,b.renderTarget,!1),this.freePotRenderTarget(e),this.freePotRenderTarget(f)}a.index--,0===a.index&&(this.filterData=null)},d.prototype.applyFilter=function(a,b,c,d){var e=this.renderer,f=a.glShaders[e.CONTEXT_UID];if(f||(a.glShaderKey?(f=this.shaderCache[a.glShaderKey],f||(f=a.glShaders[e.CONTEXT_UID]=this.shaderCache[a.glShaderKey]=new i(this.gl,a.vertexSrc,a.fragmentSrc))):f=a.glShaders[e.CONTEXT_UID]=new i(this.gl,a.vertexSrc,a.fragmentSrc),this.quad.initVao(f)),e.bindRenderTarget(c),d){var g=e.gl;g.disable(g.SCISSOR_TEST),e.clear(),g.enable(g.SCISSOR_TEST)}c===e.maskManager.scissorRenderTarget&&e.maskManager.pushScissorMask(null,e.maskManager.scissorData),e.bindShader(f),this.syncUniforms(f,a),b.texture.bind(0),e._activeTextureLocation=0,e.state.setBlendMode(a.blendMode),this.quad.draw()},d.prototype.syncUniforms=function(a,b){var c,d=b.uniformData,e=b.uniforms,f=1;if(a.uniforms.data.filterArea){c=this.filterData.stack[this.filterData.index];var g=a.uniforms.filterArea;g[0]=c.renderTarget.size.width,g[1]=c.renderTarget.size.height,g[2]=c.sourceFrame.x,g[3]=c.sourceFrame.y,a.uniforms.filterArea=g}if(a.uniforms.data.filterClamp){c=this.filterData.stack[this.filterData.index];var h=a.uniforms.filterClamp;h[0]=.5/c.renderTarget.size.width,h[1]=.5/c.renderTarget.size.height,h[2]=(c.sourceFrame.width-.5)/c.renderTarget.size.width,h[3]=(c.sourceFrame.height-.5)/c.renderTarget.size.height,a.uniforms.filterClamp=h}var i;for(var j in d)if("sampler2D"===d[j].type){if(a.uniforms[j]=f,e[j].baseTexture)this.renderer.bindTexture(e[j].baseTexture,f);else{var k=this.renderer.gl;this.renderer._activeTextureLocation=k.TEXTURE0+f,k.activeTexture(k.TEXTURE0+f),e[j].texture.bind()}f++}else"mat3"===d[j].type?void 0!==e[j].a?a.uniforms[j]=e[j].toArray(!0):a.uniforms[j]=e[j]:"vec2"===d[j].type?void 0!==e[j].x?(i=a.uniforms[j]||new Float32Array(2),i[0]=e[j].x,i[1]=e[j].y,a.uniforms[j]=i):a.uniforms[j]=e[j]:"float"===d[j].type?a.uniforms.data[j].value!==d[j]&&(a.uniforms[j]=e[j]):a.uniforms[j]=e[j]},d.prototype.getRenderTarget=function(a,b){var c=this.filterData.stack[this.filterData.index],d=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,b||c.resolution);return d.setFrame(c.destinationFrame,c.sourceFrame),d},d.prototype.returnRenderTarget=function(a){return this.freePotRenderTarget(a)},d.prototype.calculateScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return j.calculateScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size)},d.prototype.calculateNormalizedScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return j.calculateNormalizedScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size,b.destinationFrame)},d.prototype.calculateSpriteMatrix=function(a,b){var c=this.filterData.stack[this.filterData.index];return j.calculateSpriteMatrix(a,c.sourceFrame,c.renderTarget.size,b)},d.prototype.destroy=function(){this.shaderCache=[],this.emptyPool()},d.prototype.getPotRenderTarget=function(a,b,c,d){b=k.nextPow2(b*d),c=k.nextPow2(c*d);var e=(65535&b)<<16|65535&c;this.pool[e]||(this.pool[e]=[]);var g=this.pool[e].pop()||new f(a,b,c,null,1);return g.resolution=d,g.defaultFrame.width=g.size.width=b/d,g.defaultFrame.height=g.size.height=c/d,g},d.prototype.emptyPool=function(){for(var a in this.pool){var b=this.pool[a];if(b)for(var c=0;c<b.length;c++)b[c].destroy(!0)}this.pool={}},d.prototype.freePotRenderTarget=function(a){var b=a.size.width*a.resolution,c=a.size.height*a.resolution,d=(65535&b)<<16|65535&c;this.pool[d].push(a)}},{"../../../Shader":42,"../../../math":67,"../filters/filterTransforms":85,"../utils/Quad":92,"../utils/RenderTarget":93,"./WebGLManager":90,"bit-twiddle":1}],88:[function(a,b,c){function d(a){e.call(this,a),this.scissor=!1,this.scissorData=null,this.scissorRenderTarget=null,this.enableScissor=!0,this.alphaMaskPool=[],this.alphaMaskIndex=0}var e=a("./WebGLManager"),f=a("../filters/spriteMask/SpriteMaskFilter");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.pushMask=function(a,b){if(b.texture)this.pushSpriteMask(a,b);else if(this.enableScissor&&!this.scissor&&!this.renderer.stencilManager.stencilMaskStack.length&&b.isFastRect()){var c=b.worldTransform,d=Math.atan2(c.b,c.a);d=Math.round(d*(180/Math.PI)),d%90?this.pushStencilMask(b):this.pushScissorMask(a,b)}else this.pushStencilMask(b)},d.prototype.popMask=function(a,b){b.texture?this.popSpriteMask(a,b):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(a,b):this.popStencilMask(a,b)},d.prototype.pushSpriteMask=function(a,b){var c=this.alphaMaskPool[this.alphaMaskIndex];c||(c=this.alphaMaskPool[this.alphaMaskIndex]=[new f(b)]),c[0].resolution=this.renderer.resolution,c[0].maskSprite=b,a.filterArea=b.getBounds(!0),this.renderer.filterManager.pushFilter(a,c),this.alphaMaskIndex++},d.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},d.prototype.pushStencilMask=function(a){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(a)},d.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},d.prototype.pushScissorMask=function(a,b){b.renderable=!0;var c=this.renderer._activeRenderTarget,d=b.getBounds();d.fit(c.size),b.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var e=this.renderer.resolution;this.renderer.gl.scissor(d.x*e,(c.root?c.size.height-d.y-d.height:d.y)*e,d.width*e,d.height*e),this.scissorRenderTarget=c,this.scissorData=b,this.scissor=!0},d.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var a=this.renderer.gl;a.disable(a.SCISSOR_TEST)}},{"../filters/spriteMask/SpriteMaskFilter":86,"./WebGLManager":90}],89:[function(a,b,c){function d(a){e.call(this,a),this.stencilMaskStack=null}var e=a("./WebGLManager");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)},d.prototype.pushStencil=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var b=this.renderer.gl,c=this.stencilMaskStack;0===c.length&&(b.enable(b.STENCIL_TEST),b.clear(b.STENCIL_BUFFER_BIT),b.stencilFunc(b.ALWAYS,1,1)),c.push(a),b.colorMask(!1,!1,!1,!1),b.stencilOp(b.KEEP,b.KEEP,b.INCR),this.renderer.plugins.graphics.render(a),b.colorMask(!0,!0,!0,!0),b.stencilFunc(b.NOTEQUAL,0,c.length),b.stencilOp(b.KEEP,b.KEEP,b.KEEP)},d.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var a=this.renderer.gl,b=this.stencilMaskStack,c=b.pop();0===b.length?a.disable(a.STENCIL_TEST):(a.colorMask(!1,!1,!1,!1),a.stencilOp(a.KEEP,a.KEEP,a.DECR),this.renderer.plugins.graphics.render(c),a.colorMask(!0,!0,!0,!0),a.stencilFunc(a.NOTEQUAL,0,b.length),a.stencilOp(a.KEEP,a.KEEP,a.KEEP))},d.prototype.destroy=function(){e.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null}},{"./WebGLManager":90}],90:[function(a,b,c){function d(a){this.renderer=a,this.renderer.on("context",this.onContextChange,this)}d.prototype.constructor=d,b.exports=d,d.prototype.onContextChange=function(){},d.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],91:[function(a,b,c){function d(a){e.call(this,a)}var e=a("../managers/WebGLManager");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.start=function(){},d.prototype.stop=function(){this.flush()},d.prototype.flush=function(){},d.prototype.render=function(a){}},{"../managers/WebGLManager":90}],92:[function(a,b,c){function d(a,b){this.gl=a,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var c=0;c<4;c++)this.interleaved[4*c]=this.vertices[2*c],this.interleaved[4*c+1]=this.vertices[2*c+1],this.interleaved[4*c+2]=this.uvs[2*c],this.interleaved[4*c+3]=this.uvs[2*c+1];this.indices=f(1),this.vertexBuffer=e.GLBuffer.createVertexBuffer(a,this.interleaved,a.STATIC_DRAW),this.indexBuffer=e.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.vao=new e.VertexArrayObject(a,b)}var e=a("pixi-gl-core"),f=a("../../../utils/createIndicesForQuads");d.prototype.constructor=d,d.prototype.initVao=function(a){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,a.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,a.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},d.prototype.map=function(a,b){var c=0,d=0;return this.uvs[0]=c,this.uvs[1]=d,this.uvs[2]=c+b.width/a.width,this.uvs[3]=d,this.uvs[4]=c+b.width/a.width,this.uvs[5]=d+b.height/a.height,this.uvs[6]=c,this.uvs[7]=d+b.height/a.height,c=b.x,d=b.y,this.vertices[0]=c,this.vertices[1]=d,this.vertices[2]=c+b.width,this.vertices[3]=d,this.vertices[4]=c+b.width,this.vertices[5]=d+b.height,this.vertices[6]=c,this.vertices[7]=d+b.height,this},d.prototype.draw=function(){return this.vao.bind().draw(this.gl.TRIANGLES,6,0).unbind(),this},d.prototype.upload=function(){for(var a=0;a<4;a++)this.interleaved[4*a]=this.vertices[2*a],this.interleaved[4*a+1]=this.vertices[2*a+1],this.interleaved[4*a+2]=this.uvs[2*a],this.interleaved[4*a+3]=this.uvs[2*a+1];return this.vertexBuffer.upload(this.interleaved),this},d.prototype.destroy=function(){var a=this.gl;a.deleteBuffer(this.vertexBuffer),a.deleteBuffer(this.indexBuffer)},b.exports=d},{"../../../utils/createIndicesForQuads":114,"pixi-gl-core":12}],93:[function(a,b,c){var d=a("../../../math"),e=a("../../../const"),f=a("pixi-gl-core").GLFramebuffer,g=function(a,b,c,g,h,i){this.gl=a,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new d.Rectangle(0,0,1,1),this.resolution=h||e.RESOLUTION,
this.projectionMatrix=new d.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new d.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=g||e.SCALE_MODES.DEFAULT,this.root=i,this.root?(this.frameBuffer=new f(a,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=f.createRGBA(a,100,100),this.scaleMode===e.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(b,c)};g.prototype.constructor=g,b.exports=g,g.prototype.clear=function(a){var b=a||this.clearColor;this.frameBuffer.clear(b[0],b[1],b[2],b[3])},g.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},g.prototype.setFrame=function(a,b){this.destinationFrame=a||this.destinationFrame||this.defaultFrame,this.sourceFrame=b||this.sourceFrame||a},g.prototype.activate=function(){var a=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(a.enable(a.SCISSOR_TEST),a.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):a.disable(a.SCISSOR_TEST),a.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},g.prototype.calculateProjection=function(a,b){var c=this.projectionMatrix;b=b||a,c.identity(),this.root?(c.a=1/a.width*2,c.d=-1/a.height*2,c.tx=-1-b.x*c.a,c.ty=1-b.y*c.d):(c.a=1/a.width*2,c.d=1/a.height*2,c.tx=-1-b.x*c.a,c.ty=-1-b.y*c.d)},g.prototype.resize=function(a,b){if(a=0|a,b=0|b,this.size.width!==a||this.size.height!==b){this.size.width=a,this.size.height=b,this.defaultFrame.width=a,this.defaultFrame.height=b,this.frameBuffer.resize(a*this.resolution,b*this.resolution);var c=this.frame||this.size;this.calculateProjection(c)}},g.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null}},{"../../../const":43,"../../../math":67,"pixi-gl-core":12}],94:[function(a,b,c){function d(a){for(var b="",c=0;c<a;c++)c>0&&(b+="\nelse "),c<a-1&&(b+="if(test == "+c+".0){}");return b}var e=a("pixi-gl-core"),f=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n"),g=function(a,b){var c=!b;if(c){var g=document.createElement("canvas");g.width=1,g.height=1,b=e.createContext(g)}for(var h=b.createShader(b.FRAGMENT_SHADER);;){var i=f.replace(/%forloop%/gi,d(a));if(b.shaderSource(h,i),b.compileShader(h),b.getShaderParameter(h,b.COMPILE_STATUS))break;a=a/2|0}return c&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").loseContext(),a};b.exports=g},{"pixi-gl-core":12}],95:[function(a,b,c){function d(a,b){return b=b||[],b[e.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA],b[e.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR],b[e.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b}var e=a("../../../const");b.exports=d},{"../../../const":43}],96:[function(a,b,c){function d(a,b){b=b||{},b[e.DRAW_MODES.POINTS]=a.POINTS,b[e.DRAW_MODES.LINES]=a.LINES,b[e.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,b[e.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,b[e.DRAW_MODES.TRIANGLES]=a.TRIANGLES,b[e.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,b[e.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN}var e=a("../../../const");b.exports=d},{"../../../const":43}],97:[function(a,b,c){function d(a){var b=a.getContextAttributes();b.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}b.exports=d},{}],98:[function(a,b,c){function d(a){g.call(this),this.anchor=new e.ObservablePoint(this.onAnchorUpdate,this),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=i.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=a||f.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1}var e=a("../math"),f=a("../textures/Texture"),g=a("../display/Container"),h=a("../utils"),i=a("../const"),j=new e.Point;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture.orig.width},set:function(a){var b=h.sign(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},height:{get:function(){return Math.abs(this.scale.y)*this.texture.orig.height},set:function(a){var b=h.sign(this.scale.y)||1;this.scale.y=b*a/this.texture.orig.height,this._height=a}},tint:{get:function(){return this._tint},set:function(a){this._tint=a,this._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}},texture:{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,this.cachedTint=16777215,this._textureID=-1,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}}}),d.prototype._onTextureUpdate=function(){this._textureID=-1,this._width&&(this.scale.x=h.sign(this.scale.x)*this._width/this.texture.orig.width),this._height&&(this.scale.y=h.sign(this.scale.y)*this._height/this.texture.orig.height)},d.prototype.onAnchorUpdate=function(){this._transformID=-1},d.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var a,b,c,d,e=this._texture,f=this.transform.worldTransform,g=f.a,h=f.b,i=f.c,j=f.d,k=f.tx,l=f.ty,m=this.vertexData,n=e.trim,o=e.orig;n?(b=n.x-this.anchor._x*o.width,a=b+n.width,d=n.y-this.anchor._y*o.height,c=d+n.height):(a=o.width*(1-this.anchor._x),b=o.width*-this.anchor._x,c=o.height*(1-this.anchor._y),d=o.height*-this.anchor._y),m[0]=g*b+i*d+k,m[1]=j*d+h*b+l,m[2]=g*a+i*d+k,m[3]=j*d+h*a+l,m[4]=g*a+i*c+k,m[5]=j*c+h*a+l,m[6]=g*b+i*c+k,m[7]=j*c+h*b+l}},d.prototype.calculateTrimmedVertices=function(){this.vertexTrimmedData||(this.vertexTrimmedData=new Float32Array(8));var a,b,c,d,e=this._texture,f=this.vertexTrimmedData,g=e.orig,h=this.transform.worldTransform,i=h.a,j=h.b,k=h.c,l=h.d,m=h.tx,n=h.ty;a=g.width*(1-this.anchor._x),b=g.width*-this.anchor._x,c=g.height*(1-this.anchor._y),d=g.height*-this.anchor._y,f[0]=i*b+k*d+m,f[1]=l*d+j*b+n,f[2]=i*a+k*d+m,f[3]=l*d+j*a+n,f[4]=i*a+k*c+m,f[5]=l*c+j*a+n,f[6]=i*b+k*c+m,f[7]=l*c+j*b+n},d.prototype._renderWebGL=function(a){this.calculateVertices(),a.setObjectRenderer(a.plugins.sprite),a.plugins.sprite.render(this)},d.prototype._renderCanvas=function(a){a.plugins.sprite.render(this)},d.prototype._calculateBounds=function(){var a=this._texture.trim,b=this._texture.orig;!a||a.width===b.width&&a.height===b.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},d.prototype.getLocalBounds=function(a){return 0===this.children.length?(this._bounds.minX=-this._texture.orig.width*this.anchor._x,this._bounds.minY=-this._texture.orig.height*this.anchor._y,this._bounds.maxX=this._texture.orig.width,this._bounds.maxY=this._texture.orig.height,a||(this._localBoundsRect||(this._localBoundsRect=new e.Rectangle),a=this._localBoundsRect),this._bounds.getRectangle(a)):g.prototype.getLocalBounds.call(this,a)},d.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,j);var b,c=this._texture.orig.width,d=this._texture.orig.height,e=-c*this.anchor.x;return j.x>e&&j.x<e+c&&(b=-d*this.anchor.y,j.y>b&&j.y<b+d)},d.prototype.destroy=function(a){g.prototype.destroy.call(this,a),this.anchor=null;var b="boolean"==typeof a?a:a&&a.texture;if(b){var c="boolean"==typeof a?a:a&&a.baseTexture;this._texture.destroy(!!c)}this._texture=null,this.shader=null},d.from=function(a){return new d(f.from(a))},d.fromFrame=function(a){var b=h.TextureCache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache');return new d(b)},d.fromImage=function(a,b,c){return new d(f.fromImage(a,b,c))}},{"../const":43,"../display/Container":45,"../math":67,"../textures/Texture":109,"../utils":116}],99:[function(a,b,c){function d(a){this.renderer=a}var e=a("../../renderers/canvas/CanvasRenderer"),f=a("../../const"),g=a("../../math"),h=new g.Matrix,i=a("./CanvasTinter");d.prototype.constructor=d,b.exports=d,e.registerPlugin("sprite",d),d.prototype.render=function(a){var b,c,d=a._texture,e=this.renderer,j=a.transform.worldTransform,k=d._frame.width,l=d._frame.height;if(!(d.orig.width<=0||d.orig.height<=0)&&d.baseTexture.source&&(e.setBlendMode(a.blendMode),d.valid)){e.context.globalAlpha=a.worldAlpha;var m=d.baseTexture.scaleMode===f.SCALE_MODES.LINEAR;e.smoothProperty&&e.context[e.smoothProperty]!==m&&(e.context[e.smoothProperty]=m),d.trim?(b=d.trim.width/2+d.trim.x-a.anchor.x*d.orig.width,c=d.trim.height/2+d.trim.y-a.anchor.y*d.orig.height):(b=(.5-a.anchor.x)*d.orig.width,c=(.5-a.anchor.y)*d.orig.height),d.rotate&&(j.copy(h),j=h,g.GroupD8.matrixAppendRotationInv(j,d.rotate,b,c),b=0,c=0),b-=k/2,c-=l/2,e.roundPixels?(e.context.setTransform(j.a,j.b,j.c,j.d,j.tx*e.resolution|0,j.ty*e.resolution|0),b=0|b,c=0|c):e.context.setTransform(j.a,j.b,j.c,j.d,j.tx*e.resolution,j.ty*e.resolution);var n=d.baseTexture.resolution;16777215!==a.tint?(a.cachedTint!==a.tint&&(a.cachedTint=a.tint,a.tintedTexture=i.getTintedTexture(a,a.tint)),e.context.drawImage(a.tintedTexture,0,0,k*n,l*n,b*e.resolution,c*e.resolution,k*e.resolution,l*e.resolution)):e.context.drawImage(d.baseTexture.source,d._frame.x*n,d._frame.y*n,k*n,l*n,b*e.resolution,c*e.resolution,k*e.resolution,l*e.resolution)}},d.prototype.destroy=function(){this.renderer=null}},{"../../const":43,"../../math":67,"../../renderers/canvas/CanvasRenderer":74,"./CanvasTinter":100}],100:[function(a,b,c){var d=a("../../utils"),e=a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),f=b.exports={getTintedTexture:function(a,b){var c=a.texture;b=f.roundColor(b);var d="#"+("00000"+(0|b).toString(16)).substr(-6);if(c.tintCache=c.tintCache||{},c.tintCache[d])return c.tintCache[d];var e=f.canvas||document.createElement("canvas");if(f.tintMethod(c,b,e),f.convertTintToImage){var g=new Image;g.src=e.toDataURL(),c.tintCache[d]=g}else c.tintCache[d]=e,f.canvas=null;return e},tintWithMultiply:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=e.width,c.height=e.height,d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithOverlay:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=e.width,c.height=e.height,d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithPerPixel:function(a,b,c){var e=c.getContext("2d"),f=a._frame.clone(),g=a.baseTexture.resolution;f.x*=g,f.y*=g,f.width*=g,f.height*=g,c.width=f.width,c.height=f.height,e.globalCompositeOperation="copy",e.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);for(var h=d.hex2rgb(b),i=h[0],j=h[1],k=h[2],l=e.getImageData(0,0,f.width,f.height),m=l.data,n=0;n<m.length;n+=4)m[n+0]*=i,m[n+1]*=j,m[n+2]*=k;e.putImageData(l,0,0)},roundColor:function(a){var b=f.cacheStepsPerColorChannel,c=d.hex2rgb(a);return c[0]=Math.min(255,c[0]/b*b),c[1]=Math.min(255,c[1]/b*b),c[2]=Math.min(255,c[2]/b*b),d.rgb2hex(c)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:e(),tintMethod:0};f.tintMethod=f.canUseMultiply?f.tintWithMultiply:f.tintWithPerPixel},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":77,"../../utils":116}],101:[function(a,b,c){var d=function(a){this.vertices=new ArrayBuffer(a),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)};b.exports=d,d.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null}},{}],102:[function(a,b,c){function d(a){e.call(this,a),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=k.SPRITE_BATCH_SIZE,this.buffers=[];for(var b=1;b<=m.nextPow2(this.size);b*=2){var c=4*b*this.vertByteSize;this.buffers.push(new j(c))}this.indices=g(this.size),this.shaders=null,this.currentIndex=0,n=0,this.groups=[];for(var d=0;d<this.size;d++)this.groups[d]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};this.sprites=[],this.vertexBuffers=[],this.vaos=[],this.vaoMax=2,this.vertexCount=0,this.renderer.on("prerender",this.onPrerender,this)}var e=a("../../renderers/webgl/utils/ObjectRenderer"),f=a("../../renderers/webgl/WebGLRenderer"),g=a("../../utils/createIndicesForQuads"),h=a("./generateMultiTextureShader"),i=a("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),j=a("./BatchBuffer"),k=a("../../const"),l=a("pixi-gl-core"),m=a("bit-twiddle"),n=0;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,f.registerPlugin("sprite",d),d.prototype.onContextChange=function(){var a=this.renderer.gl;this.MAX_TEXTURES=Math.min(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),k.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=i(this.MAX_TEXTURES,a),this.shaders=new Array(this.MAX_TEXTURES),this.shaders[0]=h(a,1),this.shaders[1]=h(a,2),this.indexBuffer=l.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW);for(var b=this.shaders[1],c=0;c<this.vaoMax;c++)this.vertexBuffers[c]=l.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),this.vaos[c]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[c],b.attributes.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[c],b.attributes.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[c],b.attributes.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[c],b.attributes.aTextureId,a.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0],this.currentBlendMode=99999},d.prototype.onPrerender=function(){this.vertexCount=0},d.prototype.render=function(a){this.currentIndex>=this.size&&this.flush(),a.texture._uvs&&(this.sprites[this.currentIndex++]=a)},d.prototype.flush=function(){if(0!==this.currentIndex){var a,b,c,d,e,f,g,i=this.renderer.gl,j=m.nextPow2(this.currentIndex),k=m.log2(j),o=this.buffers[k],p=this.sprites,q=this.groups,r=o.float32View,s=o.uint32View,t=0,u=1,v=0,w=q[0],x=p[0].blendMode;w.textureCount=0,w.start=0,w.blend=x,n++;for(var y=0;y<this.currentIndex;y++){var z=p[y];if(a=z._texture.baseTexture,x!==z.blendMode&&(x=z.blendMode,b=null,v=this.MAX_TEXTURES,n++),b!==a&&(b=a,a._enabled!==n&&(v===this.MAX_TEXTURES&&(n++,v=0,w.size=y-w.start,w=q[u++],w.textureCount=0,w.blend=x,w.start=y),a._enabled=n,a._id=v,w.textures[w.textureCount++]=a,v++)),c=z.vertexData,d=z._tintRGB+(255*z.worldAlpha<<24),e=z._texture._uvs.uvsUint32,f=a._id,this.renderer.roundPixels){var A=this.renderer.resolution;r[t]=(c[0]*A|0)/A,r[t+1]=(c[1]*A|0)/A,r[t+5]=(c[2]*A|0)/A,r[t+6]=(c[3]*A|0)/A,r[t+10]=(c[4]*A|0)/A,r[t+11]=(c[5]*A|0)/A,r[t+15]=(c[6]*A|0)/A,r[t+16]=(c[7]*A|0)/A}else r[t]=c[0],r[t+1]=c[1],r[t+5]=c[2],r[t+6]=c[3],r[t+10]=c[4],r[t+11]=c[5],r[t+15]=c[6],r[t+16]=c[7];s[t+2]=e[0],s[t+7]=e[1],s[t+12]=e[2],s[t+17]=e[3],s[t+3]=s[t+8]=s[t+13]=s[t+18]=d,r[t+4]=r[t+9]=r[t+14]=r[t+19]=f,t+=20}for(w.size=y-w.start,this.vertexCount++,this.vaoMax<=this.vertexCount&&(this.vaoMax++,g=this.shaders[1],this.vertexBuffers[this.vertexCount]=l.GLBuffer.createVertexBuffer(i,null,i.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],g.attributes.aVertexPosition,i.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],g.attributes.aTextureCoord,i.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],g.attributes.aColor,i.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[this.vertexCount],g.attributes.aTextureId,i.FLOAT,!1,this.vertByteSize,16)),this.vertexBuffers[this.vertexCount].upload(o.vertices,0),this.vao=this.vaos[this.vertexCount].bind(),y=0;y<u;y++){var B=q[y],C=B.textureCount;g=this.shaders[C-1],g||(g=this.shaders[C-1]=h(i,C)),this.renderer.bindShader(g);for(var D=0;D<C;D++)this.renderer.bindTexture(B.textures[D],D);this.renderer.state.setBlendMode(B.blend),i.drawElements(i.TRIANGLES,6*B.size,i.UNSIGNED_SHORT,6*B.start*2)}this.currentIndex=0}},d.prototype.start=function(){},d.prototype.stop=function(){this.flush(),this.vao.unbind()},d.prototype.destroy=function(){for(var a=0;a<this.vaoMax;a++)this.vertexBuffers[a].destroy(),this.vaos[a].destroy();for(this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),a=0;a<this.shaders.length;a++)this.shaders[a]&&this.shaders[a].destroy();for(this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null,a=0;a<this.buffers.length;a++)this.buffers[a].destroy()}},{"../../const":43,"../../renderers/webgl/WebGLRenderer":81,"../../renderers/webgl/utils/ObjectRenderer":91,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":94,"../../utils/createIndicesForQuads":114,"./BatchBuffer":101,"./generateMultiTextureShader":103,"bit-twiddle":1,"pixi-gl-core":12}],103:[function(a,b,c){function d(a,b){var c="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vTextureId = aTextureId;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",d=g;d=d.replace(/%count%/gi,b),d=d.replace(/%forloop%/gi,e(b));for(var h=new f(a,c,d,{aVertexPosition:3,aColor:2,aTextureCoord:1,aTextureId:0}),i=[],j=0;j<b;j++)i[j]=j;return h.bind(),h.uniforms.uSamplers=i,h}function e(a){var b="";b+="\n",b+="\n";for(var c=0;c<a;c++)c>0&&(b+="\nelse "),c<a-1&&(b+="if(textureId == "+c+".0)"),b+="\n{",b+="\n\tcolor = texture2D(uSamplers["+c+"], vTextureCoord);",b+="\n}";return b+="\n",b+="\n"}var f=a("../../Shader"),g=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n");b.exports=d},{"../../Shader":42}],104:[function(a,b,c){function d(a,b){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i.RESOLUTION,this._text=null,this._style=null,this._styleListener=null,this._font="";var c=f.fromCanvas(this.canvas);c.orig=new g.Rectangle,c.trim=new g.Rectangle,e.call(this,c),this.text=a,this.style=b,this.localStyleID=-1}var e=a("../sprites/Sprite"),f=a("../textures/Texture"),g=a("../math"),h=a("../utils"),i=a("../const"),j=a("./TextStyle"),k={texture:!0,children:!1,baseTexture:!0};d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.fontPropertiesCache={},d.fontPropertiesCanvas=document.createElement("canvas"),d.fontPropertiesContext=d.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(d.prototype,{width:{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this.texture.orig.width},set:function(a){this.updateText(!0);var b=h.sign(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},height:{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){this.updateText(!0);var b=h.sign(this.scale.y)||1;this.scale.y=b*a/this.texture.orig.height,this._height=a}},style:{get:function(){return this._style},set:function(a){a=a||{},a instanceof j?this._style=a:this._style=new j(a),this.localStyleID=-1,this.dirty=!0}},text:{get:function(){return this._text},set:function(a){a=a||" ",a=a.toString(),this._text!==a&&(this._text=a,this.dirty=!0)}}}),d.prototype.updateText=function(a){var b=this._style;if(this.localStyleID!==b.styleID&&(this.dirty=!0,this.localStyleID=b.styleID),this.dirty||!a){var c="number"==typeof b.fontSize?b.fontSize+"px":b.fontSize;this._font=b.fontStyle+" "+b.fontVariant+" "+b.fontWeight+" "+c+" "+b.fontFamily,this.context.font=this._font;var d,e=b.wordWrap?this.wordWrap(this._text):this._text,f=e.split(/(?:\r\n|\r|\n)/),g=new Array(f.length),h=0,i=this.determineFontProperties(this._font);for(d=0;d<f.length;d++){var j=this.context.measureText(f[d]).width+(f[d].length-1)*b.letterSpacing;g[d]=j,h=Math.max(h,j)}var k=h+b.strokeThickness;b.dropShadow&&(k+=b.dropShadowDistance),k+=2*b.padding,this.canvas.width=Math.ceil((k+this.context.lineWidth)*this.resolution);var l=this.style.lineHeight||i.fontSize+b.strokeThickness,m=Math.max(l,i.fontSize+b.strokeThickness)+(f.length-1)*l;b.dropShadow&&(m+=b.dropShadowDistance),this.canvas.height=Math.ceil((m+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=b.stroke,this.context.lineWidth=b.strokeThickness,this.context.textBaseline=b.textBaseline,this.context.lineJoin=b.lineJoin,this.context.miterLimit=b.miterLimit;var n,o;if(b.dropShadow){b.dropShadowBlur>0?(this.context.shadowColor=b.dropShadowColor,this.context.shadowBlur=b.dropShadowBlur):this.context.fillStyle=b.dropShadowColor;var p=Math.cos(b.dropShadowAngle)*b.dropShadowDistance,q=Math.sin(b.dropShadowAngle)*b.dropShadowDistance;for(d=0;d<f.length;d++)n=b.strokeThickness/2,o=b.strokeThickness/2+d*l+i.ascent,"right"===b.align?n+=h-g[d]:"center"===b.align&&(n+=(h-g[d])/2),b.fill&&(this.drawLetterSpacing(f[d],n+p+b.padding,o+q+b.padding),b.stroke&&b.strokeThickness&&(this.context.strokeStyle=b.dropShadowColor,this.drawLetterSpacing(f[d],n+p+b.padding,o+q+b.padding,!0),this.context.strokeStyle=b.stroke))}for(this.context.fillStyle=this._generateFillStyle(b,f),d=0;d<f.length;d++)n=b.strokeThickness/2,o=b.strokeThickness/2+d*l+i.ascent,"right"===b.align?n+=h-g[d]:"center"===b.align&&(n+=(h-g[d])/2),b.stroke&&b.strokeThickness&&this.drawLetterSpacing(f[d],n+b.padding,o+b.padding,!0),b.fill&&this.drawLetterSpacing(f[d],n+b.padding,o+b.padding);this.updateTexture()}},d.prototype.drawLetterSpacing=function(a,b,c,d){var e=this._style,f=e.letterSpacing;if(0===f)return void(d?this.context.strokeText(a,b,c):this.context.fillText(a,b,c));for(var g,h=String.prototype.split.call(a,""),i=0,j=b;i<a.length;)g=h[i++],d?this.context.strokeText(g,j,c):this.context.fillText(g,j,c),j+=this.context.measureText(g).width+f},d.prototype.updateTexture=function(){var a=this._texture,b=this._style;a.baseTexture.hasLoaded=!0,a.baseTexture.resolution=this.resolution,a.baseTexture.realWidth=this.canvas.width,a.baseTexture.realHeight=this.canvas.height,a.baseTexture.width=this.canvas.width/this.resolution,a.baseTexture.height=this.canvas.height/this.resolution,a.trim.width=a._frame.width=this.canvas.width/this.resolution,a.trim.height=a._frame.height=this.canvas.height/this.resolution,a.trim.x=-b.padding,a.trim.y=-b.padding,a.orig.width=a._frame.width-2*b.padding,a.orig.height=a._frame.height-2*b.padding,this._onTextureUpdate(),a.baseTexture.emit("update",a.baseTexture),this.dirty=!1},d.prototype.renderWebGL=function(a){this.resolution!==a.resolution&&(this.resolution=a.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,a)},d.prototype._renderCanvas=function(a){this.resolution!==a.resolution&&(this.resolution=a.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,a)},d.prototype.determineFontProperties=function(a){var b=d.fontPropertiesCache[a];if(!b){b={};var c=d.fontPropertiesCanvas,e=d.fontPropertiesContext;e.font=a;var f=Math.ceil(e.measureText("|MÉq").width),g=Math.ceil(e.measureText("M").width),h=2*g;g=1.4*g|0,c.width=f,c.height=h,e.fillStyle="#f00",e.fillRect(0,0,f,h),e.font=a,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText("|MÉq",0,g);var i,j,k=e.getImageData(0,0,f,h).data,l=k.length,m=4*f,n=0,o=!1;for(i=0;i<g;i++){for(j=0;j<m;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n+=m}for(b.ascent=g-i,n=l-m,o=!1,i=h;i>g;i--){for(j=0;j<m;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n-=m}b.descent=i-g,b.fontSize=b.ascent+b.descent,d.fontPropertiesCache[a]=b}return b},d.prototype.wordWrap=function(a){for(var b="",c=a.split("\n"),d=this._style.wordWrapWidth,e=0;e<c.length;e++){for(var f=d,g=c[e].split(" "),h=0;h<g.length;h++){var i=this.context.measureText(g[h]).width;if(this._style.breakWords&&i>d)for(var j=g[h].split(""),k=0;k<j.length;k++){var l=this.context.measureText(j[k]).width;l>f?(b+="\n"+j[k],f=d-l):(0===k&&(b+=" "),b+=j[k],f-=l)}else{var m=i+this.context.measureText(" ").width;0===h||m>f?(h>0&&(b+="\n"),b+=g[h],f=d-i):(f-=m,b+=" "+g[h])}}e<c.length-1&&(b+="\n")}return b},d.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},d.prototype._onStyleChange=function(){this.dirty=!0},d.prototype._generateFillStyle=function(a,b){if(Array.isArray(a.fill)){if(navigator.isCocoonJS)return a.fill[0];var c,d,e,f,g,h=this.canvas.width/this.resolution,j=this.canvas.height/this.resolution;if(a.fillGradientType===i.TEXT_GRADIENT.LINEAR_VERTICAL)for(d=this.context.createLinearGradient(h/2,0,h/2,j),e=(a.fill.length+1)*b.length,f=0,c=0;c<b.length;c++){f+=1;for(var k=0;k<a.fill.length;k++)g=f/e,d.addColorStop(g,a.fill[k]),f++}else for(d=this.context.createLinearGradient(0,j/2,h,j/2),e=a.fill.length+1,f=1,c=0;c<a.fill.length;c++)g=f/e,d.addColorStop(g,a.fill[c]),f++;return d}return a.fill},d.prototype.destroy=function(a){"boolean"==typeof a&&(a={children:a}),a=Object.assign({},k,a),e.prototype.destroy.call(this,a),this.context=null,this.canvas=null,this._style=null}},{"../const":43,"../math":67,"../sprites/Sprite":98,"../textures/Texture":109,"../utils":116,"./TextStyle":105}],105:[function(a,b,c){function d(a){this.styleID=0,Object.assign(this,this._defaults,a)}function e(a){if("number"==typeof a)return g.hex2string(a);if(Array.isArray(a))for(var b=0;b<a.length;++b)"number"==typeof a[b]&&(a[b]=g.hex2string(a[b]));return a}var f=a("../const"),g=a("../utils");d.prototype.constructor=d,b.exports=d,d.prototype._defaults={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:f.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",wordWrap:!1,wordWrapWidth:100},d.prototype.clone=function(){var a={};for(var b in this._defaults)a[b]=this[b];return new d(a)},d.prototype.reset=function(){Object.assign(this,this._defaults)},Object.defineProperties(d.prototype,{align:{get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.styleID++)}},breakWords:{get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)}},dropShadow:{get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)}},dropShadowAngle:{get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)}},dropShadowBlur:{get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.styleID++)}},dropShadowColor:{get:function(){return this._dropShadowColor},set:function(a){var b=e(a);this._dropShadowColor!==b&&(this._dropShadowColor=b,this.styleID++)}},dropShadowDistance:{get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.styleID++)}},fill:{get:function(){return this._fill},set:function(a){var b=e(a);this._fill!==b&&(this._fill=b,this.styleID++)}},fillGradientType:{get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)}},fontFamily:{get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.styleID++)}},fontSize:{get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)}},fontStyle:{get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)}},fontVariant:{get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)}},fontWeight:{get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.styleID++)}},letterSpacing:{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)}},lineHeight:{get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.styleID++)}},lineJoin:{get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.styleID++)}},miterLimit:{get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)}},padding:{get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)}},stroke:{get:function(){return this._stroke},set:function(a){var b=e(a);this._stroke!==b&&(this._stroke=b,this.styleID++)}},strokeThickness:{get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.styleID++)}},textBaseline:{get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)}},wordWrap:{get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.styleID++)}},wordWrapWidth:{get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)}}})},{"../const":43,"../utils":116}],106:[function(a,b,c){function d(a,b,c,d){e.call(this,null,c),this.resolution=d||f.RESOLUTION,this.width=a||100,this.height=b||100,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.scaleMode=c||f.SCALE_MODES.DEFAULT,this.hasLoaded=!0,this._glRenderTargets=[],this._canvasRenderTarget=null,this.valid=!1;
}var e=a("./BaseTexture"),f=a("../const");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.resize=function(a,b){a===this.width&&b===this.height||(this.valid=a>0&&b>0,this.width=a,this.height=b,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},d.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null}},{"../const":43,"./BaseTexture":107}],107:[function(a,b,c){function d(a,b,c){g.call(this),this.uid=e.uid(),this.touched=0,this.resolution=c||f.RESOLUTION,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=b||f.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=f.MIPMAP_TEXTURES,this.wrapMode=f.WRAP_MODES.DEFAULT,this._glTextures=[],this._enabled=0,this._id=0,a&&this.loadSource(a)}var e=a("../utils"),f=a("../const"),g=a("eventemitter3"),h=a("../utils/determineCrossOrigin"),i=a("bit-twiddle");d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=i.isPow2(this.realWidth)&&i.isPow2(this.realHeight),this.emit("update",this)},d.prototype.loadSource=function(a){var b=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,b&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=a,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!a.getContext){this.isLoading=!0;var c=this;a.onload=function(){a.onload=null,a.onerror=null,c.isLoading&&(c.isLoading=!1,c._sourceLoaded(),c.emit("loaded",c))},a.onerror=function(){a.onload=null,a.onerror=null,c.isLoading&&(c.isLoading=!1,c.emit("error",c))},a.complete&&a.src&&(this.isLoading=!1,a.onload=null,a.onerror=null,a.width&&a.height?(this._sourceLoaded(),b&&this.emit("loaded",this)):b&&this.emit("error",this))}},d.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},d.prototype.destroy=function(){this.imageUrl?(delete e.BaseTextureCache[this.imageUrl],delete e.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete e.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},d.prototype.dispose=function(){this.emit("dispose",this)},d.prototype.updateSourceImage=function(a){this.source.src=a,this.loadSource(this.source)},d.fromImage=function(a,b,c){var f=e.BaseTextureCache[a];if(!f){var g=new Image;void 0===b&&0!==a.indexOf("data:")&&(g.crossOrigin=h(a)),f=new d(g,c),f.imageUrl=a,g.src=a,e.BaseTextureCache[a]=f,f.resolution=e.getResolutionOfUrl(a)}return f},d.fromCanvas=function(a,b){a._pixiId||(a._pixiId="canvas_"+e.uid());var c=e.BaseTextureCache[a._pixiId];return c||(c=new d(a,b),e.BaseTextureCache[a._pixiId]=c),c}},{"../const":43,"../utils":116,"../utils/determineCrossOrigin":115,"bit-twiddle":1,eventemitter3:3}],108:[function(a,b,c){function d(a,b){if(this.legacyRenderer=null,!(a instanceof e)){var c=arguments[1],d=arguments[2],g=arguments[3]||0,h=arguments[4]||1;console.warn("v4 RenderTexture now expects a new BaseRenderTexture. Please use RenderTexture.create("+c+", "+d+")"),this.legacyRenderer=arguments[0],b=null,a=new e(c,d,g,h)}f.call(this,a,b),this.valid=!0,this._updateUvs()}var e=a("./BaseRenderTexture"),f=a("./Texture");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.resize=function(a,b,c){this.valid=a>0&&b>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=b,c||this.baseTexture.resize(a,b),this._updateUvs()},d.create=function(a,b,c,f){return new d(new e(a,b,c,f))}},{"./BaseRenderTexture":106,"./Texture":109}],109:[function(a,b,c){function d(a,b,c,e,f){if(h.call(this),this.noFrame=!1,b||(this.noFrame=!0,b=new i.Rectangle(0,0,1,1)),a instanceof d&&(a=a.baseTexture),this.baseTexture=a,this._frame=b,this.trim=e,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.orig=c||b,this._rotate=+(f||0),f===!0)this._rotate=2;else if(this._rotate%2!==0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";a.hasLoaded?(this.noFrame&&(b=new i.Rectangle(0,0,a.width,a.height),a.on("update",this.onBaseTextureUpdated,this)),this.frame=b):a.once("loaded",this.onBaseTextureLoaded,this),this._updateID=0}var e=a("./BaseTexture"),f=a("./VideoBaseTexture"),g=a("./TextureUvs"),h=a("eventemitter3"),i=a("../math"),j=a("../utils");d.prototype=Object.create(h.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{frame:{get:function(){return this._frame},set:function(a){if(this._frame=a,this.noFrame=!1,a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=a),this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(a){this._rotate=a,this.valid&&this._updateUvs()}},width:{get:function(){return this.orig?this.orig.width:0}},height:{get:function(){return this.orig?this.orig.height:0}}}),d.prototype.update=function(){this.baseTexture.update()},d.prototype.onBaseTextureLoaded=function(a){this._updateID++,this.noFrame?this.frame=new i.Rectangle(0,0,a.width,a.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},d.prototype.onBaseTextureUpdated=function(a){this._updateID++,this._frame.width=a.width,this._frame.height=a.height,this.emit("update",this)},d.prototype.destroy=function(a){this.baseTexture&&(a&&(j.TextureCache[this.baseTexture.imageUrl]&&delete j.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},d.prototype.clone=function(){return new d(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},d.prototype._updateUvs=function(){this._uvs||(this._uvs=new g),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},d.fromImage=function(a,b,c){var f=j.TextureCache[a];return f||(f=new d(e.fromImage(a,b,c)),j.TextureCache[a]=f),f},d.fromFrame=function(a){var b=j.TextureCache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache');return b},d.fromCanvas=function(a,b){return new d(e.fromCanvas(a,b))},d.fromVideo=function(a,b){return"string"==typeof a?d.fromVideoUrl(a,b):new d(f.fromVideo(a,b))},d.fromVideoUrl=function(a,b){return new d(f.fromUrl(a,b))},d.from=function(a){if("string"==typeof a){var b=j.TextureCache[a];if(!b){var c=null!==a.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return c?d.fromVideoUrl(a):d.fromImage(a)}return b}return a instanceof HTMLCanvasElement?d.fromCanvas(a):a instanceof HTMLVideoElement?d.fromVideo(a):a instanceof e?new d(e):a},d.addTextureToCache=function(a,b){j.TextureCache[b]=a},d.removeTextureFromCache=function(a){var b=j.TextureCache[a];return delete j.TextureCache[a],delete j.BaseTextureCache[a],b},d.EMPTY=new d(new e),d.EMPTY.destroy=function(){},d.EMPTY.on=function(){},d.EMPTY.once=function(){},d.EMPTY.emit=function(){}},{"../math":67,"../utils":116,"./BaseTexture":107,"./TextureUvs":110,"./VideoBaseTexture":111,eventemitter3:3}],110:[function(a,b,c){function d(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}b.exports=d;var e=a("../math/GroupD8");d.prototype.set=function(a,b,c){var d=b.width,f=b.height;if(c){var g=a.width/2/d,h=a.height/2/f,i=a.x/d+g,j=a.y/f+h;c=e.add(c,e.NW),this.x0=i+g*e.uX(c),this.y0=j+h*e.uY(c),c=e.add(c,2),this.x1=i+g*e.uX(c),this.y1=j+h*e.uY(c),c=e.add(c,2),this.x2=i+g*e.uX(c),this.y2=j+h*e.uY(c),c=e.add(c,2),this.x3=i+g*e.uX(c),this.y3=j+h*e.uY(c)}else this.x0=a.x/d,this.y0=a.y/f,this.x1=(a.x+a.width)/d,this.y1=a.y/f,this.x2=(a.x+a.width)/d,this.y2=(a.y+a.height)/f,this.x3=a.x/d,this.y3=(a.y+a.height)/f;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535}},{"../math/GroupD8":63}],111:[function(a,b,c){function d(a,b){if(!a)throw new Error("No video source element specified.");(a.readyState===a.HAVE_ENOUGH_DATA||a.readyState===a.HAVE_FUTURE_DATA)&&a.width&&a.height&&(a.complete=!0),f.call(this,a,b),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),a.complete||(a.addEventListener("canplay",this._onCanPlay),a.addEventListener("canplaythrough",this._onCanPlay),a.addEventListener("play",this._onPlayStart.bind(this)),a.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function e(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var c=document.createElement("source");return c.src=a,c.type=b,c}var f=a("./BaseTexture"),g=a("../utils");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},d.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},d.prototype._onPlayStop=function(){this.autoUpdate=!1},d.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},d.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete g.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),f.prototype.destroy.call(this)},d.fromVideo=function(a,b){a._pixiId||(a._pixiId="video_"+g.uid());var c=g.BaseTextureCache[a._pixiId];return c||(c=new d(a,b),g.BaseTextureCache[a._pixiId]=c),c},d.fromUrl=function(a,b){var c=document.createElement("video");if(Array.isArray(a))for(var f=0;f<a.length;++f)c.appendChild(e(a[f].src||a[f],a[f].mime));else c.appendChild(e(a.src||a,a.mime));return c.load(),c.play(),d.fromVideo(c,b)},d.fromUrls=d.fromUrl},{"../utils":116,"./BaseTexture":107}],112:[function(a,b,c){function d(){var a=this;this._tick=function(b){a._requestId=null,a.started&&(a.update(b),a.started&&null===a._requestId&&a._emitter.listeners(g,!0)&&(a._requestId=requestAnimationFrame(a._tick)))},this._emitter=new f,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/e.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var e=a("../const"),f=a("eventemitter3"),g="tick";Object.defineProperties(d.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(a){var b=Math.min(Math.max(0,a)/1e3,e.TARGET_FPMS);this._maxElapsedMS=1/b}}}),d.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(g,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},d.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},d.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},d.prototype.add=function(a,b){return this._emitter.on(g,a,b),this._startIfPossible(),this},d.prototype.addOnce=function(a,b){return this._emitter.once(g,a,b),this._startIfPossible(),this},d.prototype.remove=function(a,b){return this._emitter.off(g,a,b),this._emitter.listeners(g,!0)||this._cancelIfNeeded(),this},d.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},d.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},d.prototype.update=function(a){var b;a=a||performance.now(),a>this.lastTime?(b=this.elapsedMS=a-this.lastTime,b>this._maxElapsedMS&&(b=this._maxElapsedMS),this.deltaTime=b*e.TARGET_FPMS*this.speed,this._emitter.emit(g,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=a},b.exports=d},{"../const":43,eventemitter3:3}],113:[function(a,b,c){var d=a("./Ticker"),e=new d;e.autoStart=!0,b.exports={shared:e,Ticker:d}},{"./Ticker":112}],114:[function(a,b,c){var d=function(a){for(var b=6*a,c=new Uint16Array(b),d=0,e=0;d<b;d+=6,e+=4)c[d+0]=e+0,c[d+1]=e+1,c[d+2]=e+2,c[d+3]=e+0,c[d+4]=e+2,c[d+5]=e+3;return c};b.exports=d},{}],115:[function(a,b,c){var d,e=a("url"),f=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location,d||(d=document.createElement("a")),d.href=a,a=e.parse(d.href);var c=!a.port&&""===b.port||a.port===b.port;return a.hostname===b.hostname&&c&&a.protocol===b.protocol?"":"anonymous"};b.exports=f},{url:28}],116:[function(a,b,c){var d=a("../const"),e=b.exports={_uid:0,_saidHello:!1,EventEmitter:a("eventemitter3"),pluginTarget:a("./pluginTarget"),uid:function(){return++e._uid},hex2rgb:function(a,b){return b=b||[],b[0]=(a>>16&255)/255,b[1]=(a>>8&255)/255,b[2]=(255&a)/255,b},hex2string:function(a){return a=a.toString(16),a="000000".substr(0,6-a.length)+a,"#"+a},rgb2hex:function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},getResolutionOfUrl:function(a){var b=d.RETINA_PREFIX.exec(a);return b?parseFloat(b[1]):1},sayHello:function(a){if(!e._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["\n %c %c %c Pixi.js "+d.VERSION+" - ✰ "+a+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,b)}else window.console&&window.console.log("Pixi.js "+d.VERSION+" - "+a+" - http://www.pixijs.com/");e._saidHello=!0}},isWebGLSupported:function(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var b=document.createElement("canvas"),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a),d=!(!c||!c.getContextAttributes().stencil);if(c){var e=c.getExtension("WEBGL_lose_context");e&&e.loseContext()}return c=null,d}catch(a){return!1}},sign:function(a){return a?a<0?-1:1:0},removeItems:function(a,b,c){var d=a.length;if(!(b>=d||0===c)){c=b+c>d?d-b:c;for(var e=b,f=d-c;e<f;++e)a[e]=a[e+c];a.length=f}},TextureCache:{},BaseTextureCache:{}}},{"../const":43,"./pluginTarget":118,eventemitter3:3}],117:[function(a,b,c){var d=a("ismobilejs"),e=function(a){return d.tablet||d.phone?2:a};b.exports=e},{ismobilejs:4}],118:[function(a,b,c){function d(a){a.__plugins={},a.registerPlugin=function(b,c){a.__plugins[b]=c},a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var b in a.__plugins)this.plugins[b]=new a.__plugins[b](this)},a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),this.plugins[a]=null;this.plugins=null}}b.exports={mixin:function(a){d(a)}}},{}],119:[function(a,b,c){var d=a("./core"),e=a("./mesh"),f=a("./particles"),g=a("./extras"),h=a("./filters");d.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},d.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(d,{Stage:{get:function(){return d.Container}},DisplayObjectContainer:{get:function(){return d.Container}},Strip:{get:function(){return e.Mesh}},Rope:{get:function(){return e.Rope}},ParticleContainer:{get:function(){return f.ParticleContainer}},MovieClip:{get:function(){return g.MovieClip}},TilingSprite:{get:function(){return g.TilingSprite}},BitmapText:{get:function(){return g.BitmapText}},blendModes:{get:function(){return d.BLEND_MODES}},scaleModes:{get:function(){return d.SCALE_MODES}},BaseTextureCache:{get:function(){return d.utils.BaseTextureCache}},TextureCache:{get:function(){return d.utils.TextureCache}},math:{get:function(){return d}},AbstractFilter:{get:function(){return d.Filter}},TransformManual:{get:function(){return d.TransformBase}}}),d.DisplayObject.prototype.generateTexture=function(a,b,c){return a.generateTexture(this,b,c)},d.Graphics.prototype.generateTexture=function(a,b){return this.generateCanvasTexture(a,b)},d.RenderTexture.prototype.render=function(a,b,c,d){this.legacyRenderer.render(a,this,c,b,!d)},d.RenderTexture.prototype.getImage=function(a){return this.legacyRenderer.extract.image(a)},d.RenderTexture.prototype.getBase64=function(a){return this.legacyRenderer.extract.base64(a)},d.RenderTexture.prototype.getCanvas=function(a){return this.legacyRenderer.extract.canvas(a)},d.RenderTexture.prototype.getPixels=function(a){return this.legacyRenderer.pixels(a)},d.Sprite.prototype.setTexture=function(a){this.texture=a},g.BitmapText.prototype.setText=function(a){this.text=a},d.Text.prototype.setText=function(a){this.text=a},d.Text.prototype.setStyle=function(a){this.style=a},Object.defineProperties(d.TextStyle.prototype,{font:{get:function(){var a="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+a+" "+this._fontFamily},set:function(a){a.indexOf("italic")>1?this._fontStyle="italic":a.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",a.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var b,c=a.split(" "),d=-1;for(this._fontSize=26,b=0;b<c.length;++b)if(c[b].match(/(px|pt|em|%)/)){d=b,this._fontSize=c[b];break}for(this._fontWeight="normal",b=0;b<d;++b)if(c[b].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=c[b];break}if(d>-1&&d<c.length-1){for(this._fontFamily="",b=d+1;b<c.length;++b)this._fontFamily+=c[b]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),d.Texture.prototype.setFrame=function(a){this.frame=a},Object.defineProperties(h,{AbstractFilter:{get:function(){return d.AbstractFilter}},SpriteMaskFilter:{get:function(){return d.SpriteMaskFilter}}}),d.utils.uuid=function(){return d.utils.uid()},d.utils.canUseNewCanvasBlendModes=function(){return d.CanvasTinter.canUseMultiply}},{"./core":62,"./extras":129,"./filters":140,"./mesh":156,"./particles":159}],120:[function(a,b,c){function d(a){this.renderer=a,a.extract=this}var e=a("../../core"),f=new e.Rectangle;d.prototype.constructor=d,b.exports=d,d.prototype.image=function(a){var b=new Image;return b.src=this.base64(a),b},d.prototype.base64=function(a){return this.canvas(a).toDataURL()},d.prototype.canvas=function(a){var b,c,d,g,h=this.renderer;a&&(g=a instanceof e.RenderTexture?a:h.generateTexture(a)),g?(b=g.baseTexture._canvasRenderTarget.context,c=g.baseTexture._canvasRenderTarget.resolution,d=g.frame):(b=h.rootContext,c=h.rootResolution,d=f,d.width=this.renderer.width,d.height=this.renderer.height);var i=d.width*c,j=d.height*c,k=new e.CanvasRenderTarget(i,j),l=b.getImageData(d.x*c,d.y*c,i,j);return k.context.putImageData(l,0,0),k.canvas},d.prototype.pixels=function(a){var b,c,d,g,h=this.renderer;return a&&(g=a instanceof e.RenderTexture?a:h.generateTexture(a)),g?(b=g.baseTexture._canvasRenderTarget.context,c=g.baseTexture._canvasRenderTarget.resolution,d=g.frame):(b=h.rootContext,c=h.rootResolution,d=f,d.width=h.width,d.height=h.height),b.getImageData(0,0,d.width*c,d.height*c).data},d.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.CanvasRenderer.registerPlugin("extract",d)},{"../../core":62}],121:[function(a,b,c){b.exports={webGL:a("./webgl/WebGLExtract"),canvas:a("./canvas/CanvasExtract")}},{"./canvas/CanvasExtract":120,"./webgl/WebGLExtract":122}],122:[function(a,b,c){function d(a){this.renderer=a,a.extract=this}var e=a("../../core"),f=new e.Rectangle;d.prototype.constructor=d,b.exports=d,d.prototype.image=function(a){var b=new Image;return b.src=this.base64(a),b},d.prototype.base64=function(a){return this.canvas(a).toDataURL()},d.prototype.canvas=function(a){var b,c,d,g,h=this.renderer,i=!1;a&&(g=a instanceof e.RenderTexture?a:this.renderer.generateTexture(a)),g?(b=g.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],c=b.resolution,d=g.frame,i=!1):(b=this.renderer.rootRenderTarget,c=b.resolution,i=!0,d=f,d.width=b.size.width,d.height=b.size.height);var j=d.width*c,k=d.height*c,l=new e.CanvasRenderTarget(j,k);if(b){h.bindRenderTarget(b);var m=new Uint8Array(4*j*k),n=h.gl;n.readPixels(d.x*c,d.y*c,j,k,n.RGBA,n.UNSIGNED_BYTE,m);var o=l.context.getImageData(0,0,j,k);o.data.set(m),l.context.putImageData(o,0,0),i&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-k))}return l.canvas},d.prototype.pixels=function(a){var b,c,d,g,h=this.renderer;a&&(g=a instanceof e.RenderTexture?a:this.renderer.generateTexture(a)),g?(b=g.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],c=b.resolution,d=g.frame):(b=this.renderer.rootRenderTarget,c=b.resolution,d=f,d.width=b.size.width,d.height=b.size.height);var i=d.width*c,j=d.height*c,k=new Uint8Array(4*i*j);if(b){h.bindRenderTarget(b);var l=h.gl;l.readPixels(d.x*c,d.y*c,i,j,l.RGBA,l.UNSIGNED_BYTE,k)}return k},d.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.WebGLRenderer.registerPlugin("extract",d)},{"../../core":62}],123:[function(a,b,c){function d(a,b){e.Container.call(this),b=b||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==b.tint?b.tint:16777215,align:b.align||"left",name:null,size:0},this.font=b.font,this._text=a,this.maxWidth=0,this.maxLineHeight=0,this._anchor=new f(this.makeDirty,this,0,0),this.dirty=!1,this.updateText()}var e=a("../core"),f=a("../core/math/ObservablePoint");d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{tint:{get:function(){return this._font.tint},set:function(a){this._font.tint="number"==typeof a&&a>=0?a:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(a){this._font.align=a||"left",this.dirty=!0}},anchor:{get:function(){return this._anchor},set:function(a){"number"==typeof a?this._anchor.set(a):this._anchor.copy(a)}},font:{get:function(){return this._font},set:function(a){a&&("string"==typeof a?(a=a.split(" "),this._font.name=1===a.length?a[0]:a.slice(1).join(" "),this._font.size=a.length>=2?parseInt(a[0],10):d.fonts[this._font.name].size):(this._font.name=a.name,this._font.size="number"==typeof a.size?a.size:parseInt(a.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(a){a=a.toString()||" ",this._text!==a&&(this._text=a,this.dirty=!0)}}}),d.prototype.updateText=function(){for(var a=d.fonts[this._font.name],b=new e.Point,c=null,f=[],g=0,h=0,i=[],j=0,k=this._font.size/a.size,l=-1,m=0,n=0,o=0;o<this.text.length;o++){var p=this.text.charCodeAt(o);if(/(\s)/.test(this.text.charAt(o))&&(l=o,m=g),/(?:\r\n|\r|\n)/.test(this.text.charAt(o)))i.push(g),h=Math.max(h,g),j++,b.x=0,b.y+=a.lineHeight,c=null;else if(l!==-1&&this.maxWidth>0&&b.x*k>this.maxWidth)e.utils.removeItems(f,l,o-l),o=l,l=-1,i.push(m),h=Math.max(h,m),j++,b.x=0,b.y+=a.lineHeight,c=null;else{var q=a.chars[p];q&&(c&&q.kerning[c]&&(b.x+=q.kerning[c]),f.push({texture:q.texture,line:j,charCode:p,position:new e.Point(b.x+q.xOffset,b.y+q.yOffset)}),g=b.x+(q.texture.width+q.xOffset),b.x+=q.xAdvance,n=Math.max(n,q.yOffset+q.texture.height),c=p)}}i.push(g),h=Math.max(h,g);var r=[];for(o=0;o<=j;o++){var s=0;"right"===this._font.align?s=h-i[o]:"center"===this._font.align&&(s=(h-i[o])/2),r.push(s)}var t=f.length,u=this.tint;for(o=0;o<t;o++){var v=this._glyphs[o];v?v.texture=f[o].texture:(v=new e.Sprite(f[o].texture),this._glyphs.push(v)),v.position.x=(f[o].position.x+r[f[o].line])*k,v.position.y=f[o].position.y*k,v.scale.x=v.scale.y=k,v.tint=u,v.parent||this.addChild(v)}for(o=t;o<this._glyphs.length;++o)this.removeChild(this._glyphs[o]);if(this.textWidth=h*k,this.textHeight=(b.y+a.lineHeight)*k,0!==this.anchor.x||0!==this.anchor.y)for(o=0;o<t;o++)this._glyphs[o].x-=this.textWidth*this.anchor.x,this._glyphs[o].y-=this.textHeight*this.anchor.y;this.maxLineHeight=n*k},d.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},d.prototype.getLocalBounds=function(){return this.validate(),e.Container.prototype.getLocalBounds.call(this)},d.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},d.prototype.makeDirty=function(){this.dirty=!0},d.fonts={}},{"../core":62,"../core/math/ObservablePoint":65}],124:[function(a,b,c){function d(a){e.Sprite.call(this,a[0]instanceof e.Texture?a[0]:a[0].texture),this._textures=null,this._durations=null,this.textures=a,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var e=a("../core");d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(a){if(a[0]instanceof e.Texture)this._textures=a,this._durations=null;else{this._textures=[],this._durations=[];for(var b=0;b<a.length;b++)this._textures.push(a[b].texture),this._durations.push(a[b].time)}}},currentFrame:{get:function(){var a=Math.floor(this._currentTime)%this._textures.length;return a<0&&(a+=this._textures.length),a}}}),d.prototype.stop=function(){this.playing&&(this.playing=!1,e.ticker.shared.remove(this.update,this))},d.prototype.play=function(){this.playing||(this.playing=!0,e.ticker.shared.add(this.update,this))},d.prototype.gotoAndStop=function(a){this.stop(),this._currentTime=a,this._texture=this._textures[this.currentFrame],this._textureID=-1},d.prototype.gotoAndPlay=function(a){this._currentTime=a,this.play()},d.prototype.update=function(a){var b=this.animationSpeed*a;if(null!==this._durations){var c=this._currentTime%1*this._durations[this.currentFrame];for(c+=b/60*1e3;c<0;)this._currentTime--,c+=this._durations[this.currentFrame];var d=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);c>=this._durations[this.currentFrame];)c-=this._durations[this.currentFrame]*d,this._currentTime+=d;this._currentTime+=c/this._durations[this.currentFrame]}else this._currentTime+=b;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):(this._texture=this._textures[this.currentFrame],this._textureID=-1)},d.prototype.destroy=function(){this.stop(),e.Sprite.prototype.destroy.call(this)},d.fromFrames=function(a){for(var b=[],c=0;c<a.length;++c)b.push(e.Texture.fromFrame(a[c]));return new d(b)},d.fromImages=function(a){for(var b=[],c=0;c<a.length;++c)b.push(e.Texture.fromImage(a[c]));return new d(b)}},{"../core":62}],125:[function(a,b,c){function d(a,b,c){e.Sprite.call(this,a),this.tileScale=new e.Point(1,1),this.tilePosition=new e.Point(0,0),this._width=b||100,this._height=c||100,this._uvs=new e.TextureUvs,this._canvasPattern=null,this._glDatas=[]}var e=a("../core"),f=new e.Point,g=a("../core/textures/Texture"),h=a("../core/sprites/canvas/CanvasTinter"),i=a("./webgl/TilingShader"),j=new Float32Array(4);d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this._width},set:function(a){this._width=a}},height:{get:function(){return this._height},set:function(a){this._height=a}}}),d.prototype._onTextureUpdate=function(){},d.prototype._renderWebGL=function(a){var b=this._texture;if(b&&b._uvs){a.flush();var c=a.gl,d=this._glDatas[a.CONTEXT_UID];d||(d={shader:new i(c),quad:new e.Quad(c)},this._glDatas[a.CONTEXT_UID]=d,d.quad.initVao(d.shader));var f=d.quad.vertices;f[0]=f[6]=this._width*-this.anchor.x,f[1]=f[3]=this._height*-this.anchor.y,f[2]=f[4]=this._width*(1-this.anchor.x),f[5]=f[7]=this._height*(1-this.anchor.y),d.quad.upload(),a.bindShader(d.shader);var g=b._uvs,h=b._frame.width,k=b._frame.height,l=b.baseTexture.width,m=b.baseTexture.height,n=d.shader.uniforms.uPixelSize;n[0]=1/l,n[1]=1/m,d.shader.uniforms.uPixelSize=n;var o=d.shader.uniforms.uFrame;o[0]=g.x0,o[1]=g.y0,o[2]=g.x1-g.x0,o[3]=g.y2-g.y0,d.shader.uniforms.uFrame=o;var p=d.shader.uniforms.uTransform;p[0]=this.tilePosition.x%(h*this.tileScale.x)/this._width,p[1]=this.tilePosition.y%(k*this.tileScale.y)/this._height,p[2]=l/this._width*this.tileScale.x,p[3]=m/this._height*this.tileScale.y,d.shader.uniforms.uTransform=p,d.shader.uniforms.translationMatrix=this.worldTransform.toArray(!0);var q=j;e.utils.hex2rgb(this.tint,q),q[3]=this.worldAlpha,d.shader.uniforms.uColor=q,a.bindTexture(this._texture,0),a.state.setBlendMode(this.blendMode),d.quad.draw()}},d.prototype._renderCanvas=function(a){var b=this._texture;if(b.baseTexture.hasLoaded){var c=a.context,d=this.worldTransform,f=a.resolution,g=b.baseTexture,i=this.tilePosition.x/this.tileScale.x%b._frame.width,j=this.tilePosition.y/this.tileScale.y%b._frame.height;if(!this._canvasPattern){var k=new e.CanvasRenderTarget(b._frame.width,b._frame.height);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=h.getTintedTexture(this,this.tint)),k.context.drawImage(this.tintedTexture,0,0)):k.context.drawImage(g.source,-b._frame.x,-b._frame.y),this._canvasPattern=k.context.createPattern(k.canvas,"repeat")}c.globalAlpha=this.worldAlpha,c.setTransform(d.a*f,d.b*f,d.c*f,d.d*f,d.tx*f,d.ty*f),c.scale(this.tileScale.x,this.tileScale.y),c.translate(i+this.anchor.x*-this._width,j+this.anchor.y*-this._height);var l=a.blendModes[this.blendMode];l!==a.context.globalCompositeOperation&&(c.globalCompositeOperation=l),c.fillStyle=this._canvasPattern,c.fillRect(-i,-j,this._width/this.tileScale.x,this._height/this.tileScale.y)}},d.prototype.getBounds=function(){var a,b,c,d,e=this._width,f=this._height,g=e*(1-this.anchor.x),h=e*-this.anchor.x,i=f*(1-this.anchor.y),j=f*-this.anchor.y,k=this.worldTransform,l=k.a,m=k.b,n=k.c,o=k.d,p=k.tx,q=k.ty,r=l*h+n*j+p,s=o*j+m*h+q,t=l*g+n*j+p,u=o*j+m*g+q,v=l*g+n*i+p,w=o*i+m*g+q,x=l*h+n*i+p,y=o*i+m*h+q;a=r,a=t<a?t:a,a=v<a?v:a,a=x<a?x:a,c=s,c=u<c?u:c,c=w<c?w:c,c=y<c?y:c,b=r,b=t>b?t:b,b=v>b?v:b,b=x>b?x:b,d=s,d=u>d?u:d,d=w>d?w:d,d=y>d?y:d;var z=this._bounds;return z.x=a,z.width=b-a,z.y=c,z.height=d-c,this._currentBounds=z,z},d.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,f);var b,c=this._width,d=this._height,e=-c*this.anchor.x;return f.x>e&&f.x<e+c&&(b=-d*this.anchor.y,f.y>b&&f.y<b+d)},d.prototype.destroy=function(){e.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},d.from=function(a,b,c){return new d(g.from(a),b,c)},d.fromFrame=function(a,b,c){var f=e.utils.TextureCache[a];if(!f)throw new Error('The frameId "'+a+'" does not exist in the texture cache '+this);return new d(f,b,c)},d.fromImage=function(a,b,c,f,g){return new d(e.Texture.fromImage(a,f,g),b,c)}},{"../core":62,"../core/sprites/canvas/CanvasTinter":100,
"../core/textures/Texture":109,"./webgl/TilingShader":130}],126:[function(a,b,c){var d=a("../core"),e=d.DisplayObject,f=new d.Matrix;e.prototype._cacheAsBitmap=!1,e.prototype._cacheData=!1;var g=function(){this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(e.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){if(this._cacheAsBitmap!==a){this._cacheAsBitmap=a;var b;a?(this._cacheData||(this._cacheData=new g),b=this._cacheData,b.originalRenderWebGL=this.renderWebGL,b.originalRenderCanvas=this.renderCanvas,b.originalUpdateTransform=this.updateTransform,b.originalCalculateBounds=this._calculateBounds,b.originalGetLocalBounds=this.getLocalBounds,b.originalDestroy=this.destroy,b.originalContainsPoint=this.containsPoint,b.originalMask=this._mask,b.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(b=this._cacheData,b.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=b.originalRenderWebGL,this.renderCanvas=b.originalRenderCanvas,this._calculateBounds=b.originalCalculateBounds,this.getLocalBounds=b.originalGetLocalBounds,this.destroy=b.originalDestroy,this.updateTransform=b.originalUpdateTransform,this.containsPoint=b.originalContainsPoint,this._mask=b.originalMask,this.filterArea=b.originalFilterArea)}}}}),e.prototype._renderCachedWebGL=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(a),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(a))},e.prototype._initCachedDisplayObject=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.alpha;this.alpha=1,a.currentRenderer.flush();var c=this.getLocalBounds().clone();if(this._filters){var e=this._filters[0].padding;c.pad(e)}var g=a._activeRenderTarget,h=a.filterManager.filterStack,i=d.RenderTexture.create(0|c.width,0|c.height),j=f;j.tx=-c.x,j.ty=-c.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,a.render(this,i,!0,j,!0),a.bindRenderTarget(g),a.filterManager.filterStack=h,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var k=new d.Sprite(i);k.transform.worldTransform=this.transform.worldTransform,k.anchor.x=-(c.x/c.width),k.anchor.y=-(c.y/c.height),k.alpha=b,k._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=k,this.transform._parentID=-1,this.updateTransform(),this.containsPoint=k.containsPoint.bind(k)}},e.prototype._renderCachedCanvas=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(a))},e.prototype._initCachedDisplayObjectCanvas=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.getLocalBounds(),c=this.alpha;this.alpha=1;var e=a.context,g=new d.RenderTexture.create(0|b.width,0|b.height),h=f;this.transform.worldTransform.copy(h),h.invert(),h.tx-=b.x,h.ty-=b.y,this.renderCanvas=this._cacheData.originalRenderCanvas,a.render(this,g,!0,h,!1),a.context=e,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var i=new d.Sprite(g);i.transform.worldTransform=this.transform.worldTransform,i.anchor.x=-(b.x/b.width),i.anchor.y=-(b.y/b.height),i._bounds=this._bounds,i.alpha=c,this.updateTransform(),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=i,this.containsPoint=i.containsPoint.bind(i)}},e.prototype._calculateCachedBounds=function(){return this._cacheData.sprite._calculateBounds()},e.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},e.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null},e.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this.destroy()}},{"../core":62}],127:[function(a,b,c){var d=a("../core");d.DisplayObject.prototype.name=null,d.Container.prototype.getChildByName=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b].name===a)return this.children[b];return null}},{"../core":62}],128:[function(a,b,c){var d=a("../core");d.DisplayObject.prototype.getGlobalPosition=function(a){return a=a||new d.Point,this.parent?(this.displayObjectUpdateTransform(),a.x=this.worldTransform.tx,a.y=this.worldTransform.ty):(a.x=this.position.x,a.y=this.position.y),a}},{"../core":62}],129:[function(a,b,c){a("./cacheAsBitmap"),a("./getChildByName"),a("./getGlobalPosition"),b.exports={MovieClip:a("./MovieClip"),TilingSprite:a("./TilingSprite"),BitmapText:a("./BitmapText")}},{"./BitmapText":123,"./MovieClip":124,"./TilingSprite":125,"./cacheAsBitmap":126,"./getChildByName":127,"./getGlobalPosition":128}],130:[function(a,b,c){function d(a){e.call(this,a,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nuniform vec4 uFrame;\nuniform vec4 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vec2 coord = aTextureCoord;\n    coord -= uTransform.xy;\n    coord /= uTransform.zw;\n    vTextureCoord = coord;\n}\n","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform vec4 uFrame;\nuniform vec2 uPixelSize;\n\nvoid main(void)\n{\n\n   \tvec2 coord = mod(vTextureCoord, uFrame.zw);\n   \tcoord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);\n   \tcoord += uFrame.xy;\n\n   \tvec4 sample = texture2D(uSampler, coord);\n  \tvec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n   \tgl_FragColor = sample * color ;\n}\n")}var e=a("../../core/Shader");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{"../../core/Shader":42}],131:[function(a,b,c){function d(a,b,c){e.Filter.call(this),this.blurXFilter=new f,this.blurYFilter=new g,this.resolution=1,this.padding=0,this.resolution=c||1,this.quality=b||4,this.blur=a||8}var e=a("../../core"),f=a("./BlurXFilter"),g=a("./BlurYFilter");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c){var d=a.getRenderTarget(!0);this.blurXFilter.apply(a,b,d,!0),this.blurYFilter.apply(a,d,c,!1),a.returnRenderTarget(d)},Object.defineProperties(d.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}},quality:{get:function(){return this.blurXFilter.quality},set:function(a){this.blurXFilter.quality=this.blurYFilter.quality=a}},blurX:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}},blurY:{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}}})},{"../../core":62,"./BlurXFilter":132,"./BlurYFilter":133}],132:[function(a,b,c){function d(a,b,c){var d=f(5,!0),h=g(5);e.Filter.call(this,d,h),this.resolution=c||1,this._quality=0,this.quality=b||4,this.strength=a||8,this.firstRun=!0}var e=a("../../core"),f=a("./generateBlurVertSource"),g=a("./generateBlurFragSource"),h=a("./getMaxBlurKernelSize");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,i=h(e);this.vertexSrc=f(i,!0),this.fragmentSrc=g(i),this.firstRun=!1}if(this.uniforms.strength=1/c.size.width*(c.size.width/b.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(var j=a.getRenderTarget(!0),k=b,l=j,m=0;m<this.passes-1;m++){a.applyFilter(this,k,l,!0);var n=l;l=k,k=n}a.applyFilter(this,k,c,d),a.returnRenderTarget(j)}},Object.defineProperties(d.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}})},{"../../core":62,"./generateBlurFragSource":134,"./generateBlurVertSource":135,"./getMaxBlurKernelSize":136}],133:[function(a,b,c){function d(a,b,c){var d=f(5,!1),h=g(5);e.Filter.call(this,d,h),this.resolution=c||1,this._quality=0,this.quality=b||4,this.strength=a||8,this.firstRun=!0}var e=a("../../core"),f=a("./generateBlurVertSource"),g=a("./generateBlurFragSource"),h=a("./getMaxBlurKernelSize");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,i=h(e);this.vertexSrc=f(i,!1),this.fragmentSrc=g(i),this.firstRun=!1}if(this.uniforms.strength=1/c.size.height*(c.size.height/b.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(var j=a.getRenderTarget(!0),k=b,l=j,m=0;m<this.passes-1;m++){a.applyFilter(this,k,l,!0);var n=l;l=k,k=n}a.applyFilter(this,k,c,d),a.returnRenderTarget(j)}},Object.defineProperties(d.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}})},{"../../core":62,"./generateBlurFragSource":134,"./generateBlurVertSource":135,"./getMaxBlurKernelSize":136}],134:[function(a,b,c){var d={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},e=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","\tgl_FragColor = vec4(0.0);","\t%blur%","}"].join("\n"),f=function(a){for(var b,c=d[a],f=c.length,g=e,h="",i="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",j=0;j<a;j++){var k=i.replace("%index%",j);b=j,j>=f&&(b=a-j-1),k=k.replace("%value%",c[b]),h+=k,h+="\n"}return g=g.replace("%blur%",h),g=g.replace("%size%",a)};b.exports=f},{}],135:[function(a,b,c){var d=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n"),e=function(a,b){var c,e,f=Math.ceil(a/2),g=d,h="";c=b?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var i=0;i<a;i++){var j=c.replace("%index%",i);e=i,i>=f&&(e=a-i-1),j=j.replace("%sampleIndex%",i-(f-1)+".0"),h+=j,h+="\n"}return g=g.replace("%blur%",h),g=g.replace("%size%",a)};b.exports=e},{}],136:[function(a,b,c){var d=function(a){for(var b=a.getParameter(a.MAX_VARYING_VECTORS),c=15;c>b;)c-=2;return c};b.exports=d},{}],137:[function(a,b,c){function d(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4] * c.a;\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9] * c.a;\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14] * c.a;\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19] * c.a;\n\n//    gl_FragColor = vec4(m[0]);\n}\n"),this.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}var e=a("../../core");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype._loadMatrix=function(a,b){b=!!b;var c=a;b&&(this._multiply(c,this.uniforms.m,a),c=this._colorMatrix(c)),this.uniforms.m=c},d.prototype._multiply=function(a,b,c){return a[0]=b[0]*c[0]+b[1]*c[5]+b[2]*c[10]+b[3]*c[15],a[1]=b[0]*c[1]+b[1]*c[6]+b[2]*c[11]+b[3]*c[16],a[2]=b[0]*c[2]+b[1]*c[7]+b[2]*c[12]+b[3]*c[17],a[3]=b[0]*c[3]+b[1]*c[8]+b[2]*c[13]+b[3]*c[18],a[4]=b[0]*c[4]+b[1]*c[9]+b[2]*c[14]+b[3]*c[19],a[5]=b[5]*c[0]+b[6]*c[5]+b[7]*c[10]+b[8]*c[15],a[6]=b[5]*c[1]+b[6]*c[6]+b[7]*c[11]+b[8]*c[16],a[7]=b[5]*c[2]+b[6]*c[7]+b[7]*c[12]+b[8]*c[17],a[8]=b[5]*c[3]+b[6]*c[8]+b[7]*c[13]+b[8]*c[18],a[9]=b[5]*c[4]+b[6]*c[9]+b[7]*c[14]+b[8]*c[19],a[10]=b[10]*c[0]+b[11]*c[5]+b[12]*c[10]+b[13]*c[15],a[11]=b[10]*c[1]+b[11]*c[6]+b[12]*c[11]+b[13]*c[16],a[12]=b[10]*c[2]+b[11]*c[7]+b[12]*c[12]+b[13]*c[17],a[13]=b[10]*c[3]+b[11]*c[8]+b[12]*c[13]+b[13]*c[18],a[14]=b[10]*c[4]+b[11]*c[9]+b[12]*c[14]+b[13]*c[19],a[15]=b[15]*c[0]+b[16]*c[5]+b[17]*c[10]+b[18]*c[15],a[16]=b[15]*c[1]+b[16]*c[6]+b[17]*c[11]+b[18]*c[16],a[17]=b[15]*c[2]+b[16]*c[7]+b[17]*c[12]+b[18]*c[17],a[18]=b[15]*c[3]+b[16]*c[8]+b[17]*c[13]+b[18]*c[18],a[19]=b[15]*c[4]+b[16]*c[9]+b[17]*c[14]+b[18]*c[19],a},d.prototype._colorMatrix=function(a){var b=new Float32Array(a);return b[4]/=255,b[9]/=255,b[14]/=255,b[19]/=255,b},d.prototype.brightness=function(a,b){var c=[a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},d.prototype.greyscale=function(a,b){var c=[a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},d.prototype.grayscale=d.prototype.greyscale,d.prototype.blackAndWhite=function(a){var b=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.hue=function(a,b){a=(a||0)/180*Math.PI;var c=Math.cos(a),d=Math.sin(a),e=Math.sqrt,f=1/3,g=e(f),h=c+(1-c)*f,i=f*(1-c)-g*d,j=f*(1-c)+g*d,k=f*(1-c)+g*d,l=c+f*(1-c),m=f*(1-c)-g*d,n=f*(1-c)-g*d,o=f*(1-c)+g*d,p=c+f*(1-c),q=[h,i,j,0,0,k,l,m,0,0,n,o,p,0,0,0,0,0,1,0];this._loadMatrix(q,b)},d.prototype.contrast=function(a,b){var c=(a||0)+1,d=-128*(c-1),e=[c,0,0,0,d,0,c,0,0,d,0,0,c,0,d,0,0,0,1,0];this._loadMatrix(e,b)},d.prototype.saturate=function(a,b){var c=2*(a||0)/3+1,d=(c-1)*-.5,e=[c,d,d,0,0,d,c,d,0,0,d,d,c,0,0,0,0,0,1,0];this._loadMatrix(e,b)},d.prototype.desaturate=function(){this.saturate(-1)},d.prototype.negative=function(a){var b=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.sepia=function(a){var b=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.technicolor=function(a){var b=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.polaroid=function(a){var b=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.toBGR=function(a){var b=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.kodachrome=function(a){var b=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.browni=function(a){var b=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.vintage=function(a){var b=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.colorTone=function(a,b,c,d,e){a=a||.2,b=b||.15,c=c||16770432,d=d||3375104;var f=(c>>16&255)/255,g=(c>>8&255)/255,h=(255&c)/255,i=(d>>16&255)/255,j=(d>>8&255)/255,k=(255&d)/255,l=[.3,.59,.11,0,0,f,g,h,a,0,i,j,k,b,0,f-i,g-j,h-k,0,0];this._loadMatrix(l,e)},d.prototype.night=function(a,b){a=a||.1;var c=[a*-2,-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},d.prototype.predator=function(a,b){var c=[11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*a,.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,.8044459223747253*a,0,0,0,1,0];this._loadMatrix(c,b)},d.prototype.lsd=function(a){var b=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.reset=function(){var a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(a,!1)},Object.defineProperties(d.prototype,{matrix:{get:function(){return this.uniforms.m},set:function(a){this.uniforms.m=a}}})},{"../../core":62}],138:[function(a,b,c){function d(a,b){var c=new e.Matrix;a.renderable=!1,e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"),this.maskSprite=a,this.maskMatrix=c,this.uniforms.mapSampler=a.texture,this.uniforms.filterMatrix=c.toArray(!0),this.uniforms.scale={x:1,y:1},null!==b&&void 0!==b||(b=20),this.scale=new e.Point(b,b)}var e=a("../../core");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c){var d=1/c.destinationFrame.width*(c.size.width/b.size.width);this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*d,this.uniforms.scale.y=this.scale.y*d,a.applyFilter(this,b,c)},Object.defineProperties(d.prototype,{map:{get:function(){return this.uniforms.mapSampler},set:function(a){this.uniforms.mapSampler=a}}})},{"../../core":62}],139:[function(a,b,c){function d(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'#define GLSLIFY 1\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n  \tvec2 fragCoord = vTextureCoord * filterArea.xy;\n\n  \tvec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n  \tgl_FragColor = color;\n}\n')}var e=a("../../core");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d},{"../../core":62}],140:[function(a,b,c){b.exports={FXAAFilter:a("./fxaa/FXAAFilter"),NoiseFilter:a("./noise/NoiseFilter"),DisplacementFilter:a("./displacement/DisplacementFilter"),BlurFilter:a("./blur/BlurFilter"),BlurXFilter:a("./blur/BlurXFilter"),BlurYFilter:a("./blur/BlurYFilter"),ColorMatrixFilter:a("./colormatrix/ColorMatrixFilter"),VoidFilter:a("./void/VoidFilter")}},{"./blur/BlurFilter":131,"./blur/BlurXFilter":132,"./blur/BlurYFilter":133,"./colormatrix/ColorMatrixFilter":137,"./displacement/DisplacementFilter":138,"./fxaa/FXAAFilter":139,"./noise/NoiseFilter":141,"./void/VoidFilter":142}],141:[function(a,b,c){function d(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n"),this.noise=.5}var e=a("../../core");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{noise:{get:function(){return this.uniforms.noise},set:function(a){this.uniforms.noise=a}}})},{"../../core":62}],142:[function(a,b,c){function d(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"),this.glShaderKey="void"}var e=a("../../core");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d},{"../../core":62}],143:[function(a,b,c){function d(){this.global=new e.Point,this.target=null,this.originalEvent=null}var e=a("../core");d.prototype.constructor=d,b.exports=d,d.prototype.getLocalPosition=function(a,b,c){return a.worldTransform.applyInverse(c||this.global,b)}},{"../core":62}],144:[function(a,b,c){function d(a,b){g.call(this),b=b||{},this.renderer=a,this.autoPreventDefault=void 0===b.autoPreventDefault||b.autoPreventDefault,this.interactionFrequency=b.interactionFrequency||10,this.mouse=new f,this.mouse.global.set(-999999),this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.defaultCursorStyle="inherit",this.currentCursorStyle="inherit",this._tempPoint=new e.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var e=a("../core"),f=a("./InteractionData"),g=a("eventemitter3");Object.assign(e.DisplayObject.prototype,a("./interactiveTarget")),d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setTargetElement=function(a,b){this.removeEvents(),this.interactionDOMElement=a,this.resolution=b||1,this.addEvents()},d.prototype.addEvents=function(){this.interactionDOMElement&&(e.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onMouseOver,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},d.prototype.removeEvents=function(){this.interactionDOMElement&&(e.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onMouseOver,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),
this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},d.prototype.update=function(a){if(this._deltaTime+=a,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=this.defaultCursorStyle,this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},d.prototype.dispatchEvent=function(a,b,c){c.stopped||(c.target=a,c.type=b,a.emit(b,c),a[b]&&a[b](c))},d.prototype.mapPositionToPoint=function(a,b,c){var d;d=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0},a.x=(b-d.left)*(this.interactionDOMElement.width/d.width)/this.resolution,a.y=(c-d.top)*(this.interactionDOMElement.height/d.height)/this.resolution},d.prototype.processInteractive=function(a,b,c,d,e){if(!b||!b.visible)return!1;var f=!1,g=e=b.interactive||e;if(b.hitArea&&(g=!1),d&&b._mask&&(b._mask.containsPoint(a)||(d=!1)),d&&b.filterArea&&(b.filterArea.contains(a.x,a.y)||(d=!1)),b.interactiveChildren)for(var h=b.children,i=h.length-1;i>=0;i--){var j=h[i];if(this.processInteractive(a,j,c,d,g)){if(!j.parent)continue;f=!0,g=!1,d=!1}}return e&&(d&&!f&&(b.hitArea?(b.worldTransform.applyInverse(a,this._tempPoint),f=b.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):b.containsPoint&&(f=b.containsPoint(a))),b.interactive&&c(b,f)),f},d.prototype.onMouseDown=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0);var b=2===a.button||3===a.which;this.emit(b?"rightdown":"mousedown",this.eventData)},d.prototype.processMouseDown=function(a,b){var c=this.mouse.originalEvent,d=2===c.button||3===c.which;b&&(a[d?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(a,d?"rightdown":"mousedown",this.eventData))},d.prototype.onMouseUp=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0);var b=2===a.button||3===a.which;this.emit(b?"rightup":"mouseup",this.eventData)},d.prototype.processMouseUp=function(a,b){var c=this.mouse.originalEvent,d=2===c.button||3===c.which,e=d?"_isRightDown":"_isLeftDown";b?(this.dispatchEvent(a,d?"rightup":"mouseup",this.eventData),a[e]&&(a[e]=!1,this.dispatchEvent(a,d?"rightclick":"click",this.eventData))):a[e]&&(a[e]=!1,this.dispatchEvent(a,d?"rightupoutside":"mouseupoutside",this.eventData))},d.prototype.onMouseMove=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.didMove=!0,this.cursor=this.defaultCursorStyle,this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.emit("mousemove",this.eventData),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},d.prototype.processMouseMove=function(a,b){this.processMouseOverOut(a,b),this.moveWhenInside&&!b||this.dispatchEvent(a,"mousemove",this.eventData)},d.prototype.onMouseOut=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.interactionDOMElement.style.cursor=this.defaultCursorStyle,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1),this.emit("mouseout",this.eventData)},d.prototype.processMouseOverOut=function(a,b){b?(a._over||(a._over=!0,this.dispatchEvent(a,"mouseover",this.eventData)),a.buttonMode&&(this.cursor=a.defaultCursor)):a._over&&(a._over=!1,this.dispatchEvent(a,"mouseout",this.eventData))},d.prototype.onMouseOver=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.emit("mouseover",this.eventData)},d.prototype.onTouchStart=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,d=0;d<c;d++){var e=b[d],f=this.getTouchData(e);f.originalEvent=a,this.eventData.data=f,this.eventData.stopped=!1,this.processInteractive(f.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.emit("touchstart",this.eventData),this.returnTouchData(f)}},d.prototype.processTouchStart=function(a,b){b&&(a._touchDown=!0,this.dispatchEvent(a,"touchstart",this.eventData))},d.prototype.onTouchEnd=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,d=0;d<c;d++){var e=b[d],f=this.getTouchData(e);f.originalEvent=a,this.eventData.data=f,this.eventData.stopped=!1,this.processInteractive(f.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.emit("touchend",this.eventData),this.returnTouchData(f)}},d.prototype.processTouchEnd=function(a,b){b?(this.dispatchEvent(a,"touchend",this.eventData),a._touchDown&&(a._touchDown=!1,this.dispatchEvent(a,"tap",this.eventData))):a._touchDown&&(a._touchDown=!1,this.dispatchEvent(a,"touchendoutside",this.eventData))},d.prototype.onTouchMove=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,d=0;d<c;d++){var e=b[d],f=this.getTouchData(e);f.originalEvent=a,this.eventData.data=f,this.eventData.stopped=!1,this.processInteractive(f.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.emit("touchmove",this.eventData),this.returnTouchData(f)}},d.prototype.processTouchMove=function(a,b){this.moveWhenInside&&!b||this.dispatchEvent(a,"touchmove",this.eventData)},d.prototype.getTouchData=function(a){var b=this.interactiveDataPool.pop();return b||(b=new f),b.identifier=a.identifier,this.mapPositionToPoint(b.global,a.clientX,a.clientY),navigator.isCocoonJS&&(b.global.x=b.global.x/this.resolution,b.global.y=b.global.y/this.resolution),a.globalX=b.global.x,a.globalY=b.global.y,b},d.prototype.returnTouchData=function(a){this.interactiveDataPool.push(a)},d.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onMouseOver=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},e.WebGLRenderer.registerPlugin("interaction",d),e.CanvasRenderer.registerPlugin("interaction",d)},{"../core":62,"./InteractionData":143,"./interactiveTarget":146,eventemitter3:3}],145:[function(a,b,c){b.exports={InteractionData:a("./InteractionData"),InteractionManager:a("./InteractionManager"),interactiveTarget:a("./interactiveTarget")}},{"./InteractionData":143,"./InteractionManager":144,"./interactiveTarget":146}],146:[function(a,b,c){var d={interactive:!1,interactiveChildren:!0,hitArea:null,buttonMode:!1,defaultCursor:"pointer",_over:!1,_isLeftDown:!1,_isRightDown:!1,_touchDown:!1};b.exports=d},{}],147:[function(a,b,c){function d(a,b){var c={},d=a.data.getElementsByTagName("info")[0],e=a.data.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=parseInt(d.getAttribute("size"),10),c.lineHeight=parseInt(e.getAttribute("lineHeight"),10),c.chars={};for(var h=a.data.getElementsByTagName("char"),i=0;i<h.length;i++){var j=parseInt(h[i].getAttribute("id"),10),k=new f.Rectangle(parseInt(h[i].getAttribute("x"),10)+b.frame.x,parseInt(h[i].getAttribute("y"),10)+b.frame.y,parseInt(h[i].getAttribute("width"),10),parseInt(h[i].getAttribute("height"),10));c.chars[j]={xOffset:parseInt(h[i].getAttribute("xoffset"),10),yOffset:parseInt(h[i].getAttribute("yoffset"),10),xAdvance:parseInt(h[i].getAttribute("xadvance"),10),kerning:{},texture:new f.Texture(b.baseTexture,k)}}var l=a.data.getElementsByTagName("kerning");for(i=0;i<l.length;i++){var m=parseInt(l[i].getAttribute("first"),10),n=parseInt(l[i].getAttribute("second"),10),o=parseInt(l[i].getAttribute("amount"),10);c.chars[n]&&(c.chars[n].kerning[m]=o)}a.bitmapFont=c,g.BitmapText.fonts[c.font]=c}var e=a("resource-loader").Resource,f=a("../core"),g=a("../extras"),h=a("path");b.exports=function(){return function(a,b){if(!a.data||!a.isXml)return b();if(0===a.data.getElementsByTagName("page").length||0===a.data.getElementsByTagName("info").length||null===a.data.getElementsByTagName("info")[0].getAttribute("face"))return b();var c=a.isDataUrl?"":h.dirname(a.url);a.isDataUrl&&("."===c&&(c=""),this.baseUrl&&c&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(c+="/"),c=c.replace(this.baseUrl,""))),c&&"/"!==c.charAt(c.length-1)&&(c+="/");var g=c+a.data.getElementsByTagName("page")[0].getAttribute("file");if(f.utils.TextureCache[g])d(a,f.utils.TextureCache[g]),b();else{var i={crossOrigin:a.crossOrigin,loadType:e.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata};this.add(a.name+"_image",g,i,function(c){d(a,c.texture),b()})}}}},{"../core":62,"../extras":129,path:22,"resource-loader":36}],148:[function(a,b,c){b.exports={Loader:a("./loader"),bitmapFontParser:a("./bitmapFontParser"),spritesheetParser:a("./spritesheetParser"),textureParser:a("./textureParser"),Resource:a("resource-loader").Resource}},{"./bitmapFontParser":147,"./loader":149,"./spritesheetParser":150,"./textureParser":151,"resource-loader":36}],149:[function(a,b,c){function d(a,b){e.call(this,a,b);for(var c=0;c<d._pixiMiddleware.length;++c)this.use(d._pixiMiddleware[c]())}var e=a("resource-loader"),f=a("./textureParser"),g=a("./spritesheetParser"),h=a("./bitmapFontParser");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d._pixiMiddleware=[e.middleware.parsing.blob,f,g,h],d.addPixiMiddleware=function(a){d._pixiMiddleware.push(a)};var i=e.Resource;i.setExtensionXhrType("fnt",i.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":147,"./spritesheetParser":150,"./textureParser":151,"resource-loader":36}],150:[function(a,b,c){var d=a("resource-loader").Resource,e=a("path"),f=a("../core"),g=1e3;b.exports=function(){return function(a,b){var c,h=a.name+"_image";if(!a.data||!a.isJson||!a.data.frames||this.resources[h])return b();var i={crossOrigin:a.crossOrigin,loadType:d.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata};c=a.isDataUrl?a.data.meta.image:e.dirname(a.url.replace(this.baseUrl,""))+"/"+a.data.meta.image,this.add(h,c,i,function(c){function d(b,d){for(var e=b;e-b<d&&e<k.length;){var g=k[e],h=j[g].frame;if(h){var i=null,m=null,n=new f.Rectangle(0,0,j[g].sourceSize.w/l,j[g].sourceSize.h/l);i=j[g].rotated?new f.Rectangle(h.x/l,h.y/l,h.h/l,h.w/l):new f.Rectangle(h.x/l,h.y/l,h.w/l,h.h/l),j[g].trimmed&&(m=new f.Rectangle(j[g].spriteSourceSize.x/l,j[g].spriteSourceSize.y/l,j[g].spriteSourceSize.w/l,j[g].spriteSourceSize.h/l)),a.textures[g]=new f.Texture(c.texture.baseTexture,i,n,m,j[g].rotated?2:0),f.utils.TextureCache[g]=a.textures[g]}e++}}function e(){return m*g<k.length}function h(a){d(m*g,g),m++,setTimeout(a,0)}function i(){h(function(){e()?i():b()})}a.textures={};var j=a.data.frames,k=Object.keys(j),l=f.utils.getResolutionOfUrl(a.url),m=0;k.length<=g?(d(0,g),b()):i()})}}},{"../core":62,path:22,"resource-loader":36}],151:[function(a,b,c){var d=a("../core");b.exports=function(){return function(a,b){if(a.data&&a.isImage){var c=new d.BaseTexture(a.data,null,d.utils.getResolutionOfUrl(a.url));c.imageUrl=a.url,a.texture=new d.Texture(c),d.utils.BaseTextureCache[a.url]=c,d.utils.TextureCache[a.url]=a.texture}b()}}},{"../core":62}],152:[function(a,b,c){function d(a,b,c,f,g){e.Container.call(this),this._texture=null,this.uvs=c||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=b||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=f||new Uint16Array([0,1,3,2]),this.dirty=0,this.indexDirty=0,this.blendMode=e.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=g||d.DRAW_MODES.TRIANGLE_MESH,this.texture=a,this.shader=null,this.tintRgb=new Float32Array([1,1,1]),this._glDatas=[]}var e=a("../core"),f=a("pixi-gl-core"),g=a("./webgl/MeshShader"),h=new e.Point,i=new e.Polygon;d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{texture:{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}},tint:{get:function(){return e.utils.rgb2hex(this.tintRgb)},set:function(a){this.tintRgb=e.utils.hex2rgb(a,this.tintRgb)}}}),d.prototype._renderWebGL=function(a){a.flush();var b=a.gl,c=this._glDatas[a.CONTEXT_UID];c||(c={shader:new g(b),vertexBuffer:f.GLBuffer.createVertexBuffer(b,this.vertices,b.STREAM_DRAW),uvBuffer:f.GLBuffer.createVertexBuffer(b,this.uvs,b.STREAM_DRAW),indexBuffer:f.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW),vao:new f.VertexArrayObject(b),dirty:this.dirty,indexDirty:this.indexDirty},c.vao=new f.VertexArrayObject(b).addIndex(c.indexBuffer).addAttribute(c.vertexBuffer,c.shader.attributes.aVertexPosition,b.FLOAT,!1,8,0).addAttribute(c.uvBuffer,c.shader.attributes.aTextureCoord,b.FLOAT,!1,8,0),this._glDatas[a.CONTEXT_UID]=c),this.dirty!==c.dirty&&(c.dirty=this.dirty,c.uvBuffer.upload()),this.indexDirty!==c.indexDirty&&(c.indexDirty=this.indexDirty,c.indexBuffer.upload()),c.vertexBuffer.upload(),a.bindShader(c.shader),a.bindTexture(this._texture,0),a.state.setBlendMode(this.blendMode),c.shader.uniforms.translationMatrix=this.worldTransform.toArray(!0),c.shader.uniforms.alpha=this.worldAlpha,c.shader.uniforms.tint=this.tintRgb;var e=this.drawMode===d.DRAW_MODES.TRIANGLE_MESH?b.TRIANGLE_STRIP:b.TRIANGLES;c.vao.bind().draw(e,this.indices.length).unbind()},d.prototype._renderCanvas=function(a){var b=a.context,c=this.worldTransform,e=a.resolution;a.roundPixels?b.setTransform(c.a*e,c.b*e,c.c*e,c.d*e,c.tx*e|0,c.ty*e|0):b.setTransform(c.a*e,c.b*e,c.c*e,c.d*e,c.tx*e,c.ty*e),this.drawMode===d.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(b):this._renderCanvasTriangles(b)},d.prototype._renderCanvasTriangleMesh=function(a){for(var b=this.vertices,c=this.uvs,d=b.length/2,e=0;e<d-2;e++){var f=2*e;this._renderCanvasDrawTriangle(a,b,c,f,f+2,f+4)}},d.prototype._renderCanvasTriangles=function(a){for(var b=this.vertices,c=this.uvs,d=this.indices,e=d.length,f=0;f<e;f+=3){var g=2*d[f],h=2*d[f+1],i=2*d[f+2];this._renderCanvasDrawTriangle(a,b,c,g,h,i)}},d.prototype._renderCanvasDrawTriangle=function(a,b,c,d,e,f){var g=this._texture.baseTexture,h=g.source,i=g.width,j=g.height,k=b[d],l=b[e],m=b[f],n=b[d+1],o=b[e+1],p=b[f+1],q=c[d]*g.width,r=c[e]*g.width,s=c[f]*g.width,t=c[d+1]*g.height,u=c[e+1]*g.height,v=c[f+1]*g.height;if(this.canvasPadding>0){var w=this.canvasPadding/this.worldTransform.a,x=this.canvasPadding/this.worldTransform.d,y=(k+l+m)/3,z=(n+o+p)/3,A=k-y,B=n-z,C=Math.sqrt(A*A+B*B);k=y+A/C*(C+w),n=z+B/C*(C+x),A=l-y,B=o-z,C=Math.sqrt(A*A+B*B),l=y+A/C*(C+w),o=z+B/C*(C+x),A=m-y,B=p-z,C=Math.sqrt(A*A+B*B),m=y+A/C*(C+w),p=z+B/C*(C+x)}a.save(),a.beginPath(),a.moveTo(k,n),a.lineTo(l,o),a.lineTo(m,p),a.closePath(),a.clip();var D=q*u+t*s+r*v-u*s-t*r-q*v,E=k*u+t*m+l*v-u*m-t*l-k*v,F=q*l+k*s+r*m-l*s-k*r-q*m,G=q*u*m+t*l*s+k*r*v-k*u*s-t*r*m-q*l*v,H=n*u+t*p+o*v-u*p-t*o-n*v,I=q*o+n*s+r*p-o*s-n*r-q*p,J=q*u*p+t*o*s+n*r*v-n*u*s-t*r*p-q*o*v;a.transform(E/D,H/D,F/D,I/D,G/D,J/D),a.drawImage(h,0,0,i*g.resolution,j*g.resolution,0,0,i,j),a.restore()},d.prototype.renderMeshFlat=function(a){var b=this.context,c=a.vertices,d=c.length/2;b.beginPath();for(var e=1;e<d-2;e++){var f=2*e,g=c[f],h=c[f+2],i=c[f+4],j=c[f+1],k=c[f+3],l=c[f+5];b.moveTo(g,j),b.lineTo(h,k),b.lineTo(i,l)}b.fillStyle="#FF0000",b.fill(),b.closePath()},d.prototype._onTextureUpdate=function(){},d.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},d.prototype.containsPoint=function(a){if(!this.getBounds().contains(a.x,a.y))return!1;this.worldTransform.applyInverse(a,h);for(var b=this.vertices,c=i.points,e=this.indices,f=this.indices.length,g=this.drawMode===d.DRAW_MODES.TRIANGLES?3:1,j=0;j+2<f;j+=g){var k=2*e[j],l=2*e[j+1],m=2*e[j+2];if(c[0]=b[k],c[1]=b[k+1],c[2]=b[l],c[3]=b[l+1],c[4]=b[m],c[5]=b[m+1],i.contains(h.x,h.y))return!0}return!1},d.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":62,"./webgl/MeshShader":157,"pixi-gl-core":12}],153:[function(a,b,c){function d(a,b,c,d,g){f.call(this,a,4,4);var h=this.uvs;h[6]=h[14]=h[22]=h[30]=1,h[25]=h[27]=h[29]=h[31]=1,this._origWidth=a.width,this._origHeight=a.height,this._uvw=1/this._origWidth,this._uvh=1/this._origHeight,this.width=a.width,this.height=a.height,h[2]=h[10]=h[18]=h[26]=this._uvw*b,h[4]=h[12]=h[20]=h[28]=1-this._uvw*d,h[9]=h[11]=h[13]=h[15]=this._uvh*c,h[17]=h[19]=h[21]=h[23]=1-this._uvh*g,this.leftWidth="undefined"!=typeof b?b:e,this.rightWidth="undefined"!=typeof d?d:e,this.topHeight="undefined"!=typeof c?c:e,this.bottomHeight="undefined"!=typeof g?g:e}var e=10,f=a("./Plane");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this._width},set:function(a){this._width=a,this.updateVerticalVertices()}},height:{get:function(){return this._height},set:function(a){this._height=a,this.updateHorizontalVertices()}},leftWidth:{get:function(){return this._leftWidth},set:function(a){this._leftWidth=a;var b=this.uvs,c=this.vertices;b[2]=b[10]=b[18]=b[26]=this._uvw*a,c[2]=c[10]=c[18]=c[26]=a,this.dirty=!0}},rightWidth:{get:function(){return this._rightWidth},set:function(a){this._rightWidth=a;var b=this.uvs,c=this.vertices;b[4]=b[12]=b[20]=b[28]=1-this._uvw*a,c[4]=c[12]=c[20]=c[28]=this._width-a,this.dirty=!0}},topHeight:{get:function(){return this._topHeight},set:function(a){this._topHeight=a;var b=this.uvs,c=this.vertices;b[9]=b[11]=b[13]=b[15]=this._uvh*a,c[9]=c[11]=c[13]=c[15]=a,this.dirty=!0}},bottomHeight:{get:function(){return this._bottomHeight},set:function(a){this._bottomHeight=a;var b=this.uvs,c=this.vertices;b[17]=b[19]=b[21]=b[23]=1-this._uvh*a,c[17]=c[19]=c[21]=c[23]=this._height-a,this.dirty=!0}}}),d.prototype.updateHorizontalVertices=function(){var a=this.vertices;a[9]=a[11]=a[13]=a[15]=this._topHeight,a[17]=a[19]=a[21]=a[23]=this._height-this._bottomHeight,a[25]=a[27]=a[29]=a[31]=this._height},d.prototype.updateVerticalVertices=function(){var a=this.vertices;a[2]=a[10]=a[18]=a[26]=this._leftWidth,a[4]=a[12]=a[20]=a[28]=this._width-this._rightWidth,a[6]=a[14]=a[22]=a[30]=this._width},d.prototype._renderCanvas=function(a){var b=a.context;b.globalAlpha=this.worldAlpha;var c=this.worldTransform,d=a.resolution;a.roundPixels?b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d|0,c.ty*d|0):b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d,c.ty*d);var e=this._texture.baseTexture,f=e.source,g=e.width,h=e.height;this.drawSegment(b,f,g,h,0,1,10,11),this.drawSegment(b,f,g,h,2,3,12,13),this.drawSegment(b,f,g,h,4,5,14,15),this.drawSegment(b,f,g,h,8,9,18,19),this.drawSegment(b,f,g,h,10,11,20,21),this.drawSegment(b,f,g,h,12,13,22,23),this.drawSegment(b,f,g,h,16,17,26,27),this.drawSegment(b,f,g,h,18,19,28,29),this.drawSegment(b,f,g,h,20,21,30,31)},d.prototype.drawSegment=function(a,b,c,d,e,f,g,h){var i=this.uvs,j=this.vertices,k=(i[g]-i[e])*c,l=(i[h]-i[f])*d,m=j[g]-j[e],n=j[h]-j[f];k<1&&(k=1),l<1&&(l=1),m<1&&(m=1),n<1&&(n=1),a.drawImage(b,i[e]*c,i[f]*d,k,l,j[e],j[f],m,n)}},{"./Plane":154}],154:[function(a,b,c){function d(a,b,c){e.call(this,a),this._ready=!0,this.verticesX=b||10,this.verticesY=c||10,this.drawMode=e.DRAW_MODES.TRIANGLES,this.refresh()}var e=a("./Mesh");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.refresh=function(){var a=this.verticesX*this.verticesY,b=[],c=[],d=[],e=[],f=this.texture,g=this.verticesX-1,h=this.verticesY-1,i=0,j=f.width/g,k=f.height/h;for(i=0;i<a;i++){var l=i%this.verticesX,m=i/this.verticesX|0;b.push(l*j,m*k),d.push(f._uvs.x0+(f._uvs.x1-f._uvs.x0)*(l/(this.verticesX-1)),f._uvs.y0+(f._uvs.y3-f._uvs.y0)*(m/(this.verticesY-1)))}var n=g*h;for(i=0;i<n;i++){var o=i%g,p=i/g|0,q=p*this.verticesX+o,r=p*this.verticesX+o+1,s=(p+1)*this.verticesX+o,t=(p+1)*this.verticesX+o+1;e.push(q,r,s),e.push(r,t,s)}this.vertices=new Float32Array(b),this.uvs=new Float32Array(d),this.colors=new Float32Array(c),this.indices=new Uint16Array(e),this.indexDirty=!0},d.prototype._onTextureUpdate=function(){e.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{"./Mesh":152}],155:[function(a,b,c){function d(a,b){e.call(this,a),this.points=b,this.vertices=new Float32Array(4*b.length),this.uvs=new Float32Array(4*b.length),this.colors=new Float32Array(2*b.length),this.indices=new Uint16Array(2*b.length),this._ready=!0,this.refresh()}var e=a("./Mesh"),f=a("../core");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.refresh=function(){var a=this.points;if(!(a.length<1)&&this._texture._uvs){var b=this.uvs,c=this.indices,d=this.colors,e=this._texture._uvs,g=new f.Point(e.x0,e.y0),h=new f.Point(e.x2-e.x0,e.y2-e.y0);b[0]=0+g.x,b[1]=0+g.y,b[2]=0+g.x,b[3]=1*h.y+g.y,d[0]=1,d[1]=1,c[0]=0,c[1]=1;for(var i,j,k,l=a.length,m=1;m<l;m++)i=a[m],j=4*m,k=m/(l-1),b[j]=k*h.x+g.x,b[j+1]=0+g.y,b[j+2]=k*h.x+g.x,b[j+3]=1*h.y+g.y,j=2*m,d[j]=1,d[j+1]=1,j=2*m,c[j]=j,c[j+1]=j+1;this.dirty=!0,this.indexDirty=!0}},d.prototype._onTextureUpdate=function(){e.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},d.prototype.updateTransform=function(){var a=this.points;if(!(a.length<1)){for(var b,c,d,e,f,g,h=a[0],i=0,j=0,k=this.vertices,l=a.length,m=0;m<l;m++)c=a[m],d=4*m,b=m<a.length-1?a[m+1]:c,j=-(b.x-h.x),i=b.y-h.y,e=10*(1-m/(l-1)),e>1&&(e=1),f=Math.sqrt(i*i+j*j),g=this._texture.height/2,i/=f,j/=f,i*=g,j*=g,k[d]=c.x+i,k[d+1]=c.y+j,k[d+2]=c.x-i,k[d+3]=c.y-j,h=c;this.containerUpdateTransform()}}},{"../core":62,"./Mesh":152}],156:[function(a,b,c){b.exports={Mesh:a("./Mesh"),Plane:a("./Plane"),NineSlicePlane:a("./NineSlicePlane"),Rope:a("./Rope"),MeshShader:a("./webgl/MeshShader")}},{"./Mesh":152,"./NineSlicePlane":153,"./Plane":154,"./Rope":155,"./webgl/MeshShader":157}],157:[function(a,b,c){function d(a){e.call(this,a,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["varying vec2 vTextureCoord;","uniform float alpha;","uniform vec3 tint;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);","}"].join("\n"))}var e=a("../../core/Shader");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{"../../core/Shader":42}],158:[function(a,b,c){function d(a,b,c){e.Container.call(this),c=c||15e3,a=a||15e3;var d=16384;c>d&&(c=d),c>a&&(c=a),this._properties=[!1,!0,!1,!1,!1],this._maxSize=a,this._batchSize=c,this._glBuffers=[],this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=e.BLEND_MODES.NORMAL,this.roundPixels=!0,this.baseTexture=null,this.setProperties(b)}var e=a("../core");d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])},d.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},d.prototype.renderWebGL=function(a){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){this.onChildrenChange(0)},this)),a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))},d.prototype.onChildrenChange=function(a){var b=Math.floor(a/this._batchSize);b<this._bufferToUpdate&&(this._bufferToUpdate=b)},d.prototype.renderCanvas=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var b=a.context,c=this.worldTransform,d=!0,e=0,f=0,g=0,h=0,i=a.blendModes[this.blendMode];i!==b.globalCompositeOperation&&(b.globalCompositeOperation=i),b.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var j=0;j<this.children.length;++j){var k=this.children[j];if(k.visible){var l=k.texture.frame;if(b.globalAlpha=this.worldAlpha*k.alpha,k.rotation%(2*Math.PI)===0)d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx*a.resolution,c.ty*a.resolution),d=!1),e=k.anchor.x*(-l.width*k.scale.x)+k.position.x+.5,f=k.anchor.y*(-l.height*k.scale.y)+k.position.y+.5,g=l.width*k.scale.x,h=l.height*k.scale.y;else{d||(d=!0),k.displayObjectUpdateTransform();var m=k.worldTransform;a.roundPixels?b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution|0,m.ty*a.resolution|0):b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution,m.ty*a.resolution),e=k.anchor.x*-l.width+.5,f=k.anchor.y*-l.height+.5,g=l.width,h=l.height}var n=k.texture.baseTexture.resolution;b.drawImage(k.texture.baseTexture.source,l.x*n,l.y*n,l.width*n,l.height*n,e*n,f*n,g*n,h*n)}}}},d.prototype.destroy=function(){if(e.Container.prototype.destroy.apply(this,arguments),this._buffers)for(var a=0;a<this._buffers.length;++a)this._buffers[a].destroy();this._properties=null,this._buffers=null}},{"../core":62}],159:[function(a,b,c){b.exports={ParticleContainer:a("./ParticleContainer"),ParticleRenderer:a("./webgl/ParticleRenderer")}},{"./ParticleContainer":158,"./webgl/ParticleRenderer":161}],160:[function(a,b,c){function d(a,b,c,d){this.gl=a,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=d,this.dynamicProperties=[],this.staticProperties=[];for(var e=0;e<b.length;e++){var f=b[e];f={attribute:f.attribute,size:f.size,uploadFunction:f.uploadFunction,offset:f.offset},c[e]?this.dynamicProperties.push(f):this.staticProperties.push(f)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}var e=a("pixi-gl-core"),f=a("../../core/utils/createIndicesForQuads");d.prototype.constructor=d,b.exports=d,d.prototype.initBuffers=function(){var a,b,c=this.gl,d=0;for(this.indices=f(this.size),this.indexBuffer=e.GLBuffer.createIndexBuffer(c,this.indices,c.STATIC_DRAW),this.dynamicStride=0,a=0;a<this.dynamicProperties.length;a++)b=this.dynamicProperties[a],b.offset=d,d+=b.size,this.dynamicStride+=b.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=e.GLBuffer.createVertexBuffer(c,this.dynamicData,c.STREAM_DRAW);var g=0;for(this.staticStride=0,a=0;a<this.staticProperties.length;a++)b=this.staticProperties[a],b.offset=g,g+=b.size,this.staticStride+=b.size;for(this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=e.GLBuffer.createVertexBuffer(c,this.staticData,c.STATIC_DRAW),this.vao=new e.VertexArrayObject(c).addIndex(this.indexBuffer),a=0;a<this.dynamicProperties.length;a++)b=this.dynamicProperties[a],this.vao.addAttribute(this.dynamicBuffer,b.attribute,c.FLOAT,!1,4*this.dynamicStride,4*b.offset);for(a=0;a<this.staticProperties.length;a++)b=this.staticProperties[a],this.vao.addAttribute(this.staticBuffer,b.attribute,c.FLOAT,!1,4*this.staticStride,4*b.offset)},d.prototype.uploadDynamic=function(a,b,c){for(var d=0;d<this.dynamicProperties.length;d++){var e=this.dynamicProperties[d];e.uploadFunction(a,b,c,this.dynamicData,this.dynamicStride,e.offset)}this.dynamicBuffer.upload()},d.prototype.uploadStatic=function(a,b,c){for(var d=0;d<this.staticProperties.length;d++){var e=this.staticProperties[d];e.uploadFunction(a,b,c,this.staticData,this.staticStride,e.offset)}this.staticBuffer.upload()},d.prototype.bind=function(){this.vao.bind()},d.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()}},{"../../core/utils/createIndicesForQuads":114,"pixi-gl-core":12}],161:[function(a,b,c){function d(a){e.ObjectRenderer.call(this,a),this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new e.Matrix,this.CONTEXT_UID=0}var e=a("../../core"),f=a("./ParticleShader"),g=a("./ParticleBuffer");d.prototype=Object.create(e.ObjectRenderer.prototype),d.prototype.constructor=d,b.exports=d,e.WebGLRenderer.registerPlugin("particle",d),d.prototype.onContextChange=function(){var a=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new f(a),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},d.prototype.start=function(){this.renderer.bindShader(this.shader)},d.prototype.render=function(a){var b=a.children,c=b.length,d=a._maxSize,e=a._batchSize;if(0!==c){c>d&&(c=d);var f=a._glBuffers[this.renderer.CONTEXT_UID];f||(f=a._glBuffers[this.renderer.CONTEXT_UID]=this.generateBuffers(a)),this.renderer.setBlendMode(a.blendMode);var g=this.renderer.gl,h=a.worldTransform.copy(this.tempMatrix);h.prepend(this.renderer._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=h.toArray(!0),this.shader.uniforms.uAlpha=a.worldAlpha;var i=b[0]._texture.baseTexture;this.renderer.bindTexture(i);for(var j=0,k=0;j<c;j+=e,k+=1){var l=c-j;l>e&&(l=e);var m=f[k];m.uploadDynamic(b,j,l),a._bufferToUpdate===k&&(m.uploadStatic(b,j,l),a._bufferToUpdate=k+1),m.vao.bind().draw(g.TRIANGLES,6*l).unbind()}}},d.prototype.generateBuffers=function(a){var b,c=this.renderer.gl,d=[],e=a._maxSize,f=a._batchSize,h=a._properties;for(b=0;b<e;b+=f)d.push(new g(c,this.properties,h,f));return d},d.prototype.uploadVertices=function(a,b,c,d,e,f){for(var g,h,i,j,k,l,m,n,o,p,q=0;q<c;q++)g=a[b+q],h=g._texture,k=g.scale.x,l=g.scale.y,i=h.trim,j=h.orig,i?(n=i.x-g.anchor.x*j.width,m=n+i.width,p=i.y-g.anchor.y*j.height,o=p+i.height):(m=j.width*(1-g.anchor.x),n=j.width*-g.anchor.x,o=j.height*(1-g.anchor.y),p=j.height*-g.anchor.y),d[f]=n*k,d[f+1]=p*l,d[f+e]=m*k,d[f+e+1]=p*l,d[f+2*e]=m*k,d[f+2*e+1]=o*l,d[f+3*e]=n*k,d[f+3*e+1]=o*l,f+=4*e},d.prototype.uploadPosition=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].position;d[f]=h.x,d[f+1]=h.y,d[f+e]=h.x,d[f+e+1]=h.y,d[f+2*e]=h.x,d[f+2*e+1]=h.y,d[f+3*e]=h.x,d[f+3*e+1]=h.y,f+=4*e}},d.prototype.uploadRotation=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].rotation;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},d.prototype.uploadUvs=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g]._texture._uvs;h?(d[f]=h.x0,d[f+1]=h.y0,d[f+e]=h.x1,d[f+e+1]=h.y1,d[f+2*e]=h.x2,d[f+2*e+1]=h.y2,
d[f+3*e]=h.x3,d[f+3*e+1]=h.y3,f+=4*e):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0,f+=4*e)}},d.prototype.uploadAlpha=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].alpha;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},d.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.ObjectRenderer.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../core":62,"./ParticleBuffer":160,"./ParticleShader":162}],162:[function(a,b,c){function d(a){e.call(this,a,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"))}var e=a("../../core/Shader");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{"../../core/Shader":42}],163:[function(a,b,c){Math.sign||(Math.sign=function(a){return a=+a,0===a||isNaN(a)?a:a>0?1:-1})},{}],164:[function(a,b,c){Object.assign||(Object.assign=a("object-assign"))},{"object-assign":5}],165:[function(a,b,c){a("./Object.assign"),a("./requestAnimationFrame"),a("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":163,"./Object.assign":164,"./requestAnimationFrame":166}],166:[function(a,b,c){(function(a){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!a.performance||!a.performance.now){var b=Date.now();a.performance||(a.performance={}),a.performance.now=function(){return Date.now()-b}}for(var c=Date.now(),d=["ms","moz","webkit","o"],e=0;e<d.length&&!a.requestAnimationFrame;++e)a.requestAnimationFrame=a[d[e]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d[e]+"CancelAnimationFrame"]||a[d[e]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(a){if("function"!=typeof a)throw new TypeError(a+"is not a function");var b=Date.now(),d=16+c-b;return d<0&&(d=0),c=b,setTimeout(function(){c=Date.now(),a(performance.now())},d)}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],167:[function(a,b,c){function d(){}var e=a("../../core");d.prototype.constructor=d,b.exports=d,d.prototype.upload=function(a,b){"function"==typeof a&&(b=a,a=null),b()},d.prototype.register=function(){return this},d.prototype.add=function(){return this},d.prototype.destroy=function(){},e.CanvasRenderer.registerPlugin("prepare",d)},{"../../core":62}],168:[function(a,b,c){b.exports={webGL:a("./webgl/WebGLPrepare"),canvas:a("./canvas/CanvasPrepare")}},{"./canvas/CanvasPrepare":167,"./webgl/WebGLPrepare":169}],169:[function(a,b,c){function d(a){this.renderer=a,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.register(g,e).register(h,f)}function e(a,b){return b instanceof i.BaseTexture&&(a.textureManager.updateTexture(b),!0)}function f(a,b){return b instanceof i.Graphics&&(a.plugins.graphics.updateGraphics(b),!0)}function g(a,b){if(a instanceof i.BaseTexture)return b.indexOf(a)===-1&&b.push(a),!0;if(a._texture&&a._texture instanceof i.Texture){var c=a._texture.baseTexture;return b.indexOf(c)===-1&&b.push(c),!0}return!1}function h(a,b){return a instanceof i.Graphics&&(b.push(a),!0)}var i=a("../../core"),j=i.ticker.shared;d.UPLOADS_PER_FRAME=4,d.prototype.constructor=d,b.exports=d,d.prototype.upload=function(a,b){"function"==typeof a&&(b=a,a=null),a&&this.add(a),this.queue.length?(this.numLeft=d.UPLOADS_PER_FRAME,this.completes.push(b),this.ticking||(this.ticking=!0,j.add(this.tick,this))):b()},d.prototype.tick=function(){for(var a,b;this.queue.length&&this.numLeft>0;){var c=this.queue[0],e=!1;for(a=0,b=this.uploadHooks.length;a<b;a++)if(this.uploadHooks[a](this.renderer,c)){this.numLeft--,this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)this.numLeft=d.UPLOADS_PER_FRAME;else{this.ticking=!1,j.remove(this.tick,this);var f=this.completes.slice(0);for(this.completes.length=0,a=0,b=f.length;a<b;a++)f[a]()}},d.prototype.register=function(a,b){return a&&this.addHooks.push(a),b&&this.uploadHooks.push(b),this},d.prototype.add=function(a){var b,c;for(b=0,c=this.addHooks.length;b<c&&!this.addHooks[b](a,this.queue);b++);if(a instanceof i.Container)for(b=a.children.length-1;b>=0;b--)this.add(a.children[b]);return this},d.prototype.destroy=function(){this.ticking&&j.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null},i.WebGLRenderer.registerPlugin("prepare",d)},{"../../core":62}],170:[function(a,b,c){(function(c){a("./polyfill");var d=b.exports=a("./core");d.extras=a("./extras"),d.filters=a("./filters"),d.interaction=a("./interaction"),d.loaders=a("./loaders"),d.mesh=a("./mesh"),d.particles=a("./particles"),d.accessibility=a("./accessibility"),d.extract=a("./extract"),d.prepare=a("./prepare"),d.loader=new d.loaders.Loader,Object.assign(d,a("./deprecation")),c.PIXI=d}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":41,"./core":62,"./deprecation":119,"./extract":121,"./extras":129,"./filters":140,"./interaction":145,"./loaders":148,"./mesh":156,"./particles":159,"./polyfill":165,"./prepare":168}]},{},[170])(170)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=a("./js/main.js");!function(a){e.init()}(jQuery);var d=function(){return this}.call(null);if("undefined"!=typeof c){var f=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[f]=b.exports}}).call(this,"/src/index.js")},{"./js/main.js":8}],3:[function(a,b,c){(function(a){var c=function(){return this}.call(null);c.require||(c.require=function(a){return c.require[a.replace(/\\/g,"/")]},function(){var a=c.require,b=c.require;Object.defineProperty(c,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var d=function(a){};d.prototype.run=function(){},b.exports={init:function(){return new d}};var c=function(){return this}.call(null);if("undefined"!=typeof a){var e=a.slice(0,a.lastIndexOf(".")).replace(/\\/g,"/");c.require[e]=b.exports}}).call(this,"/src/js/controllers/gameController.js")},{}],4:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=(a("../utils/gameConfig.js"),function(){function a(a){var b={};return b.code=a,b.isDown=!1,b.isUp=!0,b.press=void 0,b.release=void 0,b.downHandler=function(a){a.keyCode===b.code&&(b.isUp&&b.press&&b.press(),b.isDown=!0,b.isUp=!1),a.preventDefault()},b.upHandler=function(a){a.keyCode===b.code&&(b.isDown&&b.release&&b.release(),b.isDown=!1,b.isUp=!0),a.preventDefault()},window.addEventListener("keydown",b.downHandler.bind(b),!1),window.addEventListener("keyup",b.upHandler.bind(b),!1),b}var b=a(37),c=a(38),d=a(39),e=a(40);b.press=function(){console.log("Left Key pressed")},b.release=function(){console.log("Left Key released")},c.press=function(){console.log("Up Key pressed")},c.release=function(){console.log("Up Key released")},d.press=function(){console.log("Right Key pressed")},d.release=function(){console.log("Right Key released")},e.press=function(){console.log("Down Key pressed")},e.release=function(){console.log("Down Key released")}});b.exports={init:function(){return new e}};var d=function(){return this}.call(null);if("undefined"!=typeof c){var f=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[f]=b.exports}}).call(this,"/src/js/controllers/inputController.js")},{"../utils/gameConfig.js":11}],5:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=a("../utils/gameConfig.js"),f=(a("../utils/worldConfig.js"),a("../utils/canvasSetup.js")),g=a("../utils/assetLoader.js"),h=a("../utils/worldSetup.js"),i=a("../utils/uiSetup.js"),j=a("../hero/mainHero.js"),k=function(){var a=f.init();return $(e.selectors.STAGE).html(a.view),a},l=function(){function a(){var a=h.init(b.resources),d=i.init(),e=j.init(b.resources),f=f||{};f.hero=e,c.addChild(a),c.addChild(d),c.addChild(e)}var b=g.loadAssets(a),c=new e.PIXI.Container;return c},m=function(){},n=function(){};b.exports={setupCanvas:function(){return k()},setupStage:function(){return l()},setupUi:function(){return m()},setupHero:function(){return n()}};var d=function(){return this}.call(null);if("undefined"!=typeof c){var o=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[o]=b.exports}}).call(this,"/src/js/controllers/viewController.js")},{"../hero/mainHero.js":7,"../utils/assetLoader.js":9,"../utils/canvasSetup.js":10,"../utils/gameConfig.js":11,"../utils/uiSetup.js":12,"../utils/worldConfig.js":13,"../utils/worldSetup.js":14}],6:[function(a,b,c){(function(a){var c=function(){return this}.call(null);c.require||(c.require=function(a){return c.require[a.replace(/\\/g,"/")]},function(){var a=c.require,b=c.require;Object.defineProperty(c,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var d={ASSET_LOCATION:"/src/assets/",HERO_WIDTH:71,HERO_HEIGHT:159},e={cart:"cart"},f=["cart.png"];b.exports={constants:d,CART_TYPES:e,ASSET_LIST:f};var c=function(){return this}.call(null);if("undefined"!=typeof a){var g=a.slice(0,a.lastIndexOf(".")).replace(/\\/g,"/");c.require[g]=b.exports}}).call(this,"/src/js/hero/heroConfig.js")},{}],7:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=a("../utils/gameConfig.js"),f=a("./heroConfig.js"),g=function(a,b){var c="cart",d=a[f.constants.ASSET_LOCATION+c+".png"],g=new e.PIXI.Sprite(d.texture);return g.width=f.constants.HERO_WIDTH,g.height=f.constants.HERO_HEIGHT,g.x=e.constants.GAME_WIDTH/2-g.width/2,g.y=e.constants.GAME_HEIGHT/2-100,g};b.exports={init:function(a,b){return g(a,b)}};var d=function(){return this}.call(null);if("undefined"!=typeof c){var h=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[h]=b.exports}}).call(this,"/src/js/hero/mainHero.js")},{"../utils/gameConfig.js":11,"./heroConfig.js":6}],8:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=a("./controllers/viewController"),f=a("./controllers/gameController"),g=a("./controllers/inputController"),h=function(){return e.setupCanvas()},i=function(){return e.setupStage()},j=function(){return f.init()},k=function(){return g.init()},l=function(){function a(){requestAnimationFrame(a),d.run(),b.render(c)}var b=h(),c=i(),d=j(),e=k(),f=f||{};f.stage=c,f.game_controller=d,f.input_controller=e,console.log("CANVAS",b),console.log("STAGE",c),console.log("GAME CONTROLLER",d),console.log("INPUT CONTROLLER",e),a()};b.exports={init:function(){l()}};var d=function(){return this}.call(null);if("undefined"!=typeof c){var m=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[m]=b.exports}}).call(this,"/src/js/main.js")},{"./controllers/gameController":3,"./controllers/inputController":4,"./controllers/viewController":5}],9:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=a("./gameConfig.js"),f=a("./worldConfig.js"),g=function(a){for(var b=[],c=0;c<a.ASSET_LIST.length;c++)b[c]=a.constants.ASSET_LOCATION+a.ASSET_LIST[c];return b},h=function(a,b){console.log("loading resource: "+b.url),console.log("progress: "+a.progress+"%")},i=function(a){var b=g(f),c=new e.PIXI.loaders.Loader;return c.add(b),c.on("progress",h),c.load(a),c};b.exports={loadAssets:function(a){return i(a)}};var d=function(){return this}.call(null);if("undefined"!=typeof c){var j=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[j]=b.exports}}).call(this,"/src/js/utils/assetLoader.js")},{"./gameConfig.js":11,"./worldConfig.js":13}],10:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=a("./gameConfig.js"),f=function(){var a=e.PIXI.autoDetectRenderer(e.constants.GAME_WIDTH,e.constants.GAME_HEIGHT,e.constants.RENDER_OPTIONS);return a.roundPixels=!0,a};b.exports={init:function(){return f()}};var d=function(){return this}.call(null);if("undefined"!=typeof c){var g=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[g]=b.exports}}).call(this,"/src/js/utils/canvasSetup.js")},{"./gameConfig.js":11}],11:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var d=function(){return this}.call(null);d.require["pixi.js"]=a("pixi.js");var e=a("pixi.js");e.utils._saidHello=!0;var f={GAME_WIDTH:900,GAME_HEIGHT:506,UI_WIDTH:900,UI_HEIGHT:80,RENDER_OPTIONS:{antialias:!1,transparent:!1,resolution:1}},g={STAGE:"#stage"};b.exports={PIXI:e,constants:f,selectors:g};var d=function(){return this}.call(null);if("undefined"!=typeof c){var h=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[h]=b.exports}}).call(this,"/src/js/utils/gameConfig.js")},{"pixi.js":1}],12:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=a("./gameConfig.js"),f=(a("./worldConfig.js"),function(){var a=new e.PIXI.Graphics;return a.beginFill(12264110),a.drawRect(0,0,e.constants.UI_WIDTH,e.constants.UI_HEIGHT),a.endFill(),a.x=0,a.y=e.constants.GAME_HEIGHT-a.height,a});b.exports={init:function(){return f()}};var d=function(){return this}.call(null);if("undefined"!=typeof c){var g=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[g]=b.exports}}).call(this,"/src/js/utils/uiSetup.js")},{"./gameConfig.js":11,"./worldConfig.js":13}],13:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=(a("./gameConfig.js"),{ASSET_LOCATION:"/src/assets/",TILE_WIDTH:50,TILE_HEIGHT:50,GAME_WIDTH:22,GAME_HEIGHT:22}),f={grass:"grass-01",path:"path-01",path_left:"path-01left",path_right:"path-01right"},g={cart_01:"cart.png"},h=["grass-01.png","path-01.png","path-01left.png","path-01right.png","cart.png"];b.exports={constants:e,tile_names:f,carts_all:g,ASSET_LIST:h};var d=function(){return this}.call(null);if("undefined"!=typeof c){var i=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[i]=b.exports}}).call(this,"/src/js/utils/worldConfig.js")},{"./gameConfig.js":11}],14:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=a("./gameConfig.js"),f=a("./worldConfig.js"),g=a("../world/tile.js"),h=function(a,b){for(var c=new Array(f.constants.GAME_HEIGHT),d=0;d<f.constants.GAME_WIDTH;d++)c[d]=new Array(f.constants.GAME_WIDTH);for(var e=0;e<f.constants.GAME_HEIGHT;e++)for(var h=0;h<f.constants.GAME_WIDTH;h++){var i="grass";10===h&&(i="path_left"),11===h&&(i="path"),12===h&&(i="path_right");var j=g.init(a,i);j.x=Math.floor(h*f.constants.TILE_WIDTH),j.y=Math.floor(e*f.constants.TILE_HEIGHT),c[e][h]=j,b.addChild(j)}var k=k||{};return k.worldGrid=b,b},i=function(a){return a.x=e.constants.GAME_WIDTH/2-a.width/2,a.y=e.constants.GAME_HEIGHT-a.height-e.constants.UI_HEIGHT/2,a},j=function(a){var b=new e.PIXI.Container;return b=h(a,b),b=i(b)};b.exports={init:function(a){return j(a)}};var d=function(){return this}.call(null);if("undefined"!=typeof c){var k=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[k]=b.exports}}).call(this,"/src/js/utils/worldSetup.js")},{"../world/tile.js":15,"./gameConfig.js":11,"./worldConfig.js":13}],15:[function(a,b,c){(function(c){var d=function(){return this}.call(null);d.require||(d.require=function(a){return d.require[a.replace(/\\/g,"/")]},function(){var a=d.require,b=d.require;Object.defineProperty(d,"require",{get:function(){return b},set:function(c){b=function(d){if(d=d.replace(/\\/g,"/"),a[d])return a[d];if(a[d+"/index"])return a[d+"/index"];var e,f=b;b=c;try{e=c(d)}catch(a){throw b=f,a}return b=f,e};for(var d in a)b[d]=a[d]}})}());var e=a("../utils/gameConfig.js"),f=a("../utils/worldConfig.js"),g=function(a){var b=1,c=4,d=Math.floor(Math.random()*(c-b+1))+b,e=0;switch(d){case 1:e=0;break;case 2:e=Math.PI/2;break;case 3:e=Math.PI;break;case 4:e=3*Math.PI/2}return a.rotation=e,a},h=function(a,b){var c="",d=!1;switch(b){case"grass":c=f.tile_names.grass,d=!0;break;case"path":c=f.tile_names.path,d=!0;break;case"path_left":c=f.tile_names.path_left,d=!1;break;case"path_right":c=f.tile_names.path_right,d=!1}var h=a[f.constants.ASSET_LOCATION+c+".png"],i=new e.PIXI.Sprite(h.texture);return i.width=f.constants.TILE_WIDTH,i.height=f.constants.TILE_HEIGHT,i.pivot._x=f.constants.TILE_WIDTH/2,i.pivot._y=f.constants.TILE_HEIGHT/2,i.type=c,d&&(i=g(i)),i};b.exports={init:function(a,b){return h(a,b)}};var d=function(){return this}.call(null);if("undefined"!=typeof c){var i=c.slice(0,c.lastIndexOf(".")).replace(/\\/g,"/");d.require[i]=b.exports}}).call(this,"/src/js/world/tile.js")},{"../utils/gameConfig.js":11,"../utils/worldConfig.js":13}]},{},[2]);